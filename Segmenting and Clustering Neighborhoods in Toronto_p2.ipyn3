{
    "nbformat_minor": 1, 
    "cells": [
        {
            "source": "**First, we'll import the necessary libraries**", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "execution_count": 91, 
            "cell_type": "code", 
            "metadata": {}, 
            "outputs": [
                {
                    "output_type": "stream", 
                    "name": "stdout", 
                    "text": "Fetching package metadata .............\nSolving package specifications: .\n\n# All requested packages already installed.\n# packages in environment at /opt/conda/envs/DSX-Python35:\n#\ngeopy                     1.18.1                     py_0    conda-forge\nFetching package metadata .............\nSolving package specifications: .\n\n# All requested packages already installed.\n# packages in environment at /opt/conda/envs/DSX-Python35:\n#\nfolium                    0.5.0                      py_0    conda-forge\n"
                }
            ], 
            "source": "import requests\nfrom bs4 import BeautifulSoup\nimport pandas as pd\n!conda install -c conda-forge geopy --yes \nfrom geopy.geocoders import Nominatim # convert an address into latitude and longitude values\n\n# Matplotlib and associated plotting modules\nimport matplotlib.cm as cm\nimport matplotlib.colors as colors\n\n# import k-means from clustering stage\nfrom sklearn.cluster import KMeans\n\n!conda install -c conda-forge folium=0.5.0 --yes # uncomment this line if you haven't completed the Foursquare API lab\nimport folium # map rendering library"
        }, 
        {
            "execution_count": null, 
            "cell_type": "code", 
            "metadata": {}, 
            "outputs": [], 
            "source": ""
        }, 
        {
            "source": "**Using BeautifulSoup we parse out the html table of postal codes**", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "execution_count": 92, 
            "cell_type": "code", 
            "metadata": {}, 
            "outputs": [], 
            "source": "url = requests.get('https://en.wikipedia.org/wiki/List_of_postal_codes_of_Canada:_M').text\nsoup = BeautifulSoup(url, 'lxml')"
        }, 
        {
            "source": "**Finally we'll create our dataframe and clean it up**", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "execution_count": 93, 
            "cell_type": "code", 
            "metadata": {}, 
            "outputs": [
                {
                    "execution_count": 93, 
                    "metadata": {}, 
                    "data": {
                        "text/html": "<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>PostalCode</th>\n      <th>Borough</th>\n      <th>Neighborhood</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>M1B</td>\n      <td>Scarborough</td>\n      <td>Rouge, Malvern</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>M1C</td>\n      <td>Scarborough</td>\n      <td>Highland Creek, Rouge Hill, Port Union</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>M1E</td>\n      <td>Scarborough</td>\n      <td>Guildwood, Morningside, West Hill</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>M1G</td>\n      <td>Scarborough</td>\n      <td>Woburn</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>M1H</td>\n      <td>Scarborough</td>\n      <td>Cedarbrae</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>M1J</td>\n      <td>Scarborough</td>\n      <td>Scarborough Village</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>M1K</td>\n      <td>Scarborough</td>\n      <td>East Birchmount Park, Ionview, Kennedy Park</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>M1L</td>\n      <td>Scarborough</td>\n      <td>Clairlea, Golden Mile, Oakridge</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>M1M</td>\n      <td>Scarborough</td>\n      <td>Cliffcrest, Cliffside, Scarborough Village West</td>\n    </tr>\n    <tr>\n      <th>9</th>\n      <td>M1N</td>\n      <td>Scarborough</td>\n      <td>Birch Cliff, Cliffside West</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>M1P</td>\n      <td>Scarborough</td>\n      <td>Dorset Park, Scarborough Town Centre, Wexford ...</td>\n    </tr>\n    <tr>\n      <th>11</th>\n      <td>M1R</td>\n      <td>Scarborough</td>\n      <td>Maryvale, Wexford</td>\n    </tr>\n    <tr>\n      <th>12</th>\n      <td>M1S</td>\n      <td>Scarborough</td>\n      <td>Agincourt</td>\n    </tr>\n    <tr>\n      <th>13</th>\n      <td>M1T</td>\n      <td>Scarborough</td>\n      <td>Clarks Corners, Sullivan, Tam O'Shanter</td>\n    </tr>\n    <tr>\n      <th>14</th>\n      <td>M1V</td>\n      <td>Scarborough</td>\n      <td>Agincourt North, L'Amoreaux East, Milliken, St...</td>\n    </tr>\n    <tr>\n      <th>15</th>\n      <td>M1W</td>\n      <td>Scarborough</td>\n      <td>L'Amoreaux West, Steeles West</td>\n    </tr>\n    <tr>\n      <th>16</th>\n      <td>M1X</td>\n      <td>Scarborough</td>\n      <td>Upper Rouge</td>\n    </tr>\n    <tr>\n      <th>17</th>\n      <td>M2H</td>\n      <td>North York</td>\n      <td>Hillcrest Village</td>\n    </tr>\n    <tr>\n      <th>18</th>\n      <td>M2J</td>\n      <td>North York</td>\n      <td>Fairview, Henry Farm, Oriole</td>\n    </tr>\n    <tr>\n      <th>19</th>\n      <td>M2K</td>\n      <td>North York</td>\n      <td>Bayview Village</td>\n    </tr>\n    <tr>\n      <th>20</th>\n      <td>M2L</td>\n      <td>North York</td>\n      <td>Silver Hills, York Mills</td>\n    </tr>\n    <tr>\n      <th>21</th>\n      <td>M2M</td>\n      <td>North York</td>\n      <td>Newtonbrook, Willowdale</td>\n    </tr>\n    <tr>\n      <th>22</th>\n      <td>M2N</td>\n      <td>North York</td>\n      <td>Willowdale South</td>\n    </tr>\n    <tr>\n      <th>23</th>\n      <td>M2P</td>\n      <td>North York</td>\n      <td>York Mills West</td>\n    </tr>\n    <tr>\n      <th>24</th>\n      <td>M2R</td>\n      <td>North York</td>\n      <td>Willowdale West</td>\n    </tr>\n    <tr>\n      <th>25</th>\n      <td>M3A</td>\n      <td>North York</td>\n      <td>Parkwoods</td>\n    </tr>\n    <tr>\n      <th>26</th>\n      <td>M3B</td>\n      <td>North York</td>\n      <td>Don Mills North</td>\n    </tr>\n    <tr>\n      <th>27</th>\n      <td>M3C</td>\n      <td>North York</td>\n      <td>Flemingdon Park, Don Mills South</td>\n    </tr>\n    <tr>\n      <th>28</th>\n      <td>M3H</td>\n      <td>North York</td>\n      <td>Bathurst Manor, Downsview North, Wilson Heights</td>\n    </tr>\n    <tr>\n      <th>29</th>\n      <td>M3J</td>\n      <td>North York</td>\n      <td>Northwood Park, York University</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>73</th>\n      <td>M6C</td>\n      <td>York</td>\n      <td>Humewood-Cedarvale</td>\n    </tr>\n    <tr>\n      <th>74</th>\n      <td>M6E</td>\n      <td>York</td>\n      <td>Caledonia-Fairbanks</td>\n    </tr>\n    <tr>\n      <th>75</th>\n      <td>M6G</td>\n      <td>Downtown Toronto</td>\n      <td>Christie</td>\n    </tr>\n    <tr>\n      <th>76</th>\n      <td>M6H</td>\n      <td>West Toronto</td>\n      <td>Dovercourt Village, Dufferin</td>\n    </tr>\n    <tr>\n      <th>77</th>\n      <td>M6J</td>\n      <td>West Toronto</td>\n      <td>Little Portugal, Trinity</td>\n    </tr>\n    <tr>\n      <th>78</th>\n      <td>M6K</td>\n      <td>West Toronto</td>\n      <td>Brockton, Exhibition Place, Parkdale Village</td>\n    </tr>\n    <tr>\n      <th>79</th>\n      <td>M6L</td>\n      <td>North York</td>\n      <td>Maple Leaf Park, North Park, Upwood Park</td>\n    </tr>\n    <tr>\n      <th>80</th>\n      <td>M6M</td>\n      <td>York</td>\n      <td>Del Ray, Keelesdale, Mount Dennis, Silverthorn</td>\n    </tr>\n    <tr>\n      <th>81</th>\n      <td>M6N</td>\n      <td>York</td>\n      <td>The Junction North, Runnymede</td>\n    </tr>\n    <tr>\n      <th>82</th>\n      <td>M6P</td>\n      <td>West Toronto</td>\n      <td>High Park, The Junction South</td>\n    </tr>\n    <tr>\n      <th>83</th>\n      <td>M6R</td>\n      <td>West Toronto</td>\n      <td>Parkdale, Roncesvalles</td>\n    </tr>\n    <tr>\n      <th>84</th>\n      <td>M6S</td>\n      <td>West Toronto</td>\n      <td>Runnymede, Swansea</td>\n    </tr>\n    <tr>\n      <th>85</th>\n      <td>M7A</td>\n      <td>Queen's Park</td>\n      <td>Queen's Park</td>\n    </tr>\n    <tr>\n      <th>86</th>\n      <td>M7R</td>\n      <td>Mississauga</td>\n      <td>Canada Post Gateway Processing Centre</td>\n    </tr>\n    <tr>\n      <th>87</th>\n      <td>M7Y</td>\n      <td>East Toronto</td>\n      <td>Business reply mail Processing Centre969 Eastern</td>\n    </tr>\n    <tr>\n      <th>88</th>\n      <td>M8V</td>\n      <td>Etobicoke</td>\n      <td>Humber Bay Shores, Mimico South, New Toronto</td>\n    </tr>\n    <tr>\n      <th>89</th>\n      <td>M8W</td>\n      <td>Etobicoke</td>\n      <td>Alderwood, Long Branch</td>\n    </tr>\n    <tr>\n      <th>90</th>\n      <td>M8X</td>\n      <td>Etobicoke</td>\n      <td>The Kingsway, Montgomery Road, Old Mill North</td>\n    </tr>\n    <tr>\n      <th>91</th>\n      <td>M8Y</td>\n      <td>Etobicoke</td>\n      <td>Humber Bay, King's Mill Park, Kingsway Park So...</td>\n    </tr>\n    <tr>\n      <th>92</th>\n      <td>M8Z</td>\n      <td>Etobicoke</td>\n      <td>Kingsway Park South West, Mimico NW, The Queen...</td>\n    </tr>\n    <tr>\n      <th>93</th>\n      <td>M9A</td>\n      <td>Etobicoke</td>\n      <td>Islington Avenue</td>\n    </tr>\n    <tr>\n      <th>94</th>\n      <td>M9B</td>\n      <td>Etobicoke</td>\n      <td>Cloverdale, Islington, Martin Grove, Princess ...</td>\n    </tr>\n    <tr>\n      <th>95</th>\n      <td>M9C</td>\n      <td>Etobicoke</td>\n      <td>Bloordale Gardens, Eringate, Markland Wood, Ol...</td>\n    </tr>\n    <tr>\n      <th>96</th>\n      <td>M9L</td>\n      <td>North York</td>\n      <td>Humber Summit</td>\n    </tr>\n    <tr>\n      <th>97</th>\n      <td>M9M</td>\n      <td>North York</td>\n      <td>Emery, Humberlea</td>\n    </tr>\n    <tr>\n      <th>98</th>\n      <td>M9N</td>\n      <td>York</td>\n      <td>Weston</td>\n    </tr>\n    <tr>\n      <th>99</th>\n      <td>M9P</td>\n      <td>Etobicoke</td>\n      <td>Westmount</td>\n    </tr>\n    <tr>\n      <th>100</th>\n      <td>M9R</td>\n      <td>Etobicoke</td>\n      <td>Kingsview Village, Martin Grove Gardens, Richv...</td>\n    </tr>\n    <tr>\n      <th>101</th>\n      <td>M9V</td>\n      <td>Etobicoke</td>\n      <td>Albion Gardens, Beaumond Heights, Humbergate, ...</td>\n    </tr>\n    <tr>\n      <th>102</th>\n      <td>M9W</td>\n      <td>Etobicoke</td>\n      <td>Northwest</td>\n    </tr>\n  </tbody>\n</table>\n<p>103 rows \u00d7 3 columns</p>\n</div>", 
                        "text/plain": "    PostalCode           Borough  \\\n0          M1B       Scarborough   \n1          M1C       Scarborough   \n2          M1E       Scarborough   \n3          M1G       Scarborough   \n4          M1H       Scarborough   \n5          M1J       Scarborough   \n6          M1K       Scarborough   \n7          M1L       Scarborough   \n8          M1M       Scarborough   \n9          M1N       Scarborough   \n10         M1P       Scarborough   \n11         M1R       Scarborough   \n12         M1S       Scarborough   \n13         M1T       Scarborough   \n14         M1V       Scarborough   \n15         M1W       Scarborough   \n16         M1X       Scarborough   \n17         M2H        North York   \n18         M2J        North York   \n19         M2K        North York   \n20         M2L        North York   \n21         M2M        North York   \n22         M2N        North York   \n23         M2P        North York   \n24         M2R        North York   \n25         M3A        North York   \n26         M3B        North York   \n27         M3C        North York   \n28         M3H        North York   \n29         M3J        North York   \n..         ...               ...   \n73         M6C              York   \n74         M6E              York   \n75         M6G  Downtown Toronto   \n76         M6H      West Toronto   \n77         M6J      West Toronto   \n78         M6K      West Toronto   \n79         M6L        North York   \n80         M6M              York   \n81         M6N              York   \n82         M6P      West Toronto   \n83         M6R      West Toronto   \n84         M6S      West Toronto   \n85         M7A      Queen's Park   \n86         M7R       Mississauga   \n87         M7Y      East Toronto   \n88         M8V         Etobicoke   \n89         M8W         Etobicoke   \n90         M8X         Etobicoke   \n91         M8Y         Etobicoke   \n92         M8Z         Etobicoke   \n93         M9A         Etobicoke   \n94         M9B         Etobicoke   \n95         M9C         Etobicoke   \n96         M9L        North York   \n97         M9M        North York   \n98         M9N              York   \n99         M9P         Etobicoke   \n100        M9R         Etobicoke   \n101        M9V         Etobicoke   \n102        M9W         Etobicoke   \n\n                                          Neighborhood  \n0                                       Rouge, Malvern  \n1               Highland Creek, Rouge Hill, Port Union  \n2                    Guildwood, Morningside, West Hill  \n3                                               Woburn  \n4                                            Cedarbrae  \n5                                  Scarborough Village  \n6          East Birchmount Park, Ionview, Kennedy Park  \n7                      Clairlea, Golden Mile, Oakridge  \n8      Cliffcrest, Cliffside, Scarborough Village West  \n9                          Birch Cliff, Cliffside West  \n10   Dorset Park, Scarborough Town Centre, Wexford ...  \n11                                   Maryvale, Wexford  \n12                                           Agincourt  \n13             Clarks Corners, Sullivan, Tam O'Shanter  \n14   Agincourt North, L'Amoreaux East, Milliken, St...  \n15                       L'Amoreaux West, Steeles West  \n16                                         Upper Rouge  \n17                                   Hillcrest Village  \n18                        Fairview, Henry Farm, Oriole  \n19                                     Bayview Village  \n20                            Silver Hills, York Mills  \n21                             Newtonbrook, Willowdale  \n22                                    Willowdale South  \n23                                     York Mills West  \n24                                     Willowdale West  \n25                                           Parkwoods  \n26                                     Don Mills North  \n27                    Flemingdon Park, Don Mills South  \n28     Bathurst Manor, Downsview North, Wilson Heights  \n29                     Northwood Park, York University  \n..                                                 ...  \n73                                  Humewood-Cedarvale  \n74                                 Caledonia-Fairbanks  \n75                                            Christie  \n76                        Dovercourt Village, Dufferin  \n77                            Little Portugal, Trinity  \n78        Brockton, Exhibition Place, Parkdale Village  \n79            Maple Leaf Park, North Park, Upwood Park  \n80      Del Ray, Keelesdale, Mount Dennis, Silverthorn  \n81                       The Junction North, Runnymede  \n82                       High Park, The Junction South  \n83                              Parkdale, Roncesvalles  \n84                                  Runnymede, Swansea  \n85                                        Queen's Park  \n86               Canada Post Gateway Processing Centre  \n87    Business reply mail Processing Centre969 Eastern  \n88        Humber Bay Shores, Mimico South, New Toronto  \n89                              Alderwood, Long Branch  \n90       The Kingsway, Montgomery Road, Old Mill North  \n91   Humber Bay, King's Mill Park, Kingsway Park So...  \n92   Kingsway Park South West, Mimico NW, The Queen...  \n93                                    Islington Avenue  \n94   Cloverdale, Islington, Martin Grove, Princess ...  \n95   Bloordale Gardens, Eringate, Markland Wood, Ol...  \n96                                       Humber Summit  \n97                                    Emery, Humberlea  \n98                                              Weston  \n99                                           Westmount  \n100  Kingsview Village, Martin Grove Gardens, Richv...  \n101  Albion Gardens, Beaumond Heights, Humbergate, ...  \n102                                          Northwest  \n\n[103 rows x 3 columns]"
                    }, 
                    "output_type": "execute_result"
                }
            ], 
            "source": "postal_table = soup.find('table', {'class' : 'wikitable sortable'})\ndf = pd.read_html(postal_table.prettify())\ndf = df[0]\ndf.columns = df.iloc[0]\ndf.drop(df.index[0], inplace=True)\ndf = df[df.Borough != 'Not assigned']\ndf.columns = ['PostalCode', 'Borough', 'Neighborhood']\n\ndf = df.groupby(['PostalCode','Borough'])['Neighborhood'].apply(', '.join).reset_index()\ndf.Neighborhood.replace('Not assigned', df.Borough, inplace=True)\ndf"
        }, 
        {
            "execution_count": 130, 
            "cell_type": "code", 
            "metadata": {}, 
            "outputs": [
                {
                    "execution_count": 130, 
                    "metadata": {}, 
                    "data": {
                        "text/plain": "(103, 3)"
                    }, 
                    "output_type": "execute_result"
                }
            ], 
            "source": "df.shape"
        }, 
        {
            "source": "**Get coordinates from csv (geocoder not working)**", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "execution_count": 94, 
            "cell_type": "code", 
            "metadata": {}, 
            "outputs": [
                {
                    "output_type": "stream", 
                    "name": "stdout", 
                    "text": "--2018-12-31 19:19:55--  http://cocl.us/Geospatial_data\nResolving cocl.us (cocl.us)... 169.48.113.201\nConnecting to cocl.us (cocl.us)|169.48.113.201|:80... connected.\nHTTP request sent, awaiting response... 301 Moved Permanently\nLocation: https://cocl.us/Geospatial_data [following]\n--2018-12-31 19:19:55--  https://cocl.us/Geospatial_data\nConnecting to cocl.us (cocl.us)|169.48.113.201|:443... connected.\nHTTP request sent, awaiting response... 301 Moved Permanently\nLocation: https://ibm.box.com/shared/static/9afzr83pps4pwf2smjjcf1y5mvgb18rr.csv [following]\n--2018-12-31 19:19:55--  https://ibm.box.com/shared/static/9afzr83pps4pwf2smjjcf1y5mvgb18rr.csv\nResolving ibm.box.com (ibm.box.com)... 107.152.27.197\nConnecting to ibm.box.com (ibm.box.com)|107.152.27.197|:443... connected.\nHTTP request sent, awaiting response... 301 Moved Permanently\nLocation: https://ibm.ent.box.com/shared/static/9afzr83pps4pwf2smjjcf1y5mvgb18rr.csv [following]\n--2018-12-31 19:19:55--  https://ibm.ent.box.com/shared/static/9afzr83pps4pwf2smjjcf1y5mvgb18rr.csv\nResolving ibm.ent.box.com (ibm.ent.box.com)... 107.152.26.211\nConnecting to ibm.ent.box.com (ibm.ent.box.com)|107.152.26.211|:443... connected.\nHTTP request sent, awaiting response... 302 Found\nLocation: https://public.boxcloud.com/d/1/b1!Mvqbqdi0fOK8WB1C5xDPnzZ8GXbYio4tMrcaIXp6R5P5SmG-mnM7kMSKNDsEN_doY6_SPrXV7Ud8K2ScqGBPJuQboEQSNrURdtfCAKP6hYqRXwBPGWcPIFpBvvmt9ZeSvpT4txH9u-3wsl8tPy1aoWlLl76VcRXPpMYWRKJdWY0tPFGM9voj5sKa_Xjqq5y8oJJmm5-4POznq_YbWgZGWLoxGGaU_OuYXxlj-LwrW8qQCTwWs72HGX3EAQrMiFbb3V1Q2nAqvz0U9PKuohP1bFvjUY4VMOVn3plbv6EQMz368NoY9vn5WzkKLIuSiiYtmFmg7w2j_wU30BRA10RAd3n7rR39w5JmnUkQiGtCCwIDIUM8MIPFOmMjK1i_dJpqCj1WxRacNXXRPgqps_ZIqSSTiu2dTQ4IJle_xOx_tXQ8vh19ubxloQUaW-zU58DPQfnVqg1e0rSGvGcILm3MSll7dFTDwcnZmDPaJXcEDPi05PkjFsCzZgM9cAOHwaetSkYrI-XBMdpyJflz04Z6zpbS1rRhC7yUKvjAElUZSNonq8GDwCohoSHeAmL8PoP_X3ZzlDncKWY8LMgJOIle_yXARqXVa_8-QIOUpfUxicgArR1_T5utnJUGLKjfVQ87J2PK-L1VOQwDoDzYLDNcRJwhplhnrIOvz8ct8w_7KLEb7QNySsbzBFZmsirAJw1DGWWVT3xnuFNVCQ75Lo8OJHqCmuKoq0kZBsv12Bhy32BHpMxywdQ0s_JAA6giV9iLbDreo0p7nqtOyBHpIZDp8nklvWASB8FP-lK53hzlOmOrGNEXbd_YvkKAB02Ayg21bRCauKX3AWISylVH-UQQIDL7iADGe9D5Zu_PBQ1eZb96iBYYughfklsr0VG9_l3Yq5vxmgyGKT5Yj2VEzhPsbyYCSTYkqa0IGAw68LZp1zTLnd7uwpDUt1aHbNQZ69vcZcoOiyZ_FmklVef_If-urEJ4b3BrM2uFDinwAmdCoRrjtuR295oxnem_dMdVPdjXllaeGdQ_ekAneB2LFGZ5_2uPbxoYhpYlKvQdjohSKSMlSZRu-ym7yECPOUTHwCfagsLpG6T2X22wQEpJ7UNn3NdvPI9RMssPThv_JtwUCNW_1S1s3UOKhdEb8qtIF_G3d_PXfMUbhR0W6n0D3xSV_1y7NBMO1jELEII4UnlpzKnJ6LCZskoE2hY1zAuJuZ31HiWjOPD5C1M6jzlgj3fG1nm1zYOek8QxAUumh6kr-eUj-1odh4pWKXM_D0TOlaigeTbtZCC9xaB18c2_3JcBV1DOWpMzWWBqDcjSE7cmQDPACTw0SwRZEsfOThXdPC6dgMXDsZTcIDpvi38SMUa6Pwaa5PSIEmU8cTO5rudbM8oVNHnqrg../download [following]\n--2018-12-31 19:19:56--  https://public.boxcloud.com/d/1/b1!Mvqbqdi0fOK8WB1C5xDPnzZ8GXbYio4tMrcaIXp6R5P5SmG-mnM7kMSKNDsEN_doY6_SPrXV7Ud8K2ScqGBPJuQboEQSNrURdtfCAKP6hYqRXwBPGWcPIFpBvvmt9ZeSvpT4txH9u-3wsl8tPy1aoWlLl76VcRXPpMYWRKJdWY0tPFGM9voj5sKa_Xjqq5y8oJJmm5-4POznq_YbWgZGWLoxGGaU_OuYXxlj-LwrW8qQCTwWs72HGX3EAQrMiFbb3V1Q2nAqvz0U9PKuohP1bFvjUY4VMOVn3plbv6EQMz368NoY9vn5WzkKLIuSiiYtmFmg7w2j_wU30BRA10RAd3n7rR39w5JmnUkQiGtCCwIDIUM8MIPFOmMjK1i_dJpqCj1WxRacNXXRPgqps_ZIqSSTiu2dTQ4IJle_xOx_tXQ8vh19ubxloQUaW-zU58DPQfnVqg1e0rSGvGcILm3MSll7dFTDwcnZmDPaJXcEDPi05PkjFsCzZgM9cAOHwaetSkYrI-XBMdpyJflz04Z6zpbS1rRhC7yUKvjAElUZSNonq8GDwCohoSHeAmL8PoP_X3ZzlDncKWY8LMgJOIle_yXARqXVa_8-QIOUpfUxicgArR1_T5utnJUGLKjfVQ87J2PK-L1VOQwDoDzYLDNcRJwhplhnrIOvz8ct8w_7KLEb7QNySsbzBFZmsirAJw1DGWWVT3xnuFNVCQ75Lo8OJHqCmuKoq0kZBsv12Bhy32BHpMxywdQ0s_JAA6giV9iLbDreo0p7nqtOyBHpIZDp8nklvWASB8FP-lK53hzlOmOrGNEXbd_YvkKAB02Ayg21bRCauKX3AWISylVH-UQQIDL7iADGe9D5Zu_PBQ1eZb96iBYYughfklsr0VG9_l3Yq5vxmgyGKT5Yj2VEzhPsbyYCSTYkqa0IGAw68LZp1zTLnd7uwpDUt1aHbNQZ69vcZcoOiyZ_FmklVef_If-urEJ4b3BrM2uFDinwAmdCoRrjtuR295oxnem_dMdVPdjXllaeGdQ_ekAneB2LFGZ5_2uPbxoYhpYlKvQdjohSKSMlSZRu-ym7yECPOUTHwCfagsLpG6T2X22wQEpJ7UNn3NdvPI9RMssPThv_JtwUCNW_1S1s3UOKhdEb8qtIF_G3d_PXfMUbhR0W6n0D3xSV_1y7NBMO1jELEII4UnlpzKnJ6LCZskoE2hY1zAuJuZ31HiWjOPD5C1M6jzlgj3fG1nm1zYOek8QxAUumh6kr-eUj-1odh4pWKXM_D0TOlaigeTbtZCC9xaB18c2_3JcBV1DOWpMzWWBqDcjSE7cmQDPACTw0SwRZEsfOThXdPC6dgMXDsZTcIDpvi38SMUa6Pwaa5PSIEmU8cTO5rudbM8oVNHnqrg../download\nResolving public.boxcloud.com (public.boxcloud.com)... 107.152.27.200\nConnecting to public.boxcloud.com (public.boxcloud.com)|107.152.27.200|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 2891 (2.8K) [text/csv]\nSaving to: \u2018geo_data.csv\u2019\n\n100%[======================================>] 2,891       --.-K/s   in 0s      \n\n2018-12-31 19:19:56 (419 MB/s) - \u2018geo_data.csv\u2019 saved [2891/2891]\n\n"
                }, 
                {
                    "execution_count": 94, 
                    "metadata": {}, 
                    "data": {
                        "text/html": "<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Postal Code</th>\n      <th>Latitude</th>\n      <th>Longitude</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>M1B</td>\n      <td>43.806686</td>\n      <td>-79.194353</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>M1C</td>\n      <td>43.784535</td>\n      <td>-79.160497</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>M1E</td>\n      <td>43.763573</td>\n      <td>-79.188711</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>M1G</td>\n      <td>43.770992</td>\n      <td>-79.216917</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>M1H</td>\n      <td>43.773136</td>\n      <td>-79.239476</td>\n    </tr>\n  </tbody>\n</table>\n</div>", 
                        "text/plain": "  Postal Code   Latitude  Longitude\n0         M1B  43.806686 -79.194353\n1         M1C  43.784535 -79.160497\n2         M1E  43.763573 -79.188711\n3         M1G  43.770992 -79.216917\n4         M1H  43.773136 -79.239476"
                    }, 
                    "output_type": "execute_result"
                }
            ], 
            "source": "!wget -O geo_data.csv http://cocl.us/Geospatial_data\ngeo_data_df = pd.read_csv('geo_data.csv')\ngeo_data_df.head()"
        }, 
        {
            "source": "**Let's join the 2 dataframes**", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "execution_count": 95, 
            "cell_type": "code", 
            "metadata": {}, 
            "outputs": [
                {
                    "execution_count": 95, 
                    "metadata": {}, 
                    "data": {
                        "text/html": "<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>PostalCode</th>\n      <th>Borough</th>\n      <th>Neighborhood</th>\n      <th>Latitude</th>\n      <th>Longitude</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>M1B</td>\n      <td>Scarborough</td>\n      <td>Rouge, Malvern</td>\n      <td>43.806686</td>\n      <td>-79.194353</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>M1C</td>\n      <td>Scarborough</td>\n      <td>Highland Creek, Rouge Hill, Port Union</td>\n      <td>43.784535</td>\n      <td>-79.160497</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>M1E</td>\n      <td>Scarborough</td>\n      <td>Guildwood, Morningside, West Hill</td>\n      <td>43.763573</td>\n      <td>-79.188711</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>M1G</td>\n      <td>Scarborough</td>\n      <td>Woburn</td>\n      <td>43.770992</td>\n      <td>-79.216917</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>M1H</td>\n      <td>Scarborough</td>\n      <td>Cedarbrae</td>\n      <td>43.773136</td>\n      <td>-79.239476</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>M1J</td>\n      <td>Scarborough</td>\n      <td>Scarborough Village</td>\n      <td>43.744734</td>\n      <td>-79.239476</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>M1K</td>\n      <td>Scarborough</td>\n      <td>East Birchmount Park, Ionview, Kennedy Park</td>\n      <td>43.727929</td>\n      <td>-79.262029</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>M1L</td>\n      <td>Scarborough</td>\n      <td>Clairlea, Golden Mile, Oakridge</td>\n      <td>43.711112</td>\n      <td>-79.284577</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>M1M</td>\n      <td>Scarborough</td>\n      <td>Cliffcrest, Cliffside, Scarborough Village West</td>\n      <td>43.716316</td>\n      <td>-79.239476</td>\n    </tr>\n    <tr>\n      <th>9</th>\n      <td>M1N</td>\n      <td>Scarborough</td>\n      <td>Birch Cliff, Cliffside West</td>\n      <td>43.692657</td>\n      <td>-79.264848</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>M1P</td>\n      <td>Scarborough</td>\n      <td>Dorset Park, Scarborough Town Centre, Wexford ...</td>\n      <td>43.757410</td>\n      <td>-79.273304</td>\n    </tr>\n    <tr>\n      <th>11</th>\n      <td>M1R</td>\n      <td>Scarborough</td>\n      <td>Maryvale, Wexford</td>\n      <td>43.750072</td>\n      <td>-79.295849</td>\n    </tr>\n    <tr>\n      <th>12</th>\n      <td>M1S</td>\n      <td>Scarborough</td>\n      <td>Agincourt</td>\n      <td>43.794200</td>\n      <td>-79.262029</td>\n    </tr>\n    <tr>\n      <th>13</th>\n      <td>M1T</td>\n      <td>Scarborough</td>\n      <td>Clarks Corners, Sullivan, Tam O'Shanter</td>\n      <td>43.781638</td>\n      <td>-79.304302</td>\n    </tr>\n    <tr>\n      <th>14</th>\n      <td>M1V</td>\n      <td>Scarborough</td>\n      <td>Agincourt North, L'Amoreaux East, Milliken, St...</td>\n      <td>43.815252</td>\n      <td>-79.284577</td>\n    </tr>\n    <tr>\n      <th>15</th>\n      <td>M1W</td>\n      <td>Scarborough</td>\n      <td>L'Amoreaux West, Steeles West</td>\n      <td>43.799525</td>\n      <td>-79.318389</td>\n    </tr>\n    <tr>\n      <th>16</th>\n      <td>M1X</td>\n      <td>Scarborough</td>\n      <td>Upper Rouge</td>\n      <td>43.836125</td>\n      <td>-79.205636</td>\n    </tr>\n    <tr>\n      <th>17</th>\n      <td>M2H</td>\n      <td>North York</td>\n      <td>Hillcrest Village</td>\n      <td>43.803762</td>\n      <td>-79.363452</td>\n    </tr>\n    <tr>\n      <th>18</th>\n      <td>M2J</td>\n      <td>North York</td>\n      <td>Fairview, Henry Farm, Oriole</td>\n      <td>43.778517</td>\n      <td>-79.346556</td>\n    </tr>\n    <tr>\n      <th>19</th>\n      <td>M2K</td>\n      <td>North York</td>\n      <td>Bayview Village</td>\n      <td>43.786947</td>\n      <td>-79.385975</td>\n    </tr>\n    <tr>\n      <th>20</th>\n      <td>M2L</td>\n      <td>North York</td>\n      <td>Silver Hills, York Mills</td>\n      <td>43.757490</td>\n      <td>-79.374714</td>\n    </tr>\n    <tr>\n      <th>21</th>\n      <td>M2M</td>\n      <td>North York</td>\n      <td>Newtonbrook, Willowdale</td>\n      <td>43.789053</td>\n      <td>-79.408493</td>\n    </tr>\n    <tr>\n      <th>22</th>\n      <td>M2N</td>\n      <td>North York</td>\n      <td>Willowdale South</td>\n      <td>43.770120</td>\n      <td>-79.408493</td>\n    </tr>\n    <tr>\n      <th>23</th>\n      <td>M2P</td>\n      <td>North York</td>\n      <td>York Mills West</td>\n      <td>43.752758</td>\n      <td>-79.400049</td>\n    </tr>\n    <tr>\n      <th>24</th>\n      <td>M2R</td>\n      <td>North York</td>\n      <td>Willowdale West</td>\n      <td>43.782736</td>\n      <td>-79.442259</td>\n    </tr>\n    <tr>\n      <th>25</th>\n      <td>M3A</td>\n      <td>North York</td>\n      <td>Parkwoods</td>\n      <td>43.753259</td>\n      <td>-79.329656</td>\n    </tr>\n    <tr>\n      <th>26</th>\n      <td>M3B</td>\n      <td>North York</td>\n      <td>Don Mills North</td>\n      <td>43.745906</td>\n      <td>-79.352188</td>\n    </tr>\n    <tr>\n      <th>27</th>\n      <td>M3C</td>\n      <td>North York</td>\n      <td>Flemingdon Park, Don Mills South</td>\n      <td>43.725900</td>\n      <td>-79.340923</td>\n    </tr>\n    <tr>\n      <th>28</th>\n      <td>M3H</td>\n      <td>North York</td>\n      <td>Bathurst Manor, Downsview North, Wilson Heights</td>\n      <td>43.754328</td>\n      <td>-79.442259</td>\n    </tr>\n    <tr>\n      <th>29</th>\n      <td>M3J</td>\n      <td>North York</td>\n      <td>Northwood Park, York University</td>\n      <td>43.767980</td>\n      <td>-79.487262</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>73</th>\n      <td>M6C</td>\n      <td>York</td>\n      <td>Humewood-Cedarvale</td>\n      <td>43.693781</td>\n      <td>-79.428191</td>\n    </tr>\n    <tr>\n      <th>74</th>\n      <td>M6E</td>\n      <td>York</td>\n      <td>Caledonia-Fairbanks</td>\n      <td>43.689026</td>\n      <td>-79.453512</td>\n    </tr>\n    <tr>\n      <th>75</th>\n      <td>M6G</td>\n      <td>Downtown Toronto</td>\n      <td>Christie</td>\n      <td>43.669542</td>\n      <td>-79.422564</td>\n    </tr>\n    <tr>\n      <th>76</th>\n      <td>M6H</td>\n      <td>West Toronto</td>\n      <td>Dovercourt Village, Dufferin</td>\n      <td>43.669005</td>\n      <td>-79.442259</td>\n    </tr>\n    <tr>\n      <th>77</th>\n      <td>M6J</td>\n      <td>West Toronto</td>\n      <td>Little Portugal, Trinity</td>\n      <td>43.647927</td>\n      <td>-79.419750</td>\n    </tr>\n    <tr>\n      <th>78</th>\n      <td>M6K</td>\n      <td>West Toronto</td>\n      <td>Brockton, Exhibition Place, Parkdale Village</td>\n      <td>43.636847</td>\n      <td>-79.428191</td>\n    </tr>\n    <tr>\n      <th>79</th>\n      <td>M6L</td>\n      <td>North York</td>\n      <td>Maple Leaf Park, North Park, Upwood Park</td>\n      <td>43.713756</td>\n      <td>-79.490074</td>\n    </tr>\n    <tr>\n      <th>80</th>\n      <td>M6M</td>\n      <td>York</td>\n      <td>Del Ray, Keelesdale, Mount Dennis, Silverthorn</td>\n      <td>43.691116</td>\n      <td>-79.476013</td>\n    </tr>\n    <tr>\n      <th>81</th>\n      <td>M6N</td>\n      <td>York</td>\n      <td>The Junction North, Runnymede</td>\n      <td>43.673185</td>\n      <td>-79.487262</td>\n    </tr>\n    <tr>\n      <th>82</th>\n      <td>M6P</td>\n      <td>West Toronto</td>\n      <td>High Park, The Junction South</td>\n      <td>43.661608</td>\n      <td>-79.464763</td>\n    </tr>\n    <tr>\n      <th>83</th>\n      <td>M6R</td>\n      <td>West Toronto</td>\n      <td>Parkdale, Roncesvalles</td>\n      <td>43.648960</td>\n      <td>-79.456325</td>\n    </tr>\n    <tr>\n      <th>84</th>\n      <td>M6S</td>\n      <td>West Toronto</td>\n      <td>Runnymede, Swansea</td>\n      <td>43.651571</td>\n      <td>-79.484450</td>\n    </tr>\n    <tr>\n      <th>85</th>\n      <td>M7A</td>\n      <td>Queen's Park</td>\n      <td>Queen's Park</td>\n      <td>43.662301</td>\n      <td>-79.389494</td>\n    </tr>\n    <tr>\n      <th>86</th>\n      <td>M7R</td>\n      <td>Mississauga</td>\n      <td>Canada Post Gateway Processing Centre</td>\n      <td>43.636966</td>\n      <td>-79.615819</td>\n    </tr>\n    <tr>\n      <th>87</th>\n      <td>M7Y</td>\n      <td>East Toronto</td>\n      <td>Business reply mail Processing Centre969 Eastern</td>\n      <td>43.662744</td>\n      <td>-79.321558</td>\n    </tr>\n    <tr>\n      <th>88</th>\n      <td>M8V</td>\n      <td>Etobicoke</td>\n      <td>Humber Bay Shores, Mimico South, New Toronto</td>\n      <td>43.605647</td>\n      <td>-79.501321</td>\n    </tr>\n    <tr>\n      <th>89</th>\n      <td>M8W</td>\n      <td>Etobicoke</td>\n      <td>Alderwood, Long Branch</td>\n      <td>43.602414</td>\n      <td>-79.543484</td>\n    </tr>\n    <tr>\n      <th>90</th>\n      <td>M8X</td>\n      <td>Etobicoke</td>\n      <td>The Kingsway, Montgomery Road, Old Mill North</td>\n      <td>43.653654</td>\n      <td>-79.506944</td>\n    </tr>\n    <tr>\n      <th>91</th>\n      <td>M8Y</td>\n      <td>Etobicoke</td>\n      <td>Humber Bay, King's Mill Park, Kingsway Park So...</td>\n      <td>43.636258</td>\n      <td>-79.498509</td>\n    </tr>\n    <tr>\n      <th>92</th>\n      <td>M8Z</td>\n      <td>Etobicoke</td>\n      <td>Kingsway Park South West, Mimico NW, The Queen...</td>\n      <td>43.628841</td>\n      <td>-79.520999</td>\n    </tr>\n    <tr>\n      <th>93</th>\n      <td>M9A</td>\n      <td>Etobicoke</td>\n      <td>Islington Avenue</td>\n      <td>43.667856</td>\n      <td>-79.532242</td>\n    </tr>\n    <tr>\n      <th>94</th>\n      <td>M9B</td>\n      <td>Etobicoke</td>\n      <td>Cloverdale, Islington, Martin Grove, Princess ...</td>\n      <td>43.650943</td>\n      <td>-79.554724</td>\n    </tr>\n    <tr>\n      <th>95</th>\n      <td>M9C</td>\n      <td>Etobicoke</td>\n      <td>Bloordale Gardens, Eringate, Markland Wood, Ol...</td>\n      <td>43.643515</td>\n      <td>-79.577201</td>\n    </tr>\n    <tr>\n      <th>96</th>\n      <td>M9L</td>\n      <td>North York</td>\n      <td>Humber Summit</td>\n      <td>43.756303</td>\n      <td>-79.565963</td>\n    </tr>\n    <tr>\n      <th>97</th>\n      <td>M9M</td>\n      <td>North York</td>\n      <td>Emery, Humberlea</td>\n      <td>43.724766</td>\n      <td>-79.532242</td>\n    </tr>\n    <tr>\n      <th>98</th>\n      <td>M9N</td>\n      <td>York</td>\n      <td>Weston</td>\n      <td>43.706876</td>\n      <td>-79.518188</td>\n    </tr>\n    <tr>\n      <th>99</th>\n      <td>M9P</td>\n      <td>Etobicoke</td>\n      <td>Westmount</td>\n      <td>43.696319</td>\n      <td>-79.532242</td>\n    </tr>\n    <tr>\n      <th>100</th>\n      <td>M9R</td>\n      <td>Etobicoke</td>\n      <td>Kingsview Village, Martin Grove Gardens, Richv...</td>\n      <td>43.688905</td>\n      <td>-79.554724</td>\n    </tr>\n    <tr>\n      <th>101</th>\n      <td>M9V</td>\n      <td>Etobicoke</td>\n      <td>Albion Gardens, Beaumond Heights, Humbergate, ...</td>\n      <td>43.739416</td>\n      <td>-79.588437</td>\n    </tr>\n    <tr>\n      <th>102</th>\n      <td>M9W</td>\n      <td>Etobicoke</td>\n      <td>Northwest</td>\n      <td>43.706748</td>\n      <td>-79.594054</td>\n    </tr>\n  </tbody>\n</table>\n<p>103 rows \u00d7 5 columns</p>\n</div>", 
                        "text/plain": "    PostalCode           Borough  \\\n0          M1B       Scarborough   \n1          M1C       Scarborough   \n2          M1E       Scarborough   \n3          M1G       Scarborough   \n4          M1H       Scarborough   \n5          M1J       Scarborough   \n6          M1K       Scarborough   \n7          M1L       Scarborough   \n8          M1M       Scarborough   \n9          M1N       Scarborough   \n10         M1P       Scarborough   \n11         M1R       Scarborough   \n12         M1S       Scarborough   \n13         M1T       Scarborough   \n14         M1V       Scarborough   \n15         M1W       Scarborough   \n16         M1X       Scarborough   \n17         M2H        North York   \n18         M2J        North York   \n19         M2K        North York   \n20         M2L        North York   \n21         M2M        North York   \n22         M2N        North York   \n23         M2P        North York   \n24         M2R        North York   \n25         M3A        North York   \n26         M3B        North York   \n27         M3C        North York   \n28         M3H        North York   \n29         M3J        North York   \n..         ...               ...   \n73         M6C              York   \n74         M6E              York   \n75         M6G  Downtown Toronto   \n76         M6H      West Toronto   \n77         M6J      West Toronto   \n78         M6K      West Toronto   \n79         M6L        North York   \n80         M6M              York   \n81         M6N              York   \n82         M6P      West Toronto   \n83         M6R      West Toronto   \n84         M6S      West Toronto   \n85         M7A      Queen's Park   \n86         M7R       Mississauga   \n87         M7Y      East Toronto   \n88         M8V         Etobicoke   \n89         M8W         Etobicoke   \n90         M8X         Etobicoke   \n91         M8Y         Etobicoke   \n92         M8Z         Etobicoke   \n93         M9A         Etobicoke   \n94         M9B         Etobicoke   \n95         M9C         Etobicoke   \n96         M9L        North York   \n97         M9M        North York   \n98         M9N              York   \n99         M9P         Etobicoke   \n100        M9R         Etobicoke   \n101        M9V         Etobicoke   \n102        M9W         Etobicoke   \n\n                                          Neighborhood   Latitude  Longitude  \n0                                       Rouge, Malvern  43.806686 -79.194353  \n1               Highland Creek, Rouge Hill, Port Union  43.784535 -79.160497  \n2                    Guildwood, Morningside, West Hill  43.763573 -79.188711  \n3                                               Woburn  43.770992 -79.216917  \n4                                            Cedarbrae  43.773136 -79.239476  \n5                                  Scarborough Village  43.744734 -79.239476  \n6          East Birchmount Park, Ionview, Kennedy Park  43.727929 -79.262029  \n7                      Clairlea, Golden Mile, Oakridge  43.711112 -79.284577  \n8      Cliffcrest, Cliffside, Scarborough Village West  43.716316 -79.239476  \n9                          Birch Cliff, Cliffside West  43.692657 -79.264848  \n10   Dorset Park, Scarborough Town Centre, Wexford ...  43.757410 -79.273304  \n11                                   Maryvale, Wexford  43.750072 -79.295849  \n12                                           Agincourt  43.794200 -79.262029  \n13             Clarks Corners, Sullivan, Tam O'Shanter  43.781638 -79.304302  \n14   Agincourt North, L'Amoreaux East, Milliken, St...  43.815252 -79.284577  \n15                       L'Amoreaux West, Steeles West  43.799525 -79.318389  \n16                                         Upper Rouge  43.836125 -79.205636  \n17                                   Hillcrest Village  43.803762 -79.363452  \n18                        Fairview, Henry Farm, Oriole  43.778517 -79.346556  \n19                                     Bayview Village  43.786947 -79.385975  \n20                            Silver Hills, York Mills  43.757490 -79.374714  \n21                             Newtonbrook, Willowdale  43.789053 -79.408493  \n22                                    Willowdale South  43.770120 -79.408493  \n23                                     York Mills West  43.752758 -79.400049  \n24                                     Willowdale West  43.782736 -79.442259  \n25                                           Parkwoods  43.753259 -79.329656  \n26                                     Don Mills North  43.745906 -79.352188  \n27                    Flemingdon Park, Don Mills South  43.725900 -79.340923  \n28     Bathurst Manor, Downsview North, Wilson Heights  43.754328 -79.442259  \n29                     Northwood Park, York University  43.767980 -79.487262  \n..                                                 ...        ...        ...  \n73                                  Humewood-Cedarvale  43.693781 -79.428191  \n74                                 Caledonia-Fairbanks  43.689026 -79.453512  \n75                                            Christie  43.669542 -79.422564  \n76                        Dovercourt Village, Dufferin  43.669005 -79.442259  \n77                            Little Portugal, Trinity  43.647927 -79.419750  \n78        Brockton, Exhibition Place, Parkdale Village  43.636847 -79.428191  \n79            Maple Leaf Park, North Park, Upwood Park  43.713756 -79.490074  \n80      Del Ray, Keelesdale, Mount Dennis, Silverthorn  43.691116 -79.476013  \n81                       The Junction North, Runnymede  43.673185 -79.487262  \n82                       High Park, The Junction South  43.661608 -79.464763  \n83                              Parkdale, Roncesvalles  43.648960 -79.456325  \n84                                  Runnymede, Swansea  43.651571 -79.484450  \n85                                        Queen's Park  43.662301 -79.389494  \n86               Canada Post Gateway Processing Centre  43.636966 -79.615819  \n87    Business reply mail Processing Centre969 Eastern  43.662744 -79.321558  \n88        Humber Bay Shores, Mimico South, New Toronto  43.605647 -79.501321  \n89                              Alderwood, Long Branch  43.602414 -79.543484  \n90       The Kingsway, Montgomery Road, Old Mill North  43.653654 -79.506944  \n91   Humber Bay, King's Mill Park, Kingsway Park So...  43.636258 -79.498509  \n92   Kingsway Park South West, Mimico NW, The Queen...  43.628841 -79.520999  \n93                                    Islington Avenue  43.667856 -79.532242  \n94   Cloverdale, Islington, Martin Grove, Princess ...  43.650943 -79.554724  \n95   Bloordale Gardens, Eringate, Markland Wood, Ol...  43.643515 -79.577201  \n96                                       Humber Summit  43.756303 -79.565963  \n97                                    Emery, Humberlea  43.724766 -79.532242  \n98                                              Weston  43.706876 -79.518188  \n99                                           Westmount  43.696319 -79.532242  \n100  Kingsview Village, Martin Grove Gardens, Richv...  43.688905 -79.554724  \n101  Albion Gardens, Beaumond Heights, Humbergate, ...  43.739416 -79.588437  \n102                                          Northwest  43.706748 -79.594054  \n\n[103 rows x 5 columns]"
                    }, 
                    "output_type": "execute_result"
                }
            ], 
            "source": "result_df = pd.concat([df, geo_data_df], axis=1, join='inner')\nresult_df.drop('Postal Code', axis=1, inplace=True)\nresult_df"
        }, 
        {
            "source": "**To simplify our analysis we'll only use the neighborhoods using Toronto's core boroughs**", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "execution_count": 82, 
            "cell_type": "code", 
            "metadata": {}, 
            "outputs": [
                {
                    "execution_count": 82, 
                    "metadata": {}, 
                    "data": {
                        "text/html": "<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>PostalCode</th>\n      <th>Borough</th>\n      <th>Neighborhood</th>\n      <th>Latitude</th>\n      <th>Longitude</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>M4E</td>\n      <td>East Toronto</td>\n      <td>The Beaches</td>\n      <td>43.676357</td>\n      <td>-79.293031</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>M4K</td>\n      <td>East Toronto</td>\n      <td>The Danforth West, Riverdale</td>\n      <td>43.679557</td>\n      <td>-79.352188</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>M4L</td>\n      <td>East Toronto</td>\n      <td>The Beaches West, India Bazaar</td>\n      <td>43.668999</td>\n      <td>-79.315572</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>M4M</td>\n      <td>East Toronto</td>\n      <td>Studio District</td>\n      <td>43.659526</td>\n      <td>-79.340923</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>M4N</td>\n      <td>Central Toronto</td>\n      <td>Lawrence Park</td>\n      <td>43.728020</td>\n      <td>-79.388790</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>M4P</td>\n      <td>Central Toronto</td>\n      <td>Davisville North</td>\n      <td>43.712751</td>\n      <td>-79.390197</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>M4R</td>\n      <td>Central Toronto</td>\n      <td>North Toronto West</td>\n      <td>43.715383</td>\n      <td>-79.405678</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>M4S</td>\n      <td>Central Toronto</td>\n      <td>Davisville</td>\n      <td>43.704324</td>\n      <td>-79.388790</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>M4T</td>\n      <td>Central Toronto</td>\n      <td>Moore Park, Summerhill East</td>\n      <td>43.689574</td>\n      <td>-79.383160</td>\n    </tr>\n    <tr>\n      <th>9</th>\n      <td>M4V</td>\n      <td>Central Toronto</td>\n      <td>Deer Park, Forest Hill SE, Rathnelly, South Hi...</td>\n      <td>43.686412</td>\n      <td>-79.400049</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>M4W</td>\n      <td>Downtown Toronto</td>\n      <td>Rosedale</td>\n      <td>43.679563</td>\n      <td>-79.377529</td>\n    </tr>\n    <tr>\n      <th>11</th>\n      <td>M4X</td>\n      <td>Downtown Toronto</td>\n      <td>Cabbagetown, St. James Town</td>\n      <td>43.667967</td>\n      <td>-79.367675</td>\n    </tr>\n    <tr>\n      <th>12</th>\n      <td>M4Y</td>\n      <td>Downtown Toronto</td>\n      <td>Church and Wellesley</td>\n      <td>43.665860</td>\n      <td>-79.383160</td>\n    </tr>\n    <tr>\n      <th>13</th>\n      <td>M5A</td>\n      <td>Downtown Toronto</td>\n      <td>Harbourfront, Regent Park</td>\n      <td>43.654260</td>\n      <td>-79.360636</td>\n    </tr>\n    <tr>\n      <th>14</th>\n      <td>M5B</td>\n      <td>Downtown Toronto</td>\n      <td>Ryerson, Garden District</td>\n      <td>43.657162</td>\n      <td>-79.378937</td>\n    </tr>\n    <tr>\n      <th>15</th>\n      <td>M5C</td>\n      <td>Downtown Toronto</td>\n      <td>St. James Town</td>\n      <td>43.651494</td>\n      <td>-79.375418</td>\n    </tr>\n    <tr>\n      <th>16</th>\n      <td>M5E</td>\n      <td>Downtown Toronto</td>\n      <td>Berczy Park</td>\n      <td>43.644771</td>\n      <td>-79.373306</td>\n    </tr>\n    <tr>\n      <th>17</th>\n      <td>M5G</td>\n      <td>Downtown Toronto</td>\n      <td>Central Bay Street</td>\n      <td>43.657952</td>\n      <td>-79.387383</td>\n    </tr>\n    <tr>\n      <th>18</th>\n      <td>M5H</td>\n      <td>Downtown Toronto</td>\n      <td>Adelaide, King, Richmond</td>\n      <td>43.650571</td>\n      <td>-79.384568</td>\n    </tr>\n    <tr>\n      <th>19</th>\n      <td>M5J</td>\n      <td>Downtown Toronto</td>\n      <td>Harbourfront East, Toronto Islands, Union Station</td>\n      <td>43.640816</td>\n      <td>-79.381752</td>\n    </tr>\n    <tr>\n      <th>20</th>\n      <td>M5K</td>\n      <td>Downtown Toronto</td>\n      <td>Design Exchange, Toronto Dominion Centre</td>\n      <td>43.647177</td>\n      <td>-79.381576</td>\n    </tr>\n    <tr>\n      <th>21</th>\n      <td>M5L</td>\n      <td>Downtown Toronto</td>\n      <td>Commerce Court, Victoria Hotel</td>\n      <td>43.648198</td>\n      <td>-79.379817</td>\n    </tr>\n    <tr>\n      <th>22</th>\n      <td>M5N</td>\n      <td>Central Toronto</td>\n      <td>Roselawn</td>\n      <td>43.711695</td>\n      <td>-79.416936</td>\n    </tr>\n    <tr>\n      <th>23</th>\n      <td>M5P</td>\n      <td>Central Toronto</td>\n      <td>Forest Hill North, Forest Hill West</td>\n      <td>43.696948</td>\n      <td>-79.411307</td>\n    </tr>\n    <tr>\n      <th>24</th>\n      <td>M5R</td>\n      <td>Central Toronto</td>\n      <td>The Annex, North Midtown, Yorkville</td>\n      <td>43.672710</td>\n      <td>-79.405678</td>\n    </tr>\n    <tr>\n      <th>25</th>\n      <td>M5S</td>\n      <td>Downtown Toronto</td>\n      <td>Harbord, University of Toronto</td>\n      <td>43.662696</td>\n      <td>-79.400049</td>\n    </tr>\n    <tr>\n      <th>26</th>\n      <td>M5T</td>\n      <td>Downtown Toronto</td>\n      <td>Chinatown, Grange Park, Kensington Market</td>\n      <td>43.653206</td>\n      <td>-79.400049</td>\n    </tr>\n    <tr>\n      <th>27</th>\n      <td>M5V</td>\n      <td>Downtown Toronto</td>\n      <td>CN Tower, Bathurst Quay, Island airport, Harbo...</td>\n      <td>43.628947</td>\n      <td>-79.394420</td>\n    </tr>\n    <tr>\n      <th>28</th>\n      <td>M5W</td>\n      <td>Downtown Toronto</td>\n      <td>Stn A PO Boxes 25 The Esplanade</td>\n      <td>43.646435</td>\n      <td>-79.374846</td>\n    </tr>\n    <tr>\n      <th>29</th>\n      <td>M5X</td>\n      <td>Downtown Toronto</td>\n      <td>First Canadian Place, Underground city</td>\n      <td>43.648429</td>\n      <td>-79.382280</td>\n    </tr>\n    <tr>\n      <th>30</th>\n      <td>M6G</td>\n      <td>Downtown Toronto</td>\n      <td>Christie</td>\n      <td>43.669542</td>\n      <td>-79.422564</td>\n    </tr>\n    <tr>\n      <th>31</th>\n      <td>M6H</td>\n      <td>West Toronto</td>\n      <td>Dovercourt Village, Dufferin</td>\n      <td>43.669005</td>\n      <td>-79.442259</td>\n    </tr>\n    <tr>\n      <th>32</th>\n      <td>M6J</td>\n      <td>West Toronto</td>\n      <td>Little Portugal, Trinity</td>\n      <td>43.647927</td>\n      <td>-79.419750</td>\n    </tr>\n    <tr>\n      <th>33</th>\n      <td>M6K</td>\n      <td>West Toronto</td>\n      <td>Brockton, Exhibition Place, Parkdale Village</td>\n      <td>43.636847</td>\n      <td>-79.428191</td>\n    </tr>\n    <tr>\n      <th>34</th>\n      <td>M6P</td>\n      <td>West Toronto</td>\n      <td>High Park, The Junction South</td>\n      <td>43.661608</td>\n      <td>-79.464763</td>\n    </tr>\n    <tr>\n      <th>35</th>\n      <td>M6R</td>\n      <td>West Toronto</td>\n      <td>Parkdale, Roncesvalles</td>\n      <td>43.648960</td>\n      <td>-79.456325</td>\n    </tr>\n    <tr>\n      <th>36</th>\n      <td>M6S</td>\n      <td>West Toronto</td>\n      <td>Runnymede, Swansea</td>\n      <td>43.651571</td>\n      <td>-79.484450</td>\n    </tr>\n    <tr>\n      <th>37</th>\n      <td>M7Y</td>\n      <td>East Toronto</td>\n      <td>Business reply mail Processing Centre969 Eastern</td>\n      <td>43.662744</td>\n      <td>-79.321558</td>\n    </tr>\n  </tbody>\n</table>\n</div>", 
                        "text/plain": "   PostalCode           Borough  \\\n0         M4E      East Toronto   \n1         M4K      East Toronto   \n2         M4L      East Toronto   \n3         M4M      East Toronto   \n4         M4N   Central Toronto   \n5         M4P   Central Toronto   \n6         M4R   Central Toronto   \n7         M4S   Central Toronto   \n8         M4T   Central Toronto   \n9         M4V   Central Toronto   \n10        M4W  Downtown Toronto   \n11        M4X  Downtown Toronto   \n12        M4Y  Downtown Toronto   \n13        M5A  Downtown Toronto   \n14        M5B  Downtown Toronto   \n15        M5C  Downtown Toronto   \n16        M5E  Downtown Toronto   \n17        M5G  Downtown Toronto   \n18        M5H  Downtown Toronto   \n19        M5J  Downtown Toronto   \n20        M5K  Downtown Toronto   \n21        M5L  Downtown Toronto   \n22        M5N   Central Toronto   \n23        M5P   Central Toronto   \n24        M5R   Central Toronto   \n25        M5S  Downtown Toronto   \n26        M5T  Downtown Toronto   \n27        M5V  Downtown Toronto   \n28        M5W  Downtown Toronto   \n29        M5X  Downtown Toronto   \n30        M6G  Downtown Toronto   \n31        M6H      West Toronto   \n32        M6J      West Toronto   \n33        M6K      West Toronto   \n34        M6P      West Toronto   \n35        M6R      West Toronto   \n36        M6S      West Toronto   \n37        M7Y      East Toronto   \n\n                                         Neighborhood   Latitude  Longitude  \n0                                         The Beaches  43.676357 -79.293031  \n1                        The Danforth West, Riverdale  43.679557 -79.352188  \n2                      The Beaches West, India Bazaar  43.668999 -79.315572  \n3                                     Studio District  43.659526 -79.340923  \n4                                       Lawrence Park  43.728020 -79.388790  \n5                                    Davisville North  43.712751 -79.390197  \n6                                  North Toronto West  43.715383 -79.405678  \n7                                          Davisville  43.704324 -79.388790  \n8                         Moore Park, Summerhill East  43.689574 -79.383160  \n9   Deer Park, Forest Hill SE, Rathnelly, South Hi...  43.686412 -79.400049  \n10                                           Rosedale  43.679563 -79.377529  \n11                        Cabbagetown, St. James Town  43.667967 -79.367675  \n12                               Church and Wellesley  43.665860 -79.383160  \n13                          Harbourfront, Regent Park  43.654260 -79.360636  \n14                           Ryerson, Garden District  43.657162 -79.378937  \n15                                     St. James Town  43.651494 -79.375418  \n16                                        Berczy Park  43.644771 -79.373306  \n17                                 Central Bay Street  43.657952 -79.387383  \n18                           Adelaide, King, Richmond  43.650571 -79.384568  \n19  Harbourfront East, Toronto Islands, Union Station  43.640816 -79.381752  \n20           Design Exchange, Toronto Dominion Centre  43.647177 -79.381576  \n21                     Commerce Court, Victoria Hotel  43.648198 -79.379817  \n22                                           Roselawn  43.711695 -79.416936  \n23                Forest Hill North, Forest Hill West  43.696948 -79.411307  \n24                The Annex, North Midtown, Yorkville  43.672710 -79.405678  \n25                     Harbord, University of Toronto  43.662696 -79.400049  \n26          Chinatown, Grange Park, Kensington Market  43.653206 -79.400049  \n27  CN Tower, Bathurst Quay, Island airport, Harbo...  43.628947 -79.394420  \n28                    Stn A PO Boxes 25 The Esplanade  43.646435 -79.374846  \n29             First Canadian Place, Underground city  43.648429 -79.382280  \n30                                           Christie  43.669542 -79.422564  \n31                       Dovercourt Village, Dufferin  43.669005 -79.442259  \n32                           Little Portugal, Trinity  43.647927 -79.419750  \n33       Brockton, Exhibition Place, Parkdale Village  43.636847 -79.428191  \n34                      High Park, The Junction South  43.661608 -79.464763  \n35                             Parkdale, Roncesvalles  43.648960 -79.456325  \n36                                 Runnymede, Swansea  43.651571 -79.484450  \n37   Business reply mail Processing Centre969 Eastern  43.662744 -79.321558  "
                    }, 
                    "output_type": "execute_result"
                }
            ], 
            "source": "toronto_data = result_df[result_df['Borough'].str.contains('Toronto')]\ntoronto_data.reset_index(drop=True, inplace=True)\ntoronto_data"
        }, 
        {
            "execution_count": 96, 
            "cell_type": "code", 
            "metadata": {}, 
            "outputs": [
                {
                    "output_type": "stream", 
                    "name": "stdout", 
                    "text": "The dataframe has 4 boroughs and 38 neighborhoods.\n"
                }
            ], 
            "source": "print('The dataframe has {} boroughs and {} neighborhoods.'.format(\n        len(toronto_data['Borough'].unique()),\n        toronto_data.shape[0]\n    )\n)"
        }, 
        {
            "source": "**Let's get Toronto coordinates**", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "execution_count": 97, 
            "cell_type": "code", 
            "metadata": {}, 
            "outputs": [
                {
                    "output_type": "stream", 
                    "name": "stderr", 
                    "text": "/opt/conda/envs/DSX-Python35/lib/python3.5/site-packages/ipykernel/__main__.py:3: DeprecationWarning: Using Nominatim with the default \"geopy/1.18.1\" `user_agent` is strongly discouraged, as it violates Nominatim's ToS https://operations.osmfoundation.org/policies/nominatim/ and may possibly cause 403 and 429 HTTP errors. Please specify a custom `user_agent` with `Nominatim(user_agent=\"my-application\")` or by overriding the default `user_agent`: `geopy.geocoders.options.default_user_agent = \"my-application\"`. In geopy 2.0 this will become an exception.\n  app.launch_new_instance()\n"
                }, 
                {
                    "output_type": "stream", 
                    "name": "stdout", 
                    "text": "The geograpical coordinates of Toronto are 43.653963, -79.387207.\n"
                }
            ], 
            "source": "address = 'Toronto, Ontario'\n\ngeolocator = Nominatim()\nlocation = geolocator.geocode(address)\nlatitude = location.latitude\nlongitude = location.longitude\nprint('The geograpical coordinates of Toronto are {}, {}.'.format(latitude, longitude))"
        }, 
        {
            "source": "**...and now we  visualize**", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "execution_count": 98, 
            "cell_type": "code", 
            "metadata": {}, 
            "outputs": [
                {
                    "execution_count": 98, 
                    "metadata": {}, 
                    "data": {
                        "text/html": "<div style=\"width:100%;\"><div style=\"position:relative;width:100%;height:0;padding-bottom:60%;\"><iframe src=\"data:text/html;charset=utf-8;base64,PCFET0NUWVBFIGh0bWw+CjxoZWFkPiAgICAKICAgIDxtZXRhIGh0dHAtZXF1aXY9ImNvbnRlbnQtdHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PVVURi04IiAvPgogICAgPHNjcmlwdD5MX1BSRUZFUl9DQU5WQVMgPSBmYWxzZTsgTF9OT19UT1VDSCA9IGZhbHNlOyBMX0RJU0FCTEVfM0QgPSBmYWxzZTs8L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xlYWZsZXRAMS4yLjAvZGlzdC9sZWFmbGV0LmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2FqYXguZ29vZ2xlYXBpcy5jb20vYWpheC9saWJzL2pxdWVyeS8xLjExLjEvanF1ZXJ5Lm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvanMvYm9vdHN0cmFwLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvTGVhZmxldC5hd2Vzb21lLW1hcmtlcnMvMi4wLjIvbGVhZmxldC5hd2Vzb21lLW1hcmtlcnMuanMiPjwvc2NyaXB0PgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xlYWZsZXRAMS4yLjAvZGlzdC9sZWFmbGV0LmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLm1pbi5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvY3NzL2Jvb3RzdHJhcC10aGVtZS5taW4uY3NzIi8+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuNi4zL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9yYXdnaXQuY29tL3B5dGhvbi12aXN1YWxpemF0aW9uL2ZvbGl1bS9tYXN0ZXIvZm9saXVtL3RlbXBsYXRlcy9sZWFmbGV0LmF3ZXNvbWUucm90YXRlLmNzcyIvPgogICAgPHN0eWxlPmh0bWwsIGJvZHkge3dpZHRoOiAxMDAlO2hlaWdodDogMTAwJTttYXJnaW46IDA7cGFkZGluZzogMDt9PC9zdHlsZT4KICAgIDxzdHlsZT4jbWFwIHtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtib3R0b206MDtyaWdodDowO2xlZnQ6MDt9PC9zdHlsZT4KICAgIAogICAgICAgICAgICA8c3R5bGU+ICNtYXBfZTU1YjAxMDVkMzAwNGY5ZDk1NTdiOWJiYThjMmU4MzEgewogICAgICAgICAgICAgICAgcG9zaXRpb24gOiByZWxhdGl2ZTsKICAgICAgICAgICAgICAgIHdpZHRoIDogMTAwLjAlOwogICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAuMCU7CiAgICAgICAgICAgICAgICBsZWZ0OiAwLjAlOwogICAgICAgICAgICAgICAgdG9wOiAwLjAlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICA8L3N0eWxlPgogICAgICAgIAo8L2hlYWQ+Cjxib2R5PiAgICAKICAgIAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb2xpdW0tbWFwIiBpZD0ibWFwX2U1NWIwMTA1ZDMwMDRmOWQ5NTU3YjliYmE4YzJlODMxIiA+PC9kaXY+CiAgICAgICAgCjwvYm9keT4KPHNjcmlwdD4gICAgCiAgICAKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGJvdW5kcyA9IG51bGw7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcF9lNTViMDEwNWQzMDA0ZjlkOTU1N2I5YmJhOGMyZTgzMSA9IEwubWFwKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21hcF9lNTViMDEwNWQzMDA0ZjlkOTU1N2I5YmJhOGMyZTgzMScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y2VudGVyOiBbNDMuNjUzOTYzLC03OS4zODcyMDddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbTogMTIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhCb3VuZHM6IGJvdW5kcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyczogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JsZENvcHlKdW1wOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyczogTC5DUlMuRVBTRzM4NTcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciB0aWxlX2xheWVyX2U4ZmUwNmE1YWE1ZDRkZTQ4ODg5ZTkxNmM2MDFmMjMzID0gTC50aWxlTGF5ZXIoCiAgICAgICAgICAgICAgICAnaHR0cHM6Ly97c30udGlsZS5vcGVuc3RyZWV0bWFwLm9yZy97en0ve3h9L3t5fS5wbmcnLAogICAgICAgICAgICAgICAgewogICJhdHRyaWJ1dGlvbiI6IG51bGwsCiAgImRldGVjdFJldGluYSI6IGZhbHNlLAogICJtYXhab29tIjogMTgsCiAgIm1pblpvb20iOiAxLAogICJub1dyYXAiOiBmYWxzZSwKICAic3ViZG9tYWlucyI6ICJhYmMiCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2U1NWIwMTA1ZDMwMDRmOWQ5NTU3YjliYmE4YzJlODMxKTsKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl85NDE3Nzk1ZDJmNDM0ZGQ3OTZkYWY0ZjFlY2I4OGVjZiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY3NjM1NzM5OTk5OTk5LC03OS4yOTMwMzEyXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2U1NWIwMTA1ZDMwMDRmOWQ5NTU3YjliYmE4YzJlODMxKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzZlMmNlMDJjNDFmMTQ2OTFiMGNhM2FkNzRhMTUzZjNjID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzY5YzMwNDg3MzIyOTQxYWU5Nzk1OWE2MGUwNzkyMDM2ID0gJCgnPGRpdiBpZD0iaHRtbF82OWMzMDQ4NzMyMjk0MWFlOTc5NTlhNjBlMDc5MjAzNiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VGhlIEJlYWNoZXM8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzZlMmNlMDJjNDFmMTQ2OTFiMGNhM2FkNzRhMTUzZjNjLnNldENvbnRlbnQoaHRtbF82OWMzMDQ4NzMyMjk0MWFlOTc5NTlhNjBlMDc5MjAzNik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl85NDE3Nzk1ZDJmNDM0ZGQ3OTZkYWY0ZjFlY2I4OGVjZi5iaW5kUG9wdXAocG9wdXBfNmUyY2UwMmM0MWYxNDY5MWIwY2EzYWQ3NGExNTNmM2MpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfM2IxZDVkOWZlNjFhNDE5OThhZDFlN2UxNmVmY2EyYjQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42Nzk1NTcxLC03OS4zNTIxODhdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZTU1YjAxMDVkMzAwNGY5ZDk1NTdiOWJiYThjMmU4MzEpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMDE4NDVmZDJiM2IxNGNmYTliMGM3MjE1YWFjYzAxZDkgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMTZmYTU5OWE4MzUwNDViM2E4MzM5ZDhhMjc5ODAzODAgPSAkKCc8ZGl2IGlkPSJodG1sXzE2ZmE1OTlhODM1MDQ1YjNhODMzOWQ4YTI3OTgwMzgwIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5UaGUgRGFuZm9ydGggV2VzdCwgUml2ZXJkYWxlPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8wMTg0NWZkMmIzYjE0Y2ZhOWIwYzcyMTVhYWNjMDFkOS5zZXRDb250ZW50KGh0bWxfMTZmYTU5OWE4MzUwNDViM2E4MzM5ZDhhMjc5ODAzODApOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfM2IxZDVkOWZlNjFhNDE5OThhZDFlN2UxNmVmY2EyYjQuYmluZFBvcHVwKHBvcHVwXzAxODQ1ZmQyYjNiMTRjZmE5YjBjNzIxNWFhY2MwMWQ5KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2JhYjQxMWJhODEyODQ4MDliMDM3ODljYjhhYzU0Y2Y4ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjY4OTk4NSwtNzkuMzE1NTcxNTk5OTk5OThdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZTU1YjAxMDVkMzAwNGY5ZDk1NTdiOWJiYThjMmU4MzEpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNDViNTc5ODZiZTBkNDM5ZDllOTE2YWQyOWMwMDdlZTUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNmNiMjVkYjg2ZjJhNDdmZTg3MTkzOGY1MTE1YjliNTIgPSAkKCc8ZGl2IGlkPSJodG1sXzZjYjI1ZGI4NmYyYTQ3ZmU4NzE5MzhmNTExNWI5YjUyIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5UaGUgQmVhY2hlcyBXZXN0LCBJbmRpYSBCYXphYXI8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzQ1YjU3OTg2YmUwZDQzOWQ5ZTkxNmFkMjljMDA3ZWU1LnNldENvbnRlbnQoaHRtbF82Y2IyNWRiODZmMmE0N2ZlODcxOTM4ZjUxMTViOWI1Mik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9iYWI0MTFiYTgxMjg0ODA5YjAzNzg5Y2I4YWM1NGNmOC5iaW5kUG9wdXAocG9wdXBfNDViNTc5ODZiZTBkNDM5ZDllOTE2YWQyOWMwMDdlZTUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNzIxNDRhYjRmMjVkNGRkMzhhMjEwNGU3MjA4Y2JjMTQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTk1MjU1LC03OS4zNDA5MjNdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZTU1YjAxMDVkMzAwNGY5ZDk1NTdiOWJiYThjMmU4MzEpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYWI2NzAwYTU4ZGQ4NDU3MDhlMTFmYzE0NjljZDhjY2MgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNzc4NTRkZDhkYTdkNDJhNjg2NWI3MDljNzMzNzg2MGEgPSAkKCc8ZGl2IGlkPSJodG1sXzc3ODU0ZGQ4ZGE3ZDQyYTY4NjViNzA5YzczMzc4NjBhIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5TdHVkaW8gRGlzdHJpY3Q8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2FiNjcwMGE1OGRkODQ1NzA4ZTExZmMxNDY5Y2Q4Y2NjLnNldENvbnRlbnQoaHRtbF83Nzg1NGRkOGRhN2Q0MmE2ODY1YjcwOWM3MzM3ODYwYSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl83MjE0NGFiNGYyNWQ0ZGQzOGEyMTA0ZTcyMDhjYmMxNC5iaW5kUG9wdXAocG9wdXBfYWI2NzAwYTU4ZGQ4NDU3MDhlMTFmYzE0NjljZDhjY2MpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNTkzMmFiODg4ZjA3NDE1MDg1NjdhODYzNDNmMDNiZWIgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43MjgwMjA1LC03OS4zODg3OTAxXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2U1NWIwMTA1ZDMwMDRmOWQ5NTU3YjliYmE4YzJlODMxKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzE0MDdhYTY3NmZhMTRlYzJhZjcyNDgwNzE0NWZhYzE3ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzlmNWU0ZWUzODczMTQzY2ViZWExMmE4NjYzMmE4ZTZjID0gJCgnPGRpdiBpZD0iaHRtbF85ZjVlNGVlMzg3MzE0M2NlYmVhMTJhODY2MzJhOGU2YyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TGF3cmVuY2UgUGFyazwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMTQwN2FhNjc2ZmExNGVjMmFmNzI0ODA3MTQ1ZmFjMTcuc2V0Q29udGVudChodG1sXzlmNWU0ZWUzODczMTQzY2ViZWExMmE4NjYzMmE4ZTZjKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzU5MzJhYjg4OGYwNzQxNTA4NTY3YTg2MzQzZjAzYmViLmJpbmRQb3B1cChwb3B1cF8xNDA3YWE2NzZmYTE0ZWMyYWY3MjQ4MDcxNDVmYWMxNyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl84YmU0YmMxN2IwMjI0YmZhYWFhZGVlOTljNzY0Zjg3ZiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjcxMjc1MTEsLTc5LjM5MDE5NzVdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZTU1YjAxMDVkMzAwNGY5ZDk1NTdiOWJiYThjMmU4MzEpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZDlhNDQwNTczNDA0NGRiZDg4ZTA1OTYwNzQ2M2NhMWMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZDQxYjFmZmIxZTEzNGMxYjkwMjZkOGY0ZWJlZGYxODggPSAkKCc8ZGl2IGlkPSJodG1sX2Q0MWIxZmZiMWUxMzRjMWI5MDI2ZDhmNGViZWRmMTg4IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5EYXZpc3ZpbGxlIE5vcnRoPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9kOWE0NDA1NzM0MDQ0ZGJkODhlMDU5NjA3NDYzY2ExYy5zZXRDb250ZW50KGh0bWxfZDQxYjFmZmIxZTEzNGMxYjkwMjZkOGY0ZWJlZGYxODgpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfOGJlNGJjMTdiMDIyNGJmYWFhYWRlZTk5Yzc2NGY4N2YuYmluZFBvcHVwKHBvcHVwX2Q5YTQ0MDU3MzQwNDRkYmQ4OGUwNTk2MDc0NjNjYTFjKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzUzZjFmNjhkYTU3MzRkYWJiMThlNjlmZTExYjIyYjNjID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzE1MzgzNCwtNzkuNDA1Njc4NDAwMDAwMDFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZTU1YjAxMDVkMzAwNGY5ZDk1NTdiOWJiYThjMmU4MzEpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMGRhZjY4YzY0MDhmNGM1NmIzOTIzNjY0OTFjZjg2OTEgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMzU3MTFmZTlkYjZhNDA5MTkzNGQzYWIxYmI0NjlkN2UgPSAkKCc8ZGl2IGlkPSJodG1sXzM1NzExZmU5ZGI2YTQwOTE5MzRkM2FiMWJiNDY5ZDdlIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Ob3J0aCBUb3JvbnRvIFdlc3Q8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzBkYWY2OGM2NDA4ZjRjNTZiMzkyMzY2NDkxY2Y4NjkxLnNldENvbnRlbnQoaHRtbF8zNTcxMWZlOWRiNmE0MDkxOTM0ZDNhYjFiYjQ2OWQ3ZSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl81M2YxZjY4ZGE1NzM0ZGFiYjE4ZTY5ZmUxMWIyMmIzYy5iaW5kUG9wdXAocG9wdXBfMGRhZjY4YzY0MDhmNGM1NmIzOTIzNjY0OTFjZjg2OTEpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfOTFjYmQ1ZThjZmZkNGRkNGIyZTU4ZjU4Y2RjZmY3NDcgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43MDQzMjQ0LC03OS4zODg3OTAxXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2U1NWIwMTA1ZDMwMDRmOWQ5NTU3YjliYmE4YzJlODMxKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2QzZDQyODA4MTUyMTRjNzlhN2Q0ZTQ2MTRmMjcxNTE4ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzBhZTVkZjQ2MzhkODQ1OTdhYjI3YjdjMjQyMWJhZDI5ID0gJCgnPGRpdiBpZD0iaHRtbF8wYWU1ZGY0NjM4ZDg0NTk3YWIyN2I3YzI0MjFiYWQyOSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RGF2aXN2aWxsZTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZDNkNDI4MDgxNTIxNGM3OWE3ZDRlNDYxNGYyNzE1MTguc2V0Q29udGVudChodG1sXzBhZTVkZjQ2MzhkODQ1OTdhYjI3YjdjMjQyMWJhZDI5KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzkxY2JkNWU4Y2ZmZDRkZDRiMmU1OGY1OGNkY2ZmNzQ3LmJpbmRQb3B1cChwb3B1cF9kM2Q0MjgwODE1MjE0Yzc5YTdkNGU0NjE0ZjI3MTUxOCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9jMDU5ODNkOWIzOTk0YWM3OTJiYmM4NTQ0MzkyZDBjMSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY4OTU3NDMsLTc5LjM4MzE1OTkwMDAwMDAxXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2U1NWIwMTA1ZDMwMDRmOWQ5NTU3YjliYmE4YzJlODMxKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzNkZjJmYTNiYjkwMTQ1ZDdhNjYzODg0ZTkwNmJiODBiID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzVmZDc3OWIzNTg5NjRkOWQ5ODM4MmJmNDhiNjc0NjE3ID0gJCgnPGRpdiBpZD0iaHRtbF81ZmQ3NzliMzU4OTY0ZDlkOTgzODJiZjQ4YjY3NDYxNyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TW9vcmUgUGFyaywgU3VtbWVyaGlsbCBFYXN0PC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8zZGYyZmEzYmI5MDE0NWQ3YTY2Mzg4NGU5MDZiYjgwYi5zZXRDb250ZW50KGh0bWxfNWZkNzc5YjM1ODk2NGQ5ZDk4MzgyYmY0OGI2NzQ2MTcpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYzA1OTgzZDliMzk5NGFjNzkyYmJjODU0NDM5MmQwYzEuYmluZFBvcHVwKHBvcHVwXzNkZjJmYTNiYjkwMTQ1ZDdhNjYzODg0ZTkwNmJiODBiKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzM0MGVkODI5NDA4NDQyYzE4MzVjMzAyM2IwMzk5NmViID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjg2NDEyMjk5OTk5OTksLTc5LjQwMDA0OTNdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZTU1YjAxMDVkMzAwNGY5ZDk1NTdiOWJiYThjMmU4MzEpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNGUxMWYyMTQ4Y2ZhNGMyODkwZTRhNDk0NWY2NDU3MTkgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZWE5MzQwODgxZjkzNDRlZjgzZjM1ODllZjM4YTEwNGIgPSAkKCc8ZGl2IGlkPSJodG1sX2VhOTM0MDg4MWY5MzQ0ZWY4M2YzNTg5ZWYzOGExMDRiIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5EZWVyIFBhcmssIEZvcmVzdCBIaWxsIFNFLCBSYXRobmVsbHksIFNvdXRoIEhpbGwsIFN1bW1lcmhpbGwgV2VzdDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNGUxMWYyMTQ4Y2ZhNGMyODkwZTRhNDk0NWY2NDU3MTkuc2V0Q29udGVudChodG1sX2VhOTM0MDg4MWY5MzQ0ZWY4M2YzNTg5ZWYzOGExMDRiKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzM0MGVkODI5NDA4NDQyYzE4MzVjMzAyM2IwMzk5NmViLmJpbmRQb3B1cChwb3B1cF80ZTExZjIxNDhjZmE0YzI4OTBlNGE0OTQ1ZjY0NTcxOSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl83MTE5MmY5N2U1YmE0MjE4YjIwYTEzMDdkYmE5NTEwNSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY3OTU2MjYsLTc5LjM3NzUyOTQwMDAwMDAxXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2U1NWIwMTA1ZDMwMDRmOWQ5NTU3YjliYmE4YzJlODMxKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2VkNGFjNDJiMWQxZTQ2YTZiYmJjNWJiZjllYmMwYTg5ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzQyZWMxOGU3Nzk4ZDQ3NmQ5YzZlODk2YzBmMjJkYjM0ID0gJCgnPGRpdiBpZD0iaHRtbF80MmVjMThlNzc5OGQ0NzZkOWM2ZTg5NmMwZjIyZGIzNCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Um9zZWRhbGU8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2VkNGFjNDJiMWQxZTQ2YTZiYmJjNWJiZjllYmMwYTg5LnNldENvbnRlbnQoaHRtbF80MmVjMThlNzc5OGQ0NzZkOWM2ZTg5NmMwZjIyZGIzNCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl83MTE5MmY5N2U1YmE0MjE4YjIwYTEzMDdkYmE5NTEwNS5iaW5kUG9wdXAocG9wdXBfZWQ0YWM0MmIxZDFlNDZhNmJiYmM1YmJmOWViYzBhODkpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNjc4M2ZlYjQ4MWU0NDcwYmFjMzM2NDYxZjFmZjU3NTYgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42Njc5NjcsLTc5LjM2NzY3NTNdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZTU1YjAxMDVkMzAwNGY5ZDk1NTdiOWJiYThjMmU4MzEpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMzhhYmQ0Zjg4ZWY4NDAwZGJlMDU5ODI5NzJmZjMzODYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZGFkODMxNjBiNWExNDAzOThkNWI4YjA1YWRlNzg4NTIgPSAkKCc8ZGl2IGlkPSJodG1sX2RhZDgzMTYwYjVhMTQwMzk4ZDViOGIwNWFkZTc4ODUyIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5DYWJiYWdldG93biwgU3QuIEphbWVzIFRvd248L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzM4YWJkNGY4OGVmODQwMGRiZTA1OTgyOTcyZmYzMzg2LnNldENvbnRlbnQoaHRtbF9kYWQ4MzE2MGI1YTE0MDM5OGQ1YjhiMDVhZGU3ODg1Mik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl82NzgzZmViNDgxZTQ0NzBiYWMzMzY0NjFmMWZmNTc1Ni5iaW5kUG9wdXAocG9wdXBfMzhhYmQ0Zjg4ZWY4NDAwZGJlMDU5ODI5NzJmZjMzODYpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYjMxN2FhNDZkY2IxNGUxNWE5ZGQyOGVhMDIzY2M5NDIgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NjU4NTk5LC03OS4zODMxNTk5MDAwMDAwMV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9lNTViMDEwNWQzMDA0ZjlkOTU1N2I5YmJhOGMyZTgzMSk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF81Y2MyYzRhNzAyMWM0OTk4YjU2MGM3N2JkMGVjMDM1YyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF80MzczOTA0NmJlMWE0MjkzYWY4MzMxOTkyZGFhMzVhMyA9ICQoJzxkaXYgaWQ9Imh0bWxfNDM3MzkwNDZiZTFhNDI5M2FmODMzMTk5MmRhYTM1YTMiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNodXJjaCBhbmQgV2VsbGVzbGV5PC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF81Y2MyYzRhNzAyMWM0OTk4YjU2MGM3N2JkMGVjMDM1Yy5zZXRDb250ZW50KGh0bWxfNDM3MzkwNDZiZTFhNDI5M2FmODMzMTk5MmRhYTM1YTMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYjMxN2FhNDZkY2IxNGUxNWE5ZGQyOGVhMDIzY2M5NDIuYmluZFBvcHVwKHBvcHVwXzVjYzJjNGE3MDIxYzQ5OThiNTYwYzc3YmQwZWMwMzVjKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2E2N2U4MWYzYzQ2YTQ0ZWI4ZmIzOWFjOTViZWVlMDIwID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjU0MjU5OSwtNzkuMzYwNjM1OV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9lNTViMDEwNWQzMDA0ZjlkOTU1N2I5YmJhOGMyZTgzMSk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9kMTlhMDJkY2FkMTM0YzNhOGMwYzUzMmJlM2I4Y2E3MiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF82NTBiOGNmZTUwMDE0Nzg4ODkzNmQ1ZGE1NWM3NGQ2NyA9ICQoJzxkaXYgaWQ9Imh0bWxfNjUwYjhjZmU1MDAxNDc4ODg5MzZkNWRhNTVjNzRkNjciIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkhhcmJvdXJmcm9udCwgUmVnZW50IFBhcms8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2QxOWEwMmRjYWQxMzRjM2E4YzBjNTMyYmUzYjhjYTcyLnNldENvbnRlbnQoaHRtbF82NTBiOGNmZTUwMDE0Nzg4ODkzNmQ1ZGE1NWM3NGQ2Nyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9hNjdlODFmM2M0NmE0NGViOGZiMzlhYzk1YmVlZTAyMC5iaW5kUG9wdXAocG9wdXBfZDE5YTAyZGNhZDEzNGMzYThjMGM1MzJiZTNiOGNhNzIpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMjdmMjU0MTkxZjExNGNiM2EyODA2OTEzZjNkMTFkNGQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTcxNjE4LC03OS4zNzg5MzcwOTk5OTk5OV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9lNTViMDEwNWQzMDA0ZjlkOTU1N2I5YmJhOGMyZTgzMSk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8zNWY5ZWM0OTExOWE0N2NiYTBkMWRiMGJiOTlhOGM4NCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9jNjg4NWU4MWRjNmE0YmNjYTMxNzkxMTM5MTRjNGNlMSA9ICQoJzxkaXYgaWQ9Imh0bWxfYzY4ODVlODFkYzZhNGJjY2EzMTc5MTEzOTE0YzRjZTEiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlJ5ZXJzb24sIEdhcmRlbiBEaXN0cmljdDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMzVmOWVjNDkxMTlhNDdjYmEwZDFkYjBiYjk5YThjODQuc2V0Q29udGVudChodG1sX2M2ODg1ZTgxZGM2YTRiY2NhMzE3OTExMzkxNGM0Y2UxKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzI3ZjI1NDE5MWYxMTRjYjNhMjgwNjkxM2YzZDExZDRkLmJpbmRQb3B1cChwb3B1cF8zNWY5ZWM0OTExOWE0N2NiYTBkMWRiMGJiOTlhOGM4NCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8xODYxMTY1MDQwYjk0ZGI4YWRkODVjZTFjMzFhZjBmMSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1MTQ5MzksLTc5LjM3NTQxNzldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZTU1YjAxMDVkMzAwNGY5ZDk1NTdiOWJiYThjMmU4MzEpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZGU0NTVhOGYyMzBmNDUwYTg1ZGYwODk0MTdhYzBiNGYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYmJhYzI3Y2QzMjVlNDVhOTkwYzI4MzhkMmY4M2ExYWYgPSAkKCc8ZGl2IGlkPSJodG1sX2JiYWMyN2NkMzI1ZTQ1YTk5MGMyODM4ZDJmODNhMWFmIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5TdC4gSmFtZXMgVG93bjwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZGU0NTVhOGYyMzBmNDUwYTg1ZGYwODk0MTdhYzBiNGYuc2V0Q29udGVudChodG1sX2JiYWMyN2NkMzI1ZTQ1YTk5MGMyODM4ZDJmODNhMWFmKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzE4NjExNjUwNDBiOTRkYjhhZGQ4NWNlMWMzMWFmMGYxLmJpbmRQb3B1cChwb3B1cF9kZTQ1NWE4ZjIzMGY0NTBhODVkZjA4OTQxN2FjMGI0Zik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl81NGFjNzk1YTFjMTA0OGEyYjhhODU3ZThlMjg5YmVkMiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY0NDc3MDc5OTk5OTk5NiwtNzkuMzczMzA2NF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9lNTViMDEwNWQzMDA0ZjlkOTU1N2I5YmJhOGMyZTgzMSk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9jZmRiZTVjMWU2YTE0OGVkYTJlNmZlOTU3MjllMGI5OCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF81NGZhODA0NDlmMWY0YzBiYjgwYjBkMzk0YWJjNjU4ZSA9ICQoJzxkaXYgaWQ9Imh0bWxfNTRmYTgwNDQ5ZjFmNGMwYmI4MGIwZDM5NGFiYzY1OGUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkJlcmN6eSBQYXJrPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9jZmRiZTVjMWU2YTE0OGVkYTJlNmZlOTU3MjllMGI5OC5zZXRDb250ZW50KGh0bWxfNTRmYTgwNDQ5ZjFmNGMwYmI4MGIwZDM5NGFiYzY1OGUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNTRhYzc5NWExYzEwNDhhMmI4YTg1N2U4ZTI4OWJlZDIuYmluZFBvcHVwKHBvcHVwX2NmZGJlNWMxZTZhMTQ4ZWRhMmU2ZmU5NTcyOWUwYjk4KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2RlZGQwODMwZmYyZDQwY2M5MmZiNzA5OTZmYmUwNDFiID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjU3OTUyNCwtNzkuMzg3MzgyNl0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9lNTViMDEwNWQzMDA0ZjlkOTU1N2I5YmJhOGMyZTgzMSk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF81ZmU3M2Q4MDY1N2E0M2ZiODc5OWRjYjVhYmU1NDJlOCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9iOTVjY2Y5NDc3NTk0YTgyYWViNTZiNjJkNWE2NzA3YiA9ICQoJzxkaXYgaWQ9Imh0bWxfYjk1Y2NmOTQ3NzU5NGE4MmFlYjU2YjYyZDVhNjcwN2IiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNlbnRyYWwgQmF5IFN0cmVldDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNWZlNzNkODA2NTdhNDNmYjg3OTlkY2I1YWJlNTQyZTguc2V0Q29udGVudChodG1sX2I5NWNjZjk0Nzc1OTRhODJhZWI1NmI2MmQ1YTY3MDdiKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2RlZGQwODMwZmYyZDQwY2M5MmZiNzA5OTZmYmUwNDFiLmJpbmRQb3B1cChwb3B1cF81ZmU3M2Q4MDY1N2E0M2ZiODc5OWRjYjVhYmU1NDJlOCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9kZDFkZjZmM2Q3YjM0NmE5OWU4NjdlZWRiZGI1NjQwNiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1MDU3MTIwMDAwMDAxLC03OS4zODQ1Njc1XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2U1NWIwMTA1ZDMwMDRmOWQ5NTU3YjliYmE4YzJlODMxKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2M3OWMyNjQ1MWY5NzQwMDg5MDI0NTRkMTU2YWYyYzVmID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzU3YzA3ODVjNTFkNzRmOGQ4N2M3NTYwYmIzYTI5Mjc0ID0gJCgnPGRpdiBpZD0iaHRtbF81N2MwNzg1YzUxZDc0ZjhkODdjNzU2MGJiM2EyOTI3NCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QWRlbGFpZGUsIEtpbmcsIFJpY2htb25kPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9jNzljMjY0NTFmOTc0MDA4OTAyNDU0ZDE1NmFmMmM1Zi5zZXRDb250ZW50KGh0bWxfNTdjMDc4NWM1MWQ3NGY4ZDg3Yzc1NjBiYjNhMjkyNzQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZGQxZGY2ZjNkN2IzNDZhOTllODY3ZWVkYmRiNTY0MDYuYmluZFBvcHVwKHBvcHVwX2M3OWMyNjQ1MWY5NzQwMDg5MDI0NTRkMTU2YWYyYzVmKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzk1MGJjOWI4YzI4OTRjYTY4Y2MzODc5ZjJiODYyYjY1ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjQwODE1NywtNzkuMzgxNzUyMjk5OTk5OTldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZTU1YjAxMDVkMzAwNGY5ZDk1NTdiOWJiYThjMmU4MzEpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNTJiZmQyMDQ4NGQ4NDQ1MmE4MDQ5Yjk3OTQ2MGMzY2YgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfM2I1M2Q2YjI1OTRkNDk4ZTk3YTIwOWI4MTMxMDIyNjggPSAkKCc8ZGl2IGlkPSJodG1sXzNiNTNkNmIyNTk0ZDQ5OGU5N2EyMDliODEzMTAyMjY4IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5IYXJib3VyZnJvbnQgRWFzdCwgVG9yb250byBJc2xhbmRzLCBVbmlvbiBTdGF0aW9uPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF81MmJmZDIwNDg0ZDg0NDUyYTgwNDliOTc5NDYwYzNjZi5zZXRDb250ZW50KGh0bWxfM2I1M2Q2YjI1OTRkNDk4ZTk3YTIwOWI4MTMxMDIyNjgpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfOTUwYmM5YjhjMjg5NGNhNjhjYzM4NzlmMmI4NjJiNjUuYmluZFBvcHVwKHBvcHVwXzUyYmZkMjA0ODRkODQ0NTJhODA0OWI5Nzk0NjBjM2NmKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2M4ZjdmNmRjMTI3NTQ2ZjNhZWFlNTc2NWVjZjNhMDVlID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjQ3MTc2OCwtNzkuMzgxNTc2NDAwMDAwMDFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZTU1YjAxMDVkMzAwNGY5ZDk1NTdiOWJiYThjMmU4MzEpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZTZjM2JmZjg1MGIwNDI3MzgwMWQ1NTk3MjE4YjU5Y2MgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfM2M2N2E5NjNhYjlhNGViNDhlNGEzMzFlODk2MjlhNDYgPSAkKCc8ZGl2IGlkPSJodG1sXzNjNjdhOTYzYWI5YTRlYjQ4ZTRhMzMxZTg5NjI5YTQ2IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5EZXNpZ24gRXhjaGFuZ2UsIFRvcm9udG8gRG9taW5pb24gQ2VudHJlPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9lNmMzYmZmODUwYjA0MjczODAxZDU1OTcyMThiNTljYy5zZXRDb250ZW50KGh0bWxfM2M2N2E5NjNhYjlhNGViNDhlNGEzMzFlODk2MjlhNDYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYzhmN2Y2ZGMxMjc1NDZmM2FlYWU1NzY1ZWNmM2EwNWUuYmluZFBvcHVwKHBvcHVwX2U2YzNiZmY4NTBiMDQyNzM4MDFkNTU5NzIxOGI1OWNjKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzhmZjNjYWY5NTBiZTQ1Y2ZhOGU1NzYxMWY1ZTZlZGE2ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjQ4MTk4NSwtNzkuMzc5ODE2OTAwMDAwMDFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZTU1YjAxMDVkMzAwNGY5ZDk1NTdiOWJiYThjMmU4MzEpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMWNjZmY2Nzk5ZWUxNDQ0MmJmMDdmNGE2MDcyODZhMmEgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZmZiOTNkMTg0YThhNDBiNmI3Nzc1NjUwMjEyYTg1YTcgPSAkKCc8ZGl2IGlkPSJodG1sX2ZmYjkzZDE4NGE4YTQwYjZiNzc3NTY1MDIxMmE4NWE3IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Db21tZXJjZSBDb3VydCwgVmljdG9yaWEgSG90ZWw8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzFjY2ZmNjc5OWVlMTQ0NDJiZjA3ZjRhNjA3Mjg2YTJhLnNldENvbnRlbnQoaHRtbF9mZmI5M2QxODRhOGE0MGI2Yjc3NzU2NTAyMTJhODVhNyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl84ZmYzY2FmOTUwYmU0NWNmYThlNTc2MTFmNWU2ZWRhNi5iaW5kUG9wdXAocG9wdXBfMWNjZmY2Nzk5ZWUxNDQ0MmJmMDdmNGE2MDcyODZhMmEpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMzAyZWVhOGZjZDk2NGJmZDg0NTg5YWU0ZGE5YmY4NGEgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My43MTE2OTQ4LC03OS40MTY5MzU1OTk5OTk5OV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9lNTViMDEwNWQzMDA0ZjlkOTU1N2I5YmJhOGMyZTgzMSk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9jNjMxMTE1ZGFmNTI0ZmE0OTUzN2VhMzk2MDFiNjBkYyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF83MDFkOWQwMWU0MmI0YTljYmI3MDAxMGM1MGY4MmUwZSA9ICQoJzxkaXYgaWQ9Imh0bWxfNzAxZDlkMDFlNDJiNGE5Y2JiNzAwMTBjNTBmODJlMGUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlJvc2VsYXduPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9jNjMxMTE1ZGFmNTI0ZmE0OTUzN2VhMzk2MDFiNjBkYy5zZXRDb250ZW50KGh0bWxfNzAxZDlkMDFlNDJiNGE5Y2JiNzAwMTBjNTBmODJlMGUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMzAyZWVhOGZjZDk2NGJmZDg0NTg5YWU0ZGE5YmY4NGEuYmluZFBvcHVwKHBvcHVwX2M2MzExMTVkYWY1MjRmYTQ5NTM3ZWEzOTYwMWI2MGRjKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzNhYjEyOGI0YzNkNjRjM2JiYzQ5ZmZiNDVhMTMyNmIxID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjk2OTQ3NiwtNzkuNDExMzA3MjAwMDAwMDFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZTU1YjAxMDVkMzAwNGY5ZDk1NTdiOWJiYThjMmU4MzEpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMWRlNzU3ZWQyZDM1NDg0MWFhNDM2ZTc1ODRjZDNhODIgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZjNiNTkzNDAxMjM2NGE0ZmIxODQzYjgzOTMwN2VjNzIgPSAkKCc8ZGl2IGlkPSJodG1sX2YzYjU5MzQwMTIzNjRhNGZiMTg0M2I4MzkzMDdlYzcyIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Gb3Jlc3QgSGlsbCBOb3J0aCwgRm9yZXN0IEhpbGwgV2VzdDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMWRlNzU3ZWQyZDM1NDg0MWFhNDM2ZTc1ODRjZDNhODIuc2V0Q29udGVudChodG1sX2YzYjU5MzQwMTIzNjRhNGZiMTg0M2I4MzkzMDdlYzcyKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzNhYjEyOGI0YzNkNjRjM2JiYzQ5ZmZiNDVhMTMyNmIxLmJpbmRQb3B1cChwb3B1cF8xZGU3NTdlZDJkMzU0ODQxYWE0MzZlNzU4NGNkM2E4Mik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9hMGU3MDRlMmVhZDY0Y2FkYmI1MTExYWJhZThlZjkyZiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY3MjcwOTcsLTc5LjQwNTY3ODQwMDAwMDAxXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2U1NWIwMTA1ZDMwMDRmOWQ5NTU3YjliYmE4YzJlODMxKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2UyNjZkZTA2ODAwNDQ5OTRiNDZhOWMzMjg4NThjNGY5ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzMyYTMwYmY1ODdjODQ2NDU4YjQwNzQ1NTIyMDJiN2Y3ID0gJCgnPGRpdiBpZD0iaHRtbF8zMmEzMGJmNTg3Yzg0NjQ1OGI0MDc0NTUyMjAyYjdmNyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VGhlIEFubmV4LCBOb3J0aCBNaWR0b3duLCBZb3JrdmlsbGU8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2UyNjZkZTA2ODAwNDQ5OTRiNDZhOWMzMjg4NThjNGY5LnNldENvbnRlbnQoaHRtbF8zMmEzMGJmNTg3Yzg0NjQ1OGI0MDc0NTUyMjAyYjdmNyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9hMGU3MDRlMmVhZDY0Y2FkYmI1MTExYWJhZThlZjkyZi5iaW5kUG9wdXAocG9wdXBfZTI2NmRlMDY4MDA0NDk5NGI0NmE5YzMyODg1OGM0ZjkpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZTBhMjE2ODI5NWZmNGM2Mjg2N2VlNzBmNWMzZTMzOTIgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NjI2OTU2LC03OS40MDAwNDkzXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2U1NWIwMTA1ZDMwMDRmOWQ5NTU3YjliYmE4YzJlODMxKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2JkMjRlYjgwZjlkZTQ1M2I4YjIzMTcyNTk1ODI0NjQ4ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2Y3YTM1MDUzOWQwOTQyYjhhZWY4NTdhNTAyM2Q3MWJlID0gJCgnPGRpdiBpZD0iaHRtbF9mN2EzNTA1MzlkMDk0MmI4YWVmODU3YTUwMjNkNzFiZSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+SGFyYm9yZCwgVW5pdmVyc2l0eSBvZiBUb3JvbnRvPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9iZDI0ZWI4MGY5ZGU0NTNiOGIyMzE3MjU5NTgyNDY0OC5zZXRDb250ZW50KGh0bWxfZjdhMzUwNTM5ZDA5NDJiOGFlZjg1N2E1MDIzZDcxYmUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZTBhMjE2ODI5NWZmNGM2Mjg2N2VlNzBmNWMzZTMzOTIuYmluZFBvcHVwKHBvcHVwX2JkMjRlYjgwZjlkZTQ1M2I4YjIzMTcyNTk1ODI0NjQ4KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzkzYWVjMDkyMmQwNjQ2MTdhODEwNzMwOWZhZjY5ZjhlID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjUzMjA1NywtNzkuNDAwMDQ5M10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9lNTViMDEwNWQzMDA0ZjlkOTU1N2I5YmJhOGMyZTgzMSk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8xZjQyYTE5NjkyODE0ZTBlOGM3ZDNmZTFhNWQ1MTUyNCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9hMTdjOGFiOThiZjI0MDE5YjdiOTUwNGMxNjlhZWExNiA9ICQoJzxkaXYgaWQ9Imh0bWxfYTE3YzhhYjk4YmYyNDAxOWI3Yjk1MDRjMTY5YWVhMTYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNoaW5hdG93biwgR3JhbmdlIFBhcmssIEtlbnNpbmd0b24gTWFya2V0PC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8xZjQyYTE5NjkyODE0ZTBlOGM3ZDNmZTFhNWQ1MTUyNC5zZXRDb250ZW50KGh0bWxfYTE3YzhhYjk4YmYyNDAxOWI3Yjk1MDRjMTY5YWVhMTYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfOTNhZWMwOTIyZDA2NDYxN2E4MTA3MzA5ZmFmNjlmOGUuYmluZFBvcHVwKHBvcHVwXzFmNDJhMTk2OTI4MTRlMGU4YzdkM2ZlMWE1ZDUxNTI0KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzkzZWVmMDY1NWVmYzQ1MzJhZjdiMjNlY2MwNzE4NzdjID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjI4OTQ2NywtNzkuMzk0NDE5OV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9lNTViMDEwNWQzMDA0ZjlkOTU1N2I5YmJhOGMyZTgzMSk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF84ZmM1MjBjZGMzZTI0Y2EyOWFlYzE1OTU1OTZmOWUyMCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9iMzExZjk1ZGVjOWE0ZTczYmE4ZjBmNmQ2MmU0OWUyZiA9ICQoJzxkaXYgaWQ9Imh0bWxfYjMxMWY5NWRlYzlhNGU3M2JhOGYwZjZkNjJlNDllMmYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNOIFRvd2VyLCBCYXRodXJzdCBRdWF5LCBJc2xhbmQgYWlycG9ydCwgSGFyYm91cmZyb250IFdlc3QsIEtpbmcgYW5kIFNwYWRpbmEsIFJhaWx3YXkgTGFuZHMsIFNvdXRoIE5pYWdhcmE8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzhmYzUyMGNkYzNlMjRjYTI5YWVjMTU5NTU5NmY5ZTIwLnNldENvbnRlbnQoaHRtbF9iMzExZjk1ZGVjOWE0ZTczYmE4ZjBmNmQ2MmU0OWUyZik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl85M2VlZjA2NTVlZmM0NTMyYWY3YjIzZWNjMDcxODc3Yy5iaW5kUG9wdXAocG9wdXBfOGZjNTIwY2RjM2UyNGNhMjlhZWMxNTk1NTk2ZjllMjApOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMGI3ZGRmN2UxNGQ4NDA4YmI3MWY1OGJiZmQyNDFjNGIgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NDY0MzUyLC03OS4zNzQ4NDU5OTk5OTk5OV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9lNTViMDEwNWQzMDA0ZjlkOTU1N2I5YmJhOGMyZTgzMSk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9lOWMwYWRlZjFhMjI0YmQyYjY3NjhhMWM5ZmI5ZDlmNyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8xMjgzN2JhMWIwY2U0ZjZhOTY0ZTVmYWMzOTRiZDFlNSA9ICQoJzxkaXYgaWQ9Imh0bWxfMTI4MzdiYTFiMGNlNGY2YTk2NGU1ZmFjMzk0YmQxZTUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlN0biBBIFBPIEJveGVzIDI1IFRoZSBFc3BsYW5hZGU8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2U5YzBhZGVmMWEyMjRiZDJiNjc2OGExYzlmYjlkOWY3LnNldENvbnRlbnQoaHRtbF8xMjgzN2JhMWIwY2U0ZjZhOTY0ZTVmYWMzOTRiZDFlNSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8wYjdkZGY3ZTE0ZDg0MDhiYjcxZjU4YmJmZDI0MWM0Yi5iaW5kUG9wdXAocG9wdXBfZTljMGFkZWYxYTIyNGJkMmI2NzY4YTFjOWZiOWQ5ZjcpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMTc0MWM5MDBlNzM4NDU0YmI4NzU4NWFjOTQ0ZjFlZmQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NDg0MjkyLC03OS4zODIyODAyXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2U1NWIwMTA1ZDMwMDRmOWQ5NTU3YjliYmE4YzJlODMxKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzcwYjRkNGFlMDRiNTRjOTc4OWRkZmEyMmM5MzVlOWExID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2IzN2U2ZWEwZTg4OTQ1ZmU4NmZjZTZjNDRlNjI1MzkyID0gJCgnPGRpdiBpZD0iaHRtbF9iMzdlNmVhMGU4ODk0NWZlODZmY2U2YzQ0ZTYyNTM5MiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Rmlyc3QgQ2FuYWRpYW4gUGxhY2UsIFVuZGVyZ3JvdW5kIGNpdHk8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzcwYjRkNGFlMDRiNTRjOTc4OWRkZmEyMmM5MzVlOWExLnNldENvbnRlbnQoaHRtbF9iMzdlNmVhMGU4ODk0NWZlODZmY2U2YzQ0ZTYyNTM5Mik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8xNzQxYzkwMGU3Mzg0NTRiYjg3NTg1YWM5NDRmMWVmZC5iaW5kUG9wdXAocG9wdXBfNzBiNGQ0YWUwNGI1NGM5Nzg5ZGRmYTIyYzkzNWU5YTEpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMzczNmJjOWU0ZTg1NGE3YjgzOGFkMzM3MmRhZjg4OWQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42Njk1NDIsLTc5LjQyMjU2MzddLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZTU1YjAxMDVkMzAwNGY5ZDk1NTdiOWJiYThjMmU4MzEpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZTJhOTUwNGUwMjEyNGIyNzkxYjIzM2UwZDk1ZmFlMzkgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYjQ0OWJhMDlkMmU5NGVkZDk2NGZkODJkMmM5NmY2YjEgPSAkKCc8ZGl2IGlkPSJodG1sX2I0NDliYTA5ZDJlOTRlZGQ5NjRmZDgyZDJjOTZmNmIxIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5DaHJpc3RpZTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZTJhOTUwNGUwMjEyNGIyNzkxYjIzM2UwZDk1ZmFlMzkuc2V0Q29udGVudChodG1sX2I0NDliYTA5ZDJlOTRlZGQ5NjRmZDgyZDJjOTZmNmIxKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzM3MzZiYzllNGU4NTRhN2I4MzhhZDMzNzJkYWY4ODlkLmJpbmRQb3B1cChwb3B1cF9lMmE5NTA0ZTAyMTI0YjI3OTFiMjMzZTBkOTVmYWUzOSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl80NjA1ODBlOWYyMDE0M2QxYTkwMWY3NzliNWE4YTI0YiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY2OTAwNTEwMDAwMDAxLC03OS40NDIyNTkzXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2U1NWIwMTA1ZDMwMDRmOWQ5NTU3YjliYmE4YzJlODMxKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzE1MGUzNjQ0MjRhMTQ5M2NhYjg3NTJhOWNjMjhmNTY5ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzNlMzU3NTZhOWZjYTQ5ZDA4YzBkYTIzZmViZTNlMDYxID0gJCgnPGRpdiBpZD0iaHRtbF8zZTM1NzU2YTlmY2E0OWQwOGMwZGEyM2ZlYmUzZTA2MSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RG92ZXJjb3VydCBWaWxsYWdlLCBEdWZmZXJpbjwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMTUwZTM2NDQyNGExNDkzY2FiODc1MmE5Y2MyOGY1Njkuc2V0Q29udGVudChodG1sXzNlMzU3NTZhOWZjYTQ5ZDA4YzBkYTIzZmViZTNlMDYxKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzQ2MDU4MGU5ZjIwMTQzZDFhOTAxZjc3OWI1YThhMjRiLmJpbmRQb3B1cChwb3B1cF8xNTBlMzY0NDI0YTE0OTNjYWI4NzUyYTljYzI4ZjU2OSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9iZjY2OWE3ZTFkZmY0YjhmYjM2MTU4ZGJiMTA3YTUyNyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY0NzkyNjcwMDAwMDAwNiwtNzkuNDE5NzQ5N10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9lNTViMDEwNWQzMDA0ZjlkOTU1N2I5YmJhOGMyZTgzMSk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF82YjM4OTkyYzk3Y2E0NTM3YWEzNTBjZTBjYzc0NTY0MiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8yOTA3ZmI2MTdhZWI0NTExYTgwYzcxNGE0MzBiOWEwNSA9ICQoJzxkaXYgaWQ9Imh0bWxfMjkwN2ZiNjE3YWViNDUxMWE4MGM3MTRhNDMwYjlhMDUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkxpdHRsZSBQb3J0dWdhbCwgVHJpbml0eTwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNmIzODk5MmM5N2NhNDUzN2FhMzUwY2UwY2M3NDU2NDIuc2V0Q29udGVudChodG1sXzI5MDdmYjYxN2FlYjQ1MTFhODBjNzE0YTQzMGI5YTA1KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2JmNjY5YTdlMWRmZjRiOGZiMzYxNThkYmIxMDdhNTI3LmJpbmRQb3B1cChwb3B1cF82YjM4OTkyYzk3Y2E0NTM3YWEzNTBjZTBjYzc0NTY0Mik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9lNzY5NmE0ZmM2Njk0MDNlOTc5Y2U1MjJlMjYzY2Y5MCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjYzNjg0NzIsLTc5LjQyODE5MTQwMDAwMDAyXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2U1NWIwMTA1ZDMwMDRmOWQ5NTU3YjliYmE4YzJlODMxKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzQzZTE0NGE1NTZmNTQ5YmE4NjU3MWU0ZDYyMzM1ZDkyID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2ZjMGFjMmY2NzI3YzRmM2U5MzA0ZDNmY2NmMzI5NTMwID0gJCgnPGRpdiBpZD0iaHRtbF9mYzBhYzJmNjcyN2M0ZjNlOTMwNGQzZmNjZjMyOTUzMCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QnJvY2t0b24sIEV4aGliaXRpb24gUGxhY2UsIFBhcmtkYWxlIFZpbGxhZ2U8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzQzZTE0NGE1NTZmNTQ5YmE4NjU3MWU0ZDYyMzM1ZDkyLnNldENvbnRlbnQoaHRtbF9mYzBhYzJmNjcyN2M0ZjNlOTMwNGQzZmNjZjMyOTUzMCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9lNzY5NmE0ZmM2Njk0MDNlOTc5Y2U1MjJlMjYzY2Y5MC5iaW5kUG9wdXAocG9wdXBfNDNlMTQ0YTU1NmY1NDliYTg2NTcxZTRkNjIzMzVkOTIpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMTNjMWYwZDlkNTk2NDAwMjkwMWE1OGIzMzQ1Y2UwYTMgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NjE2MDgzLC03OS40NjQ3NjMyOTk5OTk5OV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICJibHVlIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF9lNTViMDEwNWQzMDA0ZjlkOTU1N2I5YmJhOGMyZTgzMSk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8zNTBmMjQ2Y2FlNGE0MGVjOWUwYmY3ZDgxYTJiYjU5OSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF80ZDJjZWQxMjVhMjE0YjVlYjMzOTIxYTRhZGEzN2RhZCA9ICQoJzxkaXYgaWQ9Imh0bWxfNGQyY2VkMTI1YTIxNGI1ZWIzMzkyMWE0YWRhMzdkYWQiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkhpZ2ggUGFyaywgVGhlIEp1bmN0aW9uIFNvdXRoPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8zNTBmMjQ2Y2FlNGE0MGVjOWUwYmY3ZDgxYTJiYjU5OS5zZXRDb250ZW50KGh0bWxfNGQyY2VkMTI1YTIxNGI1ZWIzMzkyMWE0YWRhMzdkYWQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMTNjMWYwZDlkNTk2NDAwMjkwMWE1OGIzMzQ1Y2UwYTMuYmluZFBvcHVwKHBvcHVwXzM1MGYyNDZjYWU0YTQwZWM5ZTBiZjdkODFhMmJiNTk5KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzBlMzQ3NGMyZGU4NDQxZWQ4ZjlkZTFkMGJiNWFiOTcxID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjQ4OTU5NywtNzkuNDU2MzI1XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogImJsdWUiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwX2U1NWIwMTA1ZDMwMDRmOWQ5NTU3YjliYmE4YzJlODMxKTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzU1NWU0NDk4YTdlOTQxNGFiMTdiYTZkN2M3ZDM0ZjRjID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzkxMzAwODIxY2RmOTQyMGI5ZmFjOTFjYjJkNzBhZTFjID0gJCgnPGRpdiBpZD0iaHRtbF85MTMwMDgyMWNkZjk0MjBiOWZhYzkxY2IyZDcwYWUxYyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+UGFya2RhbGUsIFJvbmNlc3ZhbGxlczwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNTU1ZTQ0OThhN2U5NDE0YWIxN2JhNmQ3YzdkMzRmNGMuc2V0Q29udGVudChodG1sXzkxMzAwODIxY2RmOTQyMGI5ZmFjOTFjYjJkNzBhZTFjKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzBlMzQ3NGMyZGU4NDQxZWQ4ZjlkZTFkMGJiNWFiOTcxLmJpbmRQb3B1cChwb3B1cF81NTVlNDQ5OGE3ZTk0MTRhYjE3YmE2ZDdjN2QzNGY0Yyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8yNzZkYmQ5NDdhOGM0MTU1YmUzY2U3NGE3NzM5ZWM2OCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1MTU3MDYsLTc5LjQ4NDQ0OTldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZTU1YjAxMDVkMzAwNGY5ZDk1NTdiOWJiYThjMmU4MzEpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZjhiYmU5OWNkNmNkNDIwMGFlNTQzOWU2Y2I3M2VjOWQgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZDE0OGQ1NGIzN2VlNDhlZmEyMWRkY2IwYTkyNTdjMTggPSAkKCc8ZGl2IGlkPSJodG1sX2QxNDhkNTRiMzdlZTQ4ZWZhMjFkZGNiMGE5MjU3YzE4IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5SdW5ueW1lZGUsIFN3YW5zZWE8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2Y4YmJlOTljZDZjZDQyMDBhZTU0MzllNmNiNzNlYzlkLnNldENvbnRlbnQoaHRtbF9kMTQ4ZDU0YjM3ZWU0OGVmYTIxZGRjYjBhOTI1N2MxOCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8yNzZkYmQ5NDdhOGM0MTU1YmUzY2U3NGE3NzM5ZWM2OC5iaW5kUG9wdXAocG9wdXBfZjhiYmU5OWNkNmNkNDIwMGFlNTQzOWU2Y2I3M2VjOWQpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMjJlODk1ZjdkYWY2NDVmOWFiN2U5MThlOWU4OTM1NjQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NjI3NDM5LC03OS4zMjE1NThdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiYmx1ZSIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfZTU1YjAxMDVkMzAwNGY5ZDk1NTdiOWJiYThjMmU4MzEpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZDAwYTEyY2E4ZWUzNDZlZDg2MzlhMTYwNTY2MjgxOTMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMmJjYzU5NTViYmM2NDk2OGIyNzk3ZmNhMDA2MTRhM2UgPSAkKCc8ZGl2IGlkPSJodG1sXzJiY2M1OTU1YmJjNjQ5NjhiMjc5N2ZjYTAwNjE0YTNlIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5CdXNpbmVzcyByZXBseSBtYWlsIFByb2Nlc3NpbmcgQ2VudHJlOTY5IEVhc3Rlcm48L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2QwMGExMmNhOGVlMzQ2ZWQ4NjM5YTE2MDU2NjI4MTkzLnNldENvbnRlbnQoaHRtbF8yYmNjNTk1NWJiYzY0OTY4YjI3OTdmY2EwMDYxNGEzZSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl8yMmU4OTVmN2RhZjY0NWY5YWI3ZTkxOGU5ZTg5MzU2NC5iaW5kUG9wdXAocG9wdXBfZDAwYTEyY2E4ZWUzNDZlZDg2MzlhMTYwNTY2MjgxOTMpOwoKICAgICAgICAgICAgCiAgICAgICAgCjwvc2NyaXB0Pg==\" style=\"position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;\" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>", 
                        "text/plain": "<folium.folium.Map at 0x2b0c6c74ae48>"
                    }, 
                    "output_type": "execute_result"
                }
            ], 
            "source": "map_toronto = folium.Map(location=[latitude, longitude], zoom_start=12)\n\nfor lat, lng, label in zip(toronto_data['Latitude'], toronto_data['Longitude'], toronto_data['Neighborhood']):\n    label = folium.Popup(label, parse_html=True)\n    folium.CircleMarker(\n        [lat, lng],\n        radius=5,\n        popup=label,\n        color='blue',\n        fill=True,\n        fill_color='#3186cc',\n        fill_opacity=0.7,\n        parse_html=False).add_to(map_toronto)  \n\nmap_toronto"
        }, 
        {
            "execution_count": 99, 
            "cell_type": "code", 
            "metadata": {}, 
            "outputs": [], 
            "source": "# The code was removed by Watson Studio for sharing."
        }, 
        {
            "execution_count": 105, 
            "cell_type": "code", 
            "metadata": {}, 
            "outputs": [
                {
                    "output_type": "stream", 
                    "name": "stdout", 
                    "text": "Latitude and longitude values of The Beaches are 43.67635739999999, -79.2930312.\n"
                }, 
                {
                    "execution_count": 105, 
                    "metadata": {}, 
                    "data": {
                        "text/plain": "{'meta': {'code': 200, 'requestId': '5c2a6c869fb6b75135c9a4bb'},\n 'response': {'groups': [{'items': [{'reasons': {'count': 0,\n       'items': [{'reasonName': 'globalInteractionReason',\n         'summary': 'This spot is popular',\n         'type': 'general'}]},\n      'referralId': 'e-0-4b8daea1f964a520480833e3-0',\n      'venue': {'categories': [{'icon': {'prefix': 'https://ss3.4sqi.net/img/categories_v2/nightlife/pub_',\n          'suffix': '.png'},\n         'id': '4bf58dd8d48988d11b941735',\n         'name': 'Pub',\n         'pluralName': 'Pubs',\n         'primary': True,\n         'shortName': 'Pub'}],\n       'id': '4b8daea1f964a520480833e3',\n       'location': {'address': '676 Kingston Rd.',\n        'cc': 'CA',\n        'city': 'Toronto',\n        'country': 'Canada',\n        'crossStreet': 'at Main St.',\n        'distance': 460,\n        'formattedAddress': ['676 Kingston Rd. (at Main St.)',\n         'Toronto ON M4E 1R4',\n         'Canada'],\n        'labeledLatLngs': [{'label': 'display',\n          'lat': 43.679181434941015,\n          'lng': -79.29721535878515}],\n        'lat': 43.679181434941015,\n        'lng': -79.29721535878515,\n        'postalCode': 'M4E 1R4',\n        'state': 'ON'},\n       'name': 'Grover Pub and Grub',\n       'photos': {'count': 0, 'groups': []}}},\n     {'reasons': {'count': 0,\n       'items': [{'reasonName': 'globalInteractionReason',\n         'summary': 'This spot is popular',\n         'type': 'general'}]},\n      'referralId': 'e-0-4e77e3861f6ecf8d3648300c-1',\n      'venue': {'categories': [{'icon': {'prefix': 'https://ss3.4sqi.net/img/categories_v2/food/coffeeshop_',\n          'suffix': '.png'},\n         'id': '4bf58dd8d48988d1e0931735',\n         'name': 'Coffee Shop',\n         'pluralName': 'Coffee Shops',\n         'primary': True,\n         'shortName': 'Coffee Shop'}],\n       'id': '4e77e3861f6ecf8d3648300c',\n       'location': {'address': '637 Kingston Rd.',\n        'cc': 'CA',\n        'city': 'Toronto',\n        'country': 'Canada',\n        'crossStreet': 'at Main St.',\n        'distance': 486,\n        'formattedAddress': ['637 Kingston Rd. (at Main St.)',\n         'Toronto ON M4E 1R3',\n         'Canada'],\n        'labeledLatLngs': [{'label': 'display',\n          'lat': 43.67879837444001,\n          'lng': -79.2980449760153}],\n        'lat': 43.67879837444001,\n        'lng': -79.2980449760153,\n        'postalCode': 'M4E 1R3',\n        'state': 'ON'},\n       'name': 'Starbucks',\n       'photos': {'count': 0, 'groups': []}}},\n     {'reasons': {'count': 0,\n       'items': [{'reasonName': 'globalInteractionReason',\n         'summary': 'This spot is popular',\n         'type': 'general'}]},\n      'referralId': 'e-0-4df91c4bae60f95f82229ad5-2',\n      'venue': {'categories': [{'icon': {'prefix': 'https://ss3.4sqi.net/img/categories_v2/parks_outdoors/neighborhood_',\n          'suffix': '.png'},\n         'id': '4f2a25ac4b909258e854f55f',\n         'name': 'Neighborhood',\n         'pluralName': 'Neighborhoods',\n         'primary': True,\n         'shortName': 'Neighborhood'}],\n       'id': '4df91c4bae60f95f82229ad5',\n       'location': {'cc': 'CA',\n        'city': 'Toronto',\n        'country': 'Canada',\n        'distance': 468,\n        'formattedAddress': ['Toronto ON', 'Canada'],\n        'labeledLatLngs': [{'label': 'display',\n          'lat': 43.68056321147582,\n          'lng': -79.2928688743688}],\n        'lat': 43.68056321147582,\n        'lng': -79.2928688743688,\n        'state': 'ON'},\n       'name': 'Upper Beaches',\n       'photos': {'count': 0, 'groups': []}}},\n     {'reasons': {'count': 0,\n       'items': [{'reasonName': 'globalInteractionReason',\n         'summary': 'This spot is popular',\n         'type': 'general'}]},\n      'referralId': 'e-0-4dbc53541e72b351caafda72-3',\n      'venue': {'categories': [{'icon': {'prefix': 'https://ss3.4sqi.net/img/categories_v2/food/asian_',\n          'suffix': '.png'},\n         'id': '4bf58dd8d48988d142941735',\n         'name': 'Asian Restaurant',\n         'pluralName': 'Asian Restaurants',\n         'primary': True,\n         'shortName': 'Asian'}],\n       'id': '4dbc53541e72b351caafda72',\n       'location': {'address': '629 Kingston Rd',\n        'cc': 'CA',\n        'city': 'Toronto',\n        'country': 'Canada',\n        'crossStreet': 'at Main St',\n        'distance': 500,\n        'formattedAddress': ['629 Kingston Rd (at Main St)',\n         'Toronto ON',\n         'Canada'],\n        'labeledLatLngs': [{'label': 'display',\n          'lat': 43.678887885937094,\n          'lng': -79.29816674246032}],\n        'lat': 43.678887885937094,\n        'lng': -79.29816674246032,\n        'state': 'ON'},\n       'name': 'Seaspray Restaurant',\n       'photos': {'count': 0, 'groups': []}}}],\n    'name': 'recommended',\n    'type': 'Recommended Places'}],\n  'headerFullLocation': 'The Beaches, Toronto',\n  'headerLocation': 'The Beaches',\n  'headerLocationGranularity': 'neighborhood',\n  'suggestedBounds': {'ne': {'lat': 43.680857404499996,\n    'lng': -79.28682091449052},\n   'sw': {'lat': 43.67185739549999, 'lng': -79.29924148550948}},\n  'totalResults': 4}}"
                    }, 
                    "output_type": "execute_result"
                }
            ], 
            "source": "neighborhood_latitude = toronto_data.loc[0, 'Latitude'] # neighborhood latitude value\nneighborhood_longitude = toronto_data.loc[0, 'Longitude'] # neighborhood longitude value\n\nneighborhood_name = toronto_data.loc[0, 'Neighborhood'] # neighborhood name\n\nprint('Latitude and longitude values of {} are {}, {}.'.format(neighborhood_name, \n                                                               neighborhood_latitude, \n                                                               neighborhood_longitude))\n\nLIMIT = 100\nradius = 500\n\nurl = 'https://api.foursquare.com/v2/venues/explore?client_id={}&client_secret={}&v={}&ll={},{},&radius={}&limit={}'.format(\n    CLIENT_ID,\n    CLIENT_SECRET,\n    VERSION,\n    neighborhood_latitude,\n    neighborhood_longitude,\n    radius,\n    LIMIT)\n\nurl\n\nresults = requests.get(url).json()\nresults"
        }, 
        {
            "execution_count": 116, 
            "cell_type": "code", 
            "metadata": {}, 
            "outputs": [], 
            "source": "  def getNearbyVenues(names, latitudes, longitudes, radius=500):\n    \n    venues_list=[]\n    for name, lat, lng in zip(names, latitudes, longitudes):\n        print(name)\n            \n        # create the API request URL\n        url = 'https://api.foursquare.com/v2/venues/explore?&client_id={}&client_secret={}&v={}&ll={},{}&radius={}&limit={}'.format(\n            CLIENT_ID, \n            CLIENT_SECRET, \n            VERSION, \n            lat, \n            lng, \n            radius, \n            LIMIT)\n            \n        # make the GET request\n        results = requests.get(url).json()[\"response\"]['groups'][0]['items']\n        \n        # return only relevant information for each nearby venue\n        venues_list.append([(\n            name, \n            lat, \n            lng, \n            v['venue']['name'], \n            v['venue']['location']['lat'], \n            v['venue']['location']['lng'],  \n            v['venue']['categories'][0]['name']) for v in results])\n\n    nearby_venues = pd.DataFrame([item for venue_list in venues_list for item in venue_list])\n    nearby_venues.columns = ['Neighborhood', \n                  'Neighborhood Latitude', \n                  'Neighborhood Longitude', \n                  'Venue', \n                  'Venue Latitude', \n                  'Venue Longitude', \n                  'Venue Category']\n    \n    return(nearby_venues)"
        }, 
        {
            "source": "**Let's get all the venues for each of the Toronto core boroughs**", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "execution_count": 121, 
            "cell_type": "code", 
            "metadata": {}, 
            "outputs": [
                {
                    "output_type": "stream", 
                    "name": "stdout", 
                    "text": "The Beaches\nThe Danforth West, Riverdale\nThe Beaches West, India Bazaar\nStudio District\nLawrence Park\nDavisville North\nNorth Toronto West\nDavisville\nMoore Park, Summerhill East\nDeer Park, Forest Hill SE, Rathnelly, South Hill, Summerhill West\nRosedale\nCabbagetown, St. James Town\nChurch and Wellesley\nHarbourfront, Regent Park\nRyerson, Garden District\nSt. James Town\nBerczy Park\nCentral Bay Street\nAdelaide, King, Richmond\nHarbourfront East, Toronto Islands, Union Station\nDesign Exchange, Toronto Dominion Centre\nCommerce Court, Victoria Hotel\nRoselawn\nForest Hill North, Forest Hill West\nThe Annex, North Midtown, Yorkville\nHarbord, University of Toronto\nChinatown, Grange Park, Kensington Market\nCN Tower, Bathurst Quay, Island airport, Harbourfront West, King and Spadina, Railway Lands, South Niagara\nStn A PO Boxes 25 The Esplanade\nFirst Canadian Place, Underground city\nChristie\nDovercourt Village, Dufferin\nLittle Portugal, Trinity\nBrockton, Exhibition Place, Parkdale Village\nHigh Park, The Junction South\nParkdale, Roncesvalles\nRunnymede, Swansea\nBusiness reply mail Processing Centre969 Eastern\n"
                }
            ], 
            "source": "toronto_venues = getNearbyVenues(names=toronto_data['Neighborhood'],\n                                   latitudes=toronto_data['Latitude'],\n                                   longitudes=toronto_data['Longitude']\n                                  )"
        }, 
        {
            "source": "**Let's check how many categories there are in total and how many venues were returned for each neighborhood**", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "execution_count": 127, 
            "cell_type": "code", 
            "metadata": {}, 
            "outputs": [
                {
                    "output_type": "stream", 
                    "name": "stdout", 
                    "text": "There are 232 uniques categories.\n"
                }, 
                {
                    "execution_count": 127, 
                    "metadata": {}, 
                    "data": {
                        "text/html": "<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Neighborhood Latitude</th>\n      <th>Neighborhood Longitude</th>\n      <th>Venue</th>\n      <th>Venue Latitude</th>\n      <th>Venue Longitude</th>\n      <th>Venue Category</th>\n    </tr>\n    <tr>\n      <th>Neighborhood</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>Adelaide, King, Richmond</th>\n      <td>100</td>\n      <td>100</td>\n      <td>100</td>\n      <td>100</td>\n      <td>100</td>\n      <td>100</td>\n    </tr>\n    <tr>\n      <th>Berczy Park</th>\n      <td>55</td>\n      <td>55</td>\n      <td>55</td>\n      <td>55</td>\n      <td>55</td>\n      <td>55</td>\n    </tr>\n    <tr>\n      <th>Brockton, Exhibition Place, Parkdale Village</th>\n      <td>19</td>\n      <td>19</td>\n      <td>19</td>\n      <td>19</td>\n      <td>19</td>\n      <td>19</td>\n    </tr>\n    <tr>\n      <th>Business reply mail Processing Centre969 Eastern</th>\n      <td>18</td>\n      <td>18</td>\n      <td>18</td>\n      <td>18</td>\n      <td>18</td>\n      <td>18</td>\n    </tr>\n    <tr>\n      <th>CN Tower, Bathurst Quay, Island airport, Harbourfront West, King and Spadina, Railway Lands, South Niagara</th>\n      <td>12</td>\n      <td>12</td>\n      <td>12</td>\n      <td>12</td>\n      <td>12</td>\n      <td>12</td>\n    </tr>\n    <tr>\n      <th>Cabbagetown, St. James Town</th>\n      <td>48</td>\n      <td>48</td>\n      <td>48</td>\n      <td>48</td>\n      <td>48</td>\n      <td>48</td>\n    </tr>\n    <tr>\n      <th>Central Bay Street</th>\n      <td>80</td>\n      <td>80</td>\n      <td>80</td>\n      <td>80</td>\n      <td>80</td>\n      <td>80</td>\n    </tr>\n    <tr>\n      <th>Chinatown, Grange Park, Kensington Market</th>\n      <td>98</td>\n      <td>98</td>\n      <td>98</td>\n      <td>98</td>\n      <td>98</td>\n      <td>98</td>\n    </tr>\n    <tr>\n      <th>Christie</th>\n      <td>16</td>\n      <td>16</td>\n      <td>16</td>\n      <td>16</td>\n      <td>16</td>\n      <td>16</td>\n    </tr>\n    <tr>\n      <th>Church and Wellesley</th>\n      <td>88</td>\n      <td>88</td>\n      <td>88</td>\n      <td>88</td>\n      <td>88</td>\n      <td>88</td>\n    </tr>\n    <tr>\n      <th>Commerce Court, Victoria Hotel</th>\n      <td>100</td>\n      <td>100</td>\n      <td>100</td>\n      <td>100</td>\n      <td>100</td>\n      <td>100</td>\n    </tr>\n    <tr>\n      <th>Davisville</th>\n      <td>34</td>\n      <td>34</td>\n      <td>34</td>\n      <td>34</td>\n      <td>34</td>\n      <td>34</td>\n    </tr>\n    <tr>\n      <th>Davisville North</th>\n      <td>9</td>\n      <td>9</td>\n      <td>9</td>\n      <td>9</td>\n      <td>9</td>\n      <td>9</td>\n    </tr>\n    <tr>\n      <th>Deer Park, Forest Hill SE, Rathnelly, South Hill, Summerhill West</th>\n      <td>15</td>\n      <td>15</td>\n      <td>15</td>\n      <td>15</td>\n      <td>15</td>\n      <td>15</td>\n    </tr>\n    <tr>\n      <th>Design Exchange, Toronto Dominion Centre</th>\n      <td>100</td>\n      <td>100</td>\n      <td>100</td>\n      <td>100</td>\n      <td>100</td>\n      <td>100</td>\n    </tr>\n    <tr>\n      <th>Dovercourt Village, Dufferin</th>\n      <td>18</td>\n      <td>18</td>\n      <td>18</td>\n      <td>18</td>\n      <td>18</td>\n      <td>18</td>\n    </tr>\n    <tr>\n      <th>First Canadian Place, Underground city</th>\n      <td>100</td>\n      <td>100</td>\n      <td>100</td>\n      <td>100</td>\n      <td>100</td>\n      <td>100</td>\n    </tr>\n    <tr>\n      <th>Forest Hill North, Forest Hill West</th>\n      <td>4</td>\n      <td>4</td>\n      <td>4</td>\n      <td>4</td>\n      <td>4</td>\n      <td>4</td>\n    </tr>\n    <tr>\n      <th>Harbord, University of Toronto</th>\n      <td>34</td>\n      <td>34</td>\n      <td>34</td>\n      <td>34</td>\n      <td>34</td>\n      <td>34</td>\n    </tr>\n    <tr>\n      <th>Harbourfront East, Toronto Islands, Union Station</th>\n      <td>100</td>\n      <td>100</td>\n      <td>100</td>\n      <td>100</td>\n      <td>100</td>\n      <td>100</td>\n    </tr>\n    <tr>\n      <th>Harbourfront, Regent Park</th>\n      <td>49</td>\n      <td>49</td>\n      <td>49</td>\n      <td>49</td>\n      <td>49</td>\n      <td>49</td>\n    </tr>\n    <tr>\n      <th>High Park, The Junction South</th>\n      <td>24</td>\n      <td>24</td>\n      <td>24</td>\n      <td>24</td>\n      <td>24</td>\n      <td>24</td>\n    </tr>\n    <tr>\n      <th>Lawrence Park</th>\n      <td>5</td>\n      <td>5</td>\n      <td>5</td>\n      <td>5</td>\n      <td>5</td>\n      <td>5</td>\n    </tr>\n    <tr>\n      <th>Little Portugal, Trinity</th>\n      <td>63</td>\n      <td>63</td>\n      <td>63</td>\n      <td>63</td>\n      <td>63</td>\n      <td>63</td>\n    </tr>\n    <tr>\n      <th>Moore Park, Summerhill East</th>\n      <td>4</td>\n      <td>4</td>\n      <td>4</td>\n      <td>4</td>\n      <td>4</td>\n      <td>4</td>\n    </tr>\n    <tr>\n      <th>North Toronto West</th>\n      <td>18</td>\n      <td>18</td>\n      <td>18</td>\n      <td>18</td>\n      <td>18</td>\n      <td>18</td>\n    </tr>\n    <tr>\n      <th>Parkdale, Roncesvalles</th>\n      <td>16</td>\n      <td>16</td>\n      <td>16</td>\n      <td>16</td>\n      <td>16</td>\n      <td>16</td>\n    </tr>\n    <tr>\n      <th>Rosedale</th>\n      <td>4</td>\n      <td>4</td>\n      <td>4</td>\n      <td>4</td>\n      <td>4</td>\n      <td>4</td>\n    </tr>\n    <tr>\n      <th>Roselawn</th>\n      <td>2</td>\n      <td>2</td>\n      <td>2</td>\n      <td>2</td>\n      <td>2</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>Runnymede, Swansea</th>\n      <td>38</td>\n      <td>38</td>\n      <td>38</td>\n      <td>38</td>\n      <td>38</td>\n      <td>38</td>\n    </tr>\n    <tr>\n      <th>Ryerson, Garden District</th>\n      <td>100</td>\n      <td>100</td>\n      <td>100</td>\n      <td>100</td>\n      <td>100</td>\n      <td>100</td>\n    </tr>\n    <tr>\n      <th>St. James Town</th>\n      <td>100</td>\n      <td>100</td>\n      <td>100</td>\n      <td>100</td>\n      <td>100</td>\n      <td>100</td>\n    </tr>\n    <tr>\n      <th>Stn A PO Boxes 25 The Esplanade</th>\n      <td>96</td>\n      <td>96</td>\n      <td>96</td>\n      <td>96</td>\n      <td>96</td>\n      <td>96</td>\n    </tr>\n    <tr>\n      <th>Studio District</th>\n      <td>40</td>\n      <td>40</td>\n      <td>40</td>\n      <td>40</td>\n      <td>40</td>\n      <td>40</td>\n    </tr>\n    <tr>\n      <th>The Annex, North Midtown, Yorkville</th>\n      <td>24</td>\n      <td>24</td>\n      <td>24</td>\n      <td>24</td>\n      <td>24</td>\n      <td>24</td>\n    </tr>\n    <tr>\n      <th>The Beaches</th>\n      <td>4</td>\n      <td>4</td>\n      <td>4</td>\n      <td>4</td>\n      <td>4</td>\n      <td>4</td>\n    </tr>\n    <tr>\n      <th>The Beaches West, India Bazaar</th>\n      <td>18</td>\n      <td>18</td>\n      <td>18</td>\n      <td>18</td>\n      <td>18</td>\n      <td>18</td>\n    </tr>\n    <tr>\n      <th>The Danforth West, Riverdale</th>\n      <td>42</td>\n      <td>42</td>\n      <td>42</td>\n      <td>42</td>\n      <td>42</td>\n      <td>42</td>\n    </tr>\n  </tbody>\n</table>\n</div>", 
                        "text/plain": "                                                    Neighborhood Latitude  \\\nNeighborhood                                                                \nAdelaide, King, Richmond                                              100   \nBerczy Park                                                            55   \nBrockton, Exhibition Place, Parkdale Village                           19   \nBusiness reply mail Processing Centre969 Eastern                       18   \nCN Tower, Bathurst Quay, Island airport, Harbou...                     12   \nCabbagetown, St. James Town                                            48   \nCentral Bay Street                                                     80   \nChinatown, Grange Park, Kensington Market                              98   \nChristie                                                               16   \nChurch and Wellesley                                                   88   \nCommerce Court, Victoria Hotel                                        100   \nDavisville                                                             34   \nDavisville North                                                        9   \nDeer Park, Forest Hill SE, Rathnelly, South Hil...                     15   \nDesign Exchange, Toronto Dominion Centre                              100   \nDovercourt Village, Dufferin                                           18   \nFirst Canadian Place, Underground city                                100   \nForest Hill North, Forest Hill West                                     4   \nHarbord, University of Toronto                                         34   \nHarbourfront East, Toronto Islands, Union Station                     100   \nHarbourfront, Regent Park                                              49   \nHigh Park, The Junction South                                          24   \nLawrence Park                                                           5   \nLittle Portugal, Trinity                                               63   \nMoore Park, Summerhill East                                             4   \nNorth Toronto West                                                     18   \nParkdale, Roncesvalles                                                 16   \nRosedale                                                                4   \nRoselawn                                                                2   \nRunnymede, Swansea                                                     38   \nRyerson, Garden District                                              100   \nSt. James Town                                                        100   \nStn A PO Boxes 25 The Esplanade                                        96   \nStudio District                                                        40   \nThe Annex, North Midtown, Yorkville                                    24   \nThe Beaches                                                             4   \nThe Beaches West, India Bazaar                                         18   \nThe Danforth West, Riverdale                                           42   \n\n                                                    Neighborhood Longitude  \\\nNeighborhood                                                                 \nAdelaide, King, Richmond                                               100   \nBerczy Park                                                             55   \nBrockton, Exhibition Place, Parkdale Village                            19   \nBusiness reply mail Processing Centre969 Eastern                        18   \nCN Tower, Bathurst Quay, Island airport, Harbou...                      12   \nCabbagetown, St. James Town                                             48   \nCentral Bay Street                                                      80   \nChinatown, Grange Park, Kensington Market                               98   \nChristie                                                                16   \nChurch and Wellesley                                                    88   \nCommerce Court, Victoria Hotel                                         100   \nDavisville                                                              34   \nDavisville North                                                         9   \nDeer Park, Forest Hill SE, Rathnelly, South Hil...                      15   \nDesign Exchange, Toronto Dominion Centre                               100   \nDovercourt Village, Dufferin                                            18   \nFirst Canadian Place, Underground city                                 100   \nForest Hill North, Forest Hill West                                      4   \nHarbord, University of Toronto                                          34   \nHarbourfront East, Toronto Islands, Union Station                      100   \nHarbourfront, Regent Park                                               49   \nHigh Park, The Junction South                                           24   \nLawrence Park                                                            5   \nLittle Portugal, Trinity                                                63   \nMoore Park, Summerhill East                                              4   \nNorth Toronto West                                                      18   \nParkdale, Roncesvalles                                                  16   \nRosedale                                                                 4   \nRoselawn                                                                 2   \nRunnymede, Swansea                                                      38   \nRyerson, Garden District                                               100   \nSt. James Town                                                         100   \nStn A PO Boxes 25 The Esplanade                                         96   \nStudio District                                                         40   \nThe Annex, North Midtown, Yorkville                                     24   \nThe Beaches                                                              4   \nThe Beaches West, India Bazaar                                          18   \nThe Danforth West, Riverdale                                            42   \n\n                                                    Venue  Venue Latitude  \\\nNeighborhood                                                                \nAdelaide, King, Richmond                              100             100   \nBerczy Park                                            55              55   \nBrockton, Exhibition Place, Parkdale Village           19              19   \nBusiness reply mail Processing Centre969 Eastern       18              18   \nCN Tower, Bathurst Quay, Island airport, Harbou...     12              12   \nCabbagetown, St. James Town                            48              48   \nCentral Bay Street                                     80              80   \nChinatown, Grange Park, Kensington Market              98              98   \nChristie                                               16              16   \nChurch and Wellesley                                   88              88   \nCommerce Court, Victoria Hotel                        100             100   \nDavisville                                             34              34   \nDavisville North                                        9               9   \nDeer Park, Forest Hill SE, Rathnelly, South Hil...     15              15   \nDesign Exchange, Toronto Dominion Centre              100             100   \nDovercourt Village, Dufferin                           18              18   \nFirst Canadian Place, Underground city                100             100   \nForest Hill North, Forest Hill West                     4               4   \nHarbord, University of Toronto                         34              34   \nHarbourfront East, Toronto Islands, Union Station     100             100   \nHarbourfront, Regent Park                              49              49   \nHigh Park, The Junction South                          24              24   \nLawrence Park                                           5               5   \nLittle Portugal, Trinity                               63              63   \nMoore Park, Summerhill East                             4               4   \nNorth Toronto West                                     18              18   \nParkdale, Roncesvalles                                 16              16   \nRosedale                                                4               4   \nRoselawn                                                2               2   \nRunnymede, Swansea                                     38              38   \nRyerson, Garden District                              100             100   \nSt. James Town                                        100             100   \nStn A PO Boxes 25 The Esplanade                        96              96   \nStudio District                                        40              40   \nThe Annex, North Midtown, Yorkville                    24              24   \nThe Beaches                                             4               4   \nThe Beaches West, India Bazaar                         18              18   \nThe Danforth West, Riverdale                           42              42   \n\n                                                    Venue Longitude  \\\nNeighborhood                                                          \nAdelaide, King, Richmond                                        100   \nBerczy Park                                                      55   \nBrockton, Exhibition Place, Parkdale Village                     19   \nBusiness reply mail Processing Centre969 Eastern                 18   \nCN Tower, Bathurst Quay, Island airport, Harbou...               12   \nCabbagetown, St. James Town                                      48   \nCentral Bay Street                                               80   \nChinatown, Grange Park, Kensington Market                        98   \nChristie                                                         16   \nChurch and Wellesley                                             88   \nCommerce Court, Victoria Hotel                                  100   \nDavisville                                                       34   \nDavisville North                                                  9   \nDeer Park, Forest Hill SE, Rathnelly, South Hil...               15   \nDesign Exchange, Toronto Dominion Centre                        100   \nDovercourt Village, Dufferin                                     18   \nFirst Canadian Place, Underground city                          100   \nForest Hill North, Forest Hill West                               4   \nHarbord, University of Toronto                                   34   \nHarbourfront East, Toronto Islands, Union Station               100   \nHarbourfront, Regent Park                                        49   \nHigh Park, The Junction South                                    24   \nLawrence Park                                                     5   \nLittle Portugal, Trinity                                         63   \nMoore Park, Summerhill East                                       4   \nNorth Toronto West                                               18   \nParkdale, Roncesvalles                                           16   \nRosedale                                                          4   \nRoselawn                                                          2   \nRunnymede, Swansea                                               38   \nRyerson, Garden District                                        100   \nSt. James Town                                                  100   \nStn A PO Boxes 25 The Esplanade                                  96   \nStudio District                                                  40   \nThe Annex, North Midtown, Yorkville                              24   \nThe Beaches                                                       4   \nThe Beaches West, India Bazaar                                   18   \nThe Danforth West, Riverdale                                     42   \n\n                                                    Venue Category  \nNeighborhood                                                        \nAdelaide, King, Richmond                                       100  \nBerczy Park                                                     55  \nBrockton, Exhibition Place, Parkdale Village                    19  \nBusiness reply mail Processing Centre969 Eastern                18  \nCN Tower, Bathurst Quay, Island airport, Harbou...              12  \nCabbagetown, St. James Town                                     48  \nCentral Bay Street                                              80  \nChinatown, Grange Park, Kensington Market                       98  \nChristie                                                        16  \nChurch and Wellesley                                            88  \nCommerce Court, Victoria Hotel                                 100  \nDavisville                                                      34  \nDavisville North                                                 9  \nDeer Park, Forest Hill SE, Rathnelly, South Hil...              15  \nDesign Exchange, Toronto Dominion Centre                       100  \nDovercourt Village, Dufferin                                    18  \nFirst Canadian Place, Underground city                         100  \nForest Hill North, Forest Hill West                              4  \nHarbord, University of Toronto                                  34  \nHarbourfront East, Toronto Islands, Union Station              100  \nHarbourfront, Regent Park                                       49  \nHigh Park, The Junction South                                   24  \nLawrence Park                                                    5  \nLittle Portugal, Trinity                                        63  \nMoore Park, Summerhill East                                      4  \nNorth Toronto West                                              18  \nParkdale, Roncesvalles                                          16  \nRosedale                                                         4  \nRoselawn                                                         2  \nRunnymede, Swansea                                              38  \nRyerson, Garden District                                       100  \nSt. James Town                                                 100  \nStn A PO Boxes 25 The Esplanade                                 96  \nStudio District                                                 40  \nThe Annex, North Midtown, Yorkville                             24  \nThe Beaches                                                      4  \nThe Beaches West, India Bazaar                                  18  \nThe Danforth West, Riverdale                                    42  "
                    }, 
                    "output_type": "execute_result"
                }
            ], 
            "source": "print('There are {} uniques categories.'.format(len(toronto_venues['Venue Category'].unique())))\ntoronto_venues.groupby('Neighborhood').count()\n\n"
        }, 
        {
            "execution_count": null, 
            "cell_type": "code", 
            "metadata": {}, 
            "outputs": [], 
            "source": ""
        }, 
        {
            "execution_count": 129, 
            "cell_type": "code", 
            "metadata": {}, 
            "outputs": [
                {
                    "execution_count": 129, 
                    "metadata": {}, 
                    "data": {
                        "text/html": "<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Yoga Studio</th>\n      <th>Adult Boutique</th>\n      <th>Afghan Restaurant</th>\n      <th>Airport</th>\n      <th>Airport Food Court</th>\n      <th>Airport Gate</th>\n      <th>Airport Lounge</th>\n      <th>Airport Service</th>\n      <th>Airport Terminal</th>\n      <th>American Restaurant</th>\n      <th>...</th>\n      <th>Toy / Game Store</th>\n      <th>Trail</th>\n      <th>Train Station</th>\n      <th>Vegetarian / Vegan Restaurant</th>\n      <th>Video Game Store</th>\n      <th>Vietnamese Restaurant</th>\n      <th>Whisky Bar</th>\n      <th>Wine Bar</th>\n      <th>Wings Joint</th>\n      <th>Women's Store</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>...</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>...</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>...</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>...</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>...</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n      <td>0</td>\n    </tr>\n  </tbody>\n</table>\n<p>5 rows \u00d7 232 columns</p>\n</div>", 
                        "text/plain": "   Yoga Studio  Adult Boutique  Afghan Restaurant  Airport  \\\n0            0               0                  0        0   \n1            0               0                  0        0   \n2            0               0                  0        0   \n3            0               0                  0        0   \n4            0               0                  0        0   \n\n   Airport Food Court  Airport Gate  Airport Lounge  Airport Service  \\\n0                   0             0               0                0   \n1                   0             0               0                0   \n2                   0             0               0                0   \n3                   0             0               0                0   \n4                   0             0               0                0   \n\n   Airport Terminal  American Restaurant      ...        Toy / Game Store  \\\n0                 0                    0      ...                       0   \n1                 0                    0      ...                       0   \n2                 0                    0      ...                       0   \n3                 0                    0      ...                       0   \n4                 0                    0      ...                       0   \n\n   Trail  Train Station  Vegetarian / Vegan Restaurant  Video Game Store  \\\n0      0              0                              0                 0   \n1      0              0                              0                 0   \n2      0              0                              0                 0   \n3      0              0                              0                 0   \n4      0              0                              0                 0   \n\n   Vietnamese Restaurant  Whisky Bar  Wine Bar  Wings Joint  Women's Store  \n0                      0           0         0            0              0  \n1                      0           0         0            0              0  \n2                      0           0         0            0              0  \n3                      0           0         0            0              0  \n4                      0           0         0            0              0  \n\n[5 rows x 232 columns]"
                    }, 
                    "output_type": "execute_result"
                }
            ], 
            "source": "# one hot encoding\ntoronto_onehot = pd.get_dummies(toronto_venues[['Venue Category']], prefix=\"\", prefix_sep=\"\")\n\n# add neighborhood column back to dataframe\ntoronto_onehot['Neighborhood'] = toronto_venues['Neighborhood'] \n\n# move neighborhood column to the first column\nfixed_columns = [toronto_onehot.columns[-1]] + list(toronto_onehot.columns[:-1])\ntoronto_onehot = toronto_onehot[fixed_columns]\n\ntoronto_onehot.head()"
        }, 
        {
            "source": "**Let's group rows by neighbourhood and by taking the mean of the frequency of occurrence of each category**", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "execution_count": 130, 
            "cell_type": "code", 
            "metadata": {}, 
            "outputs": [
                {
                    "execution_count": 130, 
                    "metadata": {}, 
                    "data": {
                        "text/html": "<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Neighborhood</th>\n      <th>Yoga Studio</th>\n      <th>Adult Boutique</th>\n      <th>Afghan Restaurant</th>\n      <th>Airport</th>\n      <th>Airport Food Court</th>\n      <th>Airport Gate</th>\n      <th>Airport Lounge</th>\n      <th>Airport Service</th>\n      <th>Airport Terminal</th>\n      <th>...</th>\n      <th>Toy / Game Store</th>\n      <th>Trail</th>\n      <th>Train Station</th>\n      <th>Vegetarian / Vegan Restaurant</th>\n      <th>Video Game Store</th>\n      <th>Vietnamese Restaurant</th>\n      <th>Whisky Bar</th>\n      <th>Wine Bar</th>\n      <th>Wings Joint</th>\n      <th>Women's Store</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Adelaide, King, Richmond</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.00000</td>\n      <td>0.00</td>\n      <td>0.010000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n      <td>0.010000</td>\n      <td>0.000000</td>\n      <td>0.01</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Berczy Park</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.00000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Brockton, Exhibition Place, Parkdale Village</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.00000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>Business reply mail Processing Centre969 Eastern</td>\n      <td>0.055556</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.00000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>CN Tower, Bathurst Quay, Island airport, Harbo...</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.083333</td>\n      <td>0.083333</td>\n      <td>0.083333</td>\n      <td>0.166667</td>\n      <td>0.166667</td>\n      <td>0.166667</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.00000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>Cabbagetown, St. James Town</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.00000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>Central Bay Street</td>\n      <td>0.012500</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.00000</td>\n      <td>0.00</td>\n      <td>0.012500</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n      <td>0.012500</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>Chinatown, Grange Park, Kensington Market</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.00000</td>\n      <td>0.00</td>\n      <td>0.051020</td>\n      <td>0.000000</td>\n      <td>0.051020</td>\n      <td>0.00</td>\n      <td>0.010204</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>Christie</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.00000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>9</th>\n      <td>Church and Wellesley</td>\n      <td>0.011364</td>\n      <td>0.011364</td>\n      <td>0.011364</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.00000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.011364</td>\n      <td>0.011364</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.011364</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>Commerce Court, Victoria Hotel</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.00000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n      <td>0.010000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>11</th>\n      <td>Davisville</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.029412</td>\n      <td>0.00000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>12</th>\n      <td>Davisville North</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.00000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>13</th>\n      <td>Deer Park, Forest Hill SE, Rathnelly, South Hi...</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.00000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.066667</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>14</th>\n      <td>Design Exchange, Toronto Dominion Centre</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.00000</td>\n      <td>0.01</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n      <td>0.010000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>15</th>\n      <td>Dovercourt Village, Dufferin</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.00000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>16</th>\n      <td>First Canadian Place, Underground city</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.00000</td>\n      <td>0.01</td>\n      <td>0.010000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n      <td>0.010000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>17</th>\n      <td>Forest Hill North, Forest Hill West</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.25000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>18</th>\n      <td>Harbord, University of Toronto</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.00000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.029412</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>19</th>\n      <td>Harbourfront East, Toronto Islands, Union Station</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.00000</td>\n      <td>0.01</td>\n      <td>0.010000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.01</td>\n      <td>0.010000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>20</th>\n      <td>Harbourfront, Regent Park</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.00000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>21</th>\n      <td>High Park, The Junction South</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.00000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>22</th>\n      <td>Lawrence Park</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.00000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>23</th>\n      <td>Little Portugal, Trinity</td>\n      <td>0.015873</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.00000</td>\n      <td>0.00</td>\n      <td>0.015873</td>\n      <td>0.000000</td>\n      <td>0.031746</td>\n      <td>0.00</td>\n      <td>0.015873</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>24</th>\n      <td>Moore Park, Summerhill East</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.00000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>25</th>\n      <td>North Toronto West</td>\n      <td>0.055556</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.055556</td>\n      <td>0.00000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>26</th>\n      <td>Parkdale, Roncesvalles</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.00000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>27</th>\n      <td>Rosedale</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.25000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>28</th>\n      <td>Roselawn</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.00000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>29</th>\n      <td>Runnymede, Swansea</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.00000</td>\n      <td>0.00</td>\n      <td>0.026316</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>30</th>\n      <td>Ryerson, Garden District</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.010000</td>\n      <td>0.00000</td>\n      <td>0.00</td>\n      <td>0.010000</td>\n      <td>0.000000</td>\n      <td>0.010000</td>\n      <td>0.00</td>\n      <td>0.010000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>31</th>\n      <td>St. James Town</td>\n      <td>0.010000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.00000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.01</td>\n    </tr>\n    <tr>\n      <th>32</th>\n      <td>Stn A PO Boxes 25 The Esplanade</td>\n      <td>0.010417</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.00000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>33</th>\n      <td>Studio District</td>\n      <td>0.025000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.00000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>34</th>\n      <td>The Annex, North Midtown, Yorkville</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.00000</td>\n      <td>0.00</td>\n      <td>0.041667</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>35</th>\n      <td>The Beaches</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.00000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>36</th>\n      <td>The Beaches West, India Bazaar</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.00000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n    <tr>\n      <th>37</th>\n      <td>The Danforth West, Riverdale</td>\n      <td>0.023810</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>...</td>\n      <td>0.000000</td>\n      <td>0.02381</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.00</td>\n    </tr>\n  </tbody>\n</table>\n<p>38 rows \u00d7 232 columns</p>\n</div>", 
                        "text/plain": "                                         Neighborhood  Yoga Studio  \\\n0                            Adelaide, King, Richmond     0.000000   \n1                                         Berczy Park     0.000000   \n2        Brockton, Exhibition Place, Parkdale Village     0.000000   \n3    Business reply mail Processing Centre969 Eastern     0.055556   \n4   CN Tower, Bathurst Quay, Island airport, Harbo...     0.000000   \n5                         Cabbagetown, St. James Town     0.000000   \n6                                  Central Bay Street     0.012500   \n7           Chinatown, Grange Park, Kensington Market     0.000000   \n8                                            Christie     0.000000   \n9                                Church and Wellesley     0.011364   \n10                     Commerce Court, Victoria Hotel     0.000000   \n11                                         Davisville     0.000000   \n12                                   Davisville North     0.000000   \n13  Deer Park, Forest Hill SE, Rathnelly, South Hi...     0.000000   \n14           Design Exchange, Toronto Dominion Centre     0.000000   \n15                       Dovercourt Village, Dufferin     0.000000   \n16             First Canadian Place, Underground city     0.000000   \n17                Forest Hill North, Forest Hill West     0.000000   \n18                     Harbord, University of Toronto     0.000000   \n19  Harbourfront East, Toronto Islands, Union Station     0.000000   \n20                          Harbourfront, Regent Park     0.000000   \n21                      High Park, The Junction South     0.000000   \n22                                      Lawrence Park     0.000000   \n23                           Little Portugal, Trinity     0.015873   \n24                        Moore Park, Summerhill East     0.000000   \n25                                 North Toronto West     0.055556   \n26                             Parkdale, Roncesvalles     0.000000   \n27                                           Rosedale     0.000000   \n28                                           Roselawn     0.000000   \n29                                 Runnymede, Swansea     0.000000   \n30                           Ryerson, Garden District     0.000000   \n31                                     St. James Town     0.010000   \n32                    Stn A PO Boxes 25 The Esplanade     0.010417   \n33                                    Studio District     0.025000   \n34                The Annex, North Midtown, Yorkville     0.000000   \n35                                        The Beaches     0.000000   \n36                     The Beaches West, India Bazaar     0.000000   \n37                       The Danforth West, Riverdale     0.023810   \n\n    Adult Boutique  Afghan Restaurant   Airport  Airport Food Court  \\\n0         0.000000           0.000000  0.000000            0.000000   \n1         0.000000           0.000000  0.000000            0.000000   \n2         0.000000           0.000000  0.000000            0.000000   \n3         0.000000           0.000000  0.000000            0.000000   \n4         0.000000           0.000000  0.083333            0.083333   \n5         0.000000           0.000000  0.000000            0.000000   \n6         0.000000           0.000000  0.000000            0.000000   \n7         0.000000           0.000000  0.000000            0.000000   \n8         0.000000           0.000000  0.000000            0.000000   \n9         0.011364           0.011364  0.000000            0.000000   \n10        0.000000           0.000000  0.000000            0.000000   \n11        0.000000           0.000000  0.000000            0.000000   \n12        0.000000           0.000000  0.000000            0.000000   \n13        0.000000           0.000000  0.000000            0.000000   \n14        0.000000           0.000000  0.000000            0.000000   \n15        0.000000           0.000000  0.000000            0.000000   \n16        0.000000           0.000000  0.000000            0.000000   \n17        0.000000           0.000000  0.000000            0.000000   \n18        0.000000           0.000000  0.000000            0.000000   \n19        0.000000           0.000000  0.000000            0.000000   \n20        0.000000           0.000000  0.000000            0.000000   \n21        0.000000           0.000000  0.000000            0.000000   \n22        0.000000           0.000000  0.000000            0.000000   \n23        0.000000           0.000000  0.000000            0.000000   \n24        0.000000           0.000000  0.000000            0.000000   \n25        0.000000           0.000000  0.000000            0.000000   \n26        0.000000           0.000000  0.000000            0.000000   \n27        0.000000           0.000000  0.000000            0.000000   \n28        0.000000           0.000000  0.000000            0.000000   \n29        0.000000           0.000000  0.000000            0.000000   \n30        0.000000           0.000000  0.000000            0.000000   \n31        0.000000           0.000000  0.000000            0.000000   \n32        0.000000           0.000000  0.000000            0.000000   \n33        0.000000           0.000000  0.000000            0.000000   \n34        0.000000           0.000000  0.000000            0.000000   \n35        0.000000           0.000000  0.000000            0.000000   \n36        0.000000           0.000000  0.000000            0.000000   \n37        0.000000           0.000000  0.000000            0.000000   \n\n    Airport Gate  Airport Lounge  Airport Service  Airport Terminal  \\\n0       0.000000        0.000000         0.000000          0.000000   \n1       0.000000        0.000000         0.000000          0.000000   \n2       0.000000        0.000000         0.000000          0.000000   \n3       0.000000        0.000000         0.000000          0.000000   \n4       0.083333        0.166667         0.166667          0.166667   \n5       0.000000        0.000000         0.000000          0.000000   \n6       0.000000        0.000000         0.000000          0.000000   \n7       0.000000        0.000000         0.000000          0.000000   \n8       0.000000        0.000000         0.000000          0.000000   \n9       0.000000        0.000000         0.000000          0.000000   \n10      0.000000        0.000000         0.000000          0.000000   \n11      0.000000        0.000000         0.000000          0.000000   \n12      0.000000        0.000000         0.000000          0.000000   \n13      0.000000        0.000000         0.000000          0.000000   \n14      0.000000        0.000000         0.000000          0.000000   \n15      0.000000        0.000000         0.000000          0.000000   \n16      0.000000        0.000000         0.000000          0.000000   \n17      0.000000        0.000000         0.000000          0.000000   \n18      0.000000        0.000000         0.000000          0.000000   \n19      0.000000        0.000000         0.000000          0.000000   \n20      0.000000        0.000000         0.000000          0.000000   \n21      0.000000        0.000000         0.000000          0.000000   \n22      0.000000        0.000000         0.000000          0.000000   \n23      0.000000        0.000000         0.000000          0.000000   \n24      0.000000        0.000000         0.000000          0.000000   \n25      0.000000        0.000000         0.000000          0.000000   \n26      0.000000        0.000000         0.000000          0.000000   \n27      0.000000        0.000000         0.000000          0.000000   \n28      0.000000        0.000000         0.000000          0.000000   \n29      0.000000        0.000000         0.000000          0.000000   \n30      0.000000        0.000000         0.000000          0.000000   \n31      0.000000        0.000000         0.000000          0.000000   \n32      0.000000        0.000000         0.000000          0.000000   \n33      0.000000        0.000000         0.000000          0.000000   \n34      0.000000        0.000000         0.000000          0.000000   \n35      0.000000        0.000000         0.000000          0.000000   \n36      0.000000        0.000000         0.000000          0.000000   \n37      0.000000        0.000000         0.000000          0.000000   \n\n        ...        Toy / Game Store    Trail  Train Station  \\\n0       ...                0.000000  0.00000           0.00   \n1       ...                0.000000  0.00000           0.00   \n2       ...                0.000000  0.00000           0.00   \n3       ...                0.000000  0.00000           0.00   \n4       ...                0.000000  0.00000           0.00   \n5       ...                0.000000  0.00000           0.00   \n6       ...                0.000000  0.00000           0.00   \n7       ...                0.000000  0.00000           0.00   \n8       ...                0.000000  0.00000           0.00   \n9       ...                0.000000  0.00000           0.00   \n10      ...                0.000000  0.00000           0.00   \n11      ...                0.029412  0.00000           0.00   \n12      ...                0.000000  0.00000           0.00   \n13      ...                0.000000  0.00000           0.00   \n14      ...                0.000000  0.00000           0.01   \n15      ...                0.000000  0.00000           0.00   \n16      ...                0.000000  0.00000           0.01   \n17      ...                0.000000  0.25000           0.00   \n18      ...                0.000000  0.00000           0.00   \n19      ...                0.000000  0.00000           0.01   \n20      ...                0.000000  0.00000           0.00   \n21      ...                0.000000  0.00000           0.00   \n22      ...                0.000000  0.00000           0.00   \n23      ...                0.000000  0.00000           0.00   \n24      ...                0.000000  0.00000           0.00   \n25      ...                0.055556  0.00000           0.00   \n26      ...                0.000000  0.00000           0.00   \n27      ...                0.000000  0.25000           0.00   \n28      ...                0.000000  0.00000           0.00   \n29      ...                0.000000  0.00000           0.00   \n30      ...                0.010000  0.00000           0.00   \n31      ...                0.000000  0.00000           0.00   \n32      ...                0.000000  0.00000           0.00   \n33      ...                0.000000  0.00000           0.00   \n34      ...                0.000000  0.00000           0.00   \n35      ...                0.000000  0.00000           0.00   \n36      ...                0.000000  0.00000           0.00   \n37      ...                0.000000  0.02381           0.00   \n\n    Vegetarian / Vegan Restaurant  Video Game Store  Vietnamese Restaurant  \\\n0                        0.010000          0.000000               0.000000   \n1                        0.000000          0.000000               0.000000   \n2                        0.000000          0.000000               0.000000   \n3                        0.000000          0.000000               0.000000   \n4                        0.000000          0.000000               0.000000   \n5                        0.000000          0.000000               0.000000   \n6                        0.012500          0.000000               0.000000   \n7                        0.051020          0.000000               0.051020   \n8                        0.000000          0.000000               0.000000   \n9                        0.000000          0.011364               0.011364   \n10                       0.000000          0.000000               0.000000   \n11                       0.000000          0.000000               0.000000   \n12                       0.000000          0.000000               0.000000   \n13                       0.000000          0.000000               0.066667   \n14                       0.000000          0.000000               0.000000   \n15                       0.000000          0.000000               0.000000   \n16                       0.010000          0.000000               0.000000   \n17                       0.000000          0.000000               0.000000   \n18                       0.000000          0.029412               0.000000   \n19                       0.010000          0.000000               0.000000   \n20                       0.000000          0.000000               0.000000   \n21                       0.000000          0.000000               0.000000   \n22                       0.000000          0.000000               0.000000   \n23                       0.015873          0.000000               0.031746   \n24                       0.000000          0.000000               0.000000   \n25                       0.000000          0.000000               0.000000   \n26                       0.000000          0.000000               0.000000   \n27                       0.000000          0.000000               0.000000   \n28                       0.000000          0.000000               0.000000   \n29                       0.026316          0.000000               0.000000   \n30                       0.010000          0.000000               0.010000   \n31                       0.000000          0.000000               0.000000   \n32                       0.000000          0.000000               0.000000   \n33                       0.000000          0.000000               0.000000   \n34                       0.041667          0.000000               0.000000   \n35                       0.000000          0.000000               0.000000   \n36                       0.000000          0.000000               0.000000   \n37                       0.000000          0.000000               0.000000   \n\n    Whisky Bar  Wine Bar  Wings Joint  Women's Store  \n0         0.00  0.010000     0.000000           0.01  \n1         0.00  0.000000     0.000000           0.00  \n2         0.00  0.000000     0.000000           0.00  \n3         0.00  0.000000     0.000000           0.00  \n4         0.00  0.000000     0.000000           0.00  \n5         0.00  0.000000     0.000000           0.00  \n6         0.00  0.012500     0.000000           0.00  \n7         0.00  0.010204     0.000000           0.00  \n8         0.00  0.000000     0.000000           0.00  \n9         0.00  0.000000     0.011364           0.00  \n10        0.00  0.010000     0.000000           0.00  \n11        0.00  0.000000     0.000000           0.00  \n12        0.00  0.000000     0.000000           0.00  \n13        0.00  0.000000     0.000000           0.00  \n14        0.00  0.010000     0.000000           0.00  \n15        0.00  0.000000     0.000000           0.00  \n16        0.00  0.010000     0.000000           0.00  \n17        0.00  0.000000     0.000000           0.00  \n18        0.00  0.000000     0.000000           0.00  \n19        0.01  0.010000     0.000000           0.00  \n20        0.00  0.000000     0.000000           0.00  \n21        0.00  0.000000     0.000000           0.00  \n22        0.00  0.000000     0.000000           0.00  \n23        0.00  0.015873     0.000000           0.00  \n24        0.00  0.000000     0.000000           0.00  \n25        0.00  0.000000     0.000000           0.00  \n26        0.00  0.000000     0.000000           0.00  \n27        0.00  0.000000     0.000000           0.00  \n28        0.00  0.000000     0.000000           0.00  \n29        0.00  0.000000     0.000000           0.00  \n30        0.00  0.010000     0.000000           0.00  \n31        0.00  0.000000     0.000000           0.01  \n32        0.00  0.000000     0.000000           0.00  \n33        0.00  0.000000     0.000000           0.00  \n34        0.00  0.000000     0.000000           0.00  \n35        0.00  0.000000     0.000000           0.00  \n36        0.00  0.000000     0.000000           0.00  \n37        0.00  0.000000     0.000000           0.00  \n\n[38 rows x 232 columns]"
                    }, 
                    "output_type": "execute_result"
                }
            ], 
            "source": "toronto_grouped = toronto_onehot.groupby('Neighborhood').mean().reset_index()\ntoronto_grouped"
        }, 
        {
            "source": "**Let's print each neighborhood along with the top 10 most common venues**", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "execution_count": 149, 
            "cell_type": "code", 
            "metadata": {}, 
            "outputs": [
                {
                    "execution_count": 149, 
                    "metadata": {}, 
                    "data": {
                        "text/html": "<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Neighborhood</th>\n      <th>1st Most Common Venue</th>\n      <th>2nd Most Common Venue</th>\n      <th>3rd Most Common Venue</th>\n      <th>4th Most Common Venue</th>\n      <th>5th Most Common Venue</th>\n      <th>6th Most Common Venue</th>\n      <th>7th Most Common Venue</th>\n      <th>8th Most Common Venue</th>\n      <th>9th Most Common Venue</th>\n      <th>10th Most Common Venue</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Adelaide, King, Richmond</td>\n      <td>Coffee Shop</td>\n      <td>Caf\u00e9</td>\n      <td>American Restaurant</td>\n      <td>Steakhouse</td>\n      <td>Thai Restaurant</td>\n      <td>Gym</td>\n      <td>Hotel</td>\n      <td>Cosmetics Shop</td>\n      <td>Restaurant</td>\n      <td>Asian Restaurant</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Berczy Park</td>\n      <td>Coffee Shop</td>\n      <td>Cocktail Bar</td>\n      <td>Restaurant</td>\n      <td>Bakery</td>\n      <td>Steakhouse</td>\n      <td>Seafood Restaurant</td>\n      <td>Farmers Market</td>\n      <td>Caf\u00e9</td>\n      <td>Cheese Shop</td>\n      <td>Pub</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Brockton, Exhibition Place, Parkdale Village</td>\n      <td>Coffee Shop</td>\n      <td>Caf\u00e9</td>\n      <td>Breakfast Spot</td>\n      <td>Performing Arts Venue</td>\n      <td>Gym</td>\n      <td>Furniture / Home Store</td>\n      <td>Pet Store</td>\n      <td>Climbing Gym</td>\n      <td>Caribbean Restaurant</td>\n      <td>Burrito Place</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>Business reply mail Processing Centre969 Eastern</td>\n      <td>Light Rail Station</td>\n      <td>Yoga Studio</td>\n      <td>Auto Workshop</td>\n      <td>Smoke Shop</td>\n      <td>Park</td>\n      <td>Farmers Market</td>\n      <td>Fast Food Restaurant</td>\n      <td>Spa</td>\n      <td>Brewery</td>\n      <td>Burrito Place</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>CN Tower, Bathurst Quay, Island airport, Harbo...</td>\n      <td>Airport Terminal</td>\n      <td>Airport Service</td>\n      <td>Airport Lounge</td>\n      <td>Harbor / Marina</td>\n      <td>Airport Gate</td>\n      <td>Sculpture Garden</td>\n      <td>Boat or Ferry</td>\n      <td>Airport Food Court</td>\n      <td>Airport</td>\n      <td>Donut Shop</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>Cabbagetown, St. James Town</td>\n      <td>Coffee Shop</td>\n      <td>Restaurant</td>\n      <td>Bakery</td>\n      <td>Indian Restaurant</td>\n      <td>Pizza Place</td>\n      <td>Italian Restaurant</td>\n      <td>Pub</td>\n      <td>Caf\u00e9</td>\n      <td>Gift Shop</td>\n      <td>Butcher</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>Central Bay Street</td>\n      <td>Coffee Shop</td>\n      <td>Caf\u00e9</td>\n      <td>Italian Restaurant</td>\n      <td>Bar</td>\n      <td>Ice Cream Shop</td>\n      <td>Burger Joint</td>\n      <td>Sandwich Place</td>\n      <td>Salad Place</td>\n      <td>Bubble Tea Shop</td>\n      <td>Falafel Restaurant</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>Chinatown, Grange Park, Kensington Market</td>\n      <td>Caf\u00e9</td>\n      <td>Bar</td>\n      <td>Vietnamese Restaurant</td>\n      <td>Vegetarian / Vegan Restaurant</td>\n      <td>Bakery</td>\n      <td>Mexican Restaurant</td>\n      <td>Coffee Shop</td>\n      <td>Dumpling Restaurant</td>\n      <td>Chinese Restaurant</td>\n      <td>Dessert Shop</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>Christie</td>\n      <td>Grocery Store</td>\n      <td>Caf\u00e9</td>\n      <td>Park</td>\n      <td>Convenience Store</td>\n      <td>Nightclub</td>\n      <td>Baby Store</td>\n      <td>Diner</td>\n      <td>Athletics &amp; Sports</td>\n      <td>Restaurant</td>\n      <td>Italian Restaurant</td>\n    </tr>\n    <tr>\n      <th>9</th>\n      <td>Church and Wellesley</td>\n      <td>Japanese Restaurant</td>\n      <td>Coffee Shop</td>\n      <td>Sushi Restaurant</td>\n      <td>Gay Bar</td>\n      <td>Burger Joint</td>\n      <td>Restaurant</td>\n      <td>Mediterranean Restaurant</td>\n      <td>Bubble Tea Shop</td>\n      <td>Gastropub</td>\n      <td>Pub</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>Commerce Court, Victoria Hotel</td>\n      <td>Coffee Shop</td>\n      <td>Caf\u00e9</td>\n      <td>Hotel</td>\n      <td>Restaurant</td>\n      <td>American Restaurant</td>\n      <td>Bakery</td>\n      <td>Deli / Bodega</td>\n      <td>Seafood Restaurant</td>\n      <td>Steakhouse</td>\n      <td>Gym</td>\n    </tr>\n    <tr>\n      <th>11</th>\n      <td>Davisville</td>\n      <td>Dessert Shop</td>\n      <td>Sandwich Place</td>\n      <td>Caf\u00e9</td>\n      <td>Italian Restaurant</td>\n      <td>Coffee Shop</td>\n      <td>Pizza Place</td>\n      <td>Seafood Restaurant</td>\n      <td>Sushi Restaurant</td>\n      <td>Burger Joint</td>\n      <td>Japanese Restaurant</td>\n    </tr>\n    <tr>\n      <th>12</th>\n      <td>Davisville North</td>\n      <td>Pizza Place</td>\n      <td>Breakfast Spot</td>\n      <td>Burger Joint</td>\n      <td>Food &amp; Drink Shop</td>\n      <td>Hotel</td>\n      <td>Clothing Store</td>\n      <td>Park</td>\n      <td>Grocery Store</td>\n      <td>Sandwich Place</td>\n      <td>Electronics Store</td>\n    </tr>\n    <tr>\n      <th>13</th>\n      <td>Deer Park, Forest Hill SE, Rathnelly, South Hi...</td>\n      <td>Pub</td>\n      <td>Coffee Shop</td>\n      <td>American Restaurant</td>\n      <td>Supermarket</td>\n      <td>Sushi Restaurant</td>\n      <td>Bagel Shop</td>\n      <td>Fried Chicken Joint</td>\n      <td>Sports Bar</td>\n      <td>Restaurant</td>\n      <td>Pizza Place</td>\n    </tr>\n    <tr>\n      <th>14</th>\n      <td>Design Exchange, Toronto Dominion Centre</td>\n      <td>Coffee Shop</td>\n      <td>Caf\u00e9</td>\n      <td>Hotel</td>\n      <td>American Restaurant</td>\n      <td>Restaurant</td>\n      <td>Gastropub</td>\n      <td>Italian Restaurant</td>\n      <td>Deli / Bodega</td>\n      <td>Gym</td>\n      <td>Japanese Restaurant</td>\n    </tr>\n    <tr>\n      <th>15</th>\n      <td>Dovercourt Village, Dufferin</td>\n      <td>Supermarket</td>\n      <td>Pharmacy</td>\n      <td>Bakery</td>\n      <td>Middle Eastern Restaurant</td>\n      <td>Caf\u00e9</td>\n      <td>Discount Store</td>\n      <td>Bank</td>\n      <td>Bar</td>\n      <td>Music Venue</td>\n      <td>Gym / Fitness Center</td>\n    </tr>\n    <tr>\n      <th>16</th>\n      <td>First Canadian Place, Underground city</td>\n      <td>Caf\u00e9</td>\n      <td>Coffee Shop</td>\n      <td>Hotel</td>\n      <td>Restaurant</td>\n      <td>American Restaurant</td>\n      <td>Steakhouse</td>\n      <td>Gym</td>\n      <td>Gastropub</td>\n      <td>Bakery</td>\n      <td>Seafood Restaurant</td>\n    </tr>\n    <tr>\n      <th>17</th>\n      <td>Forest Hill North, Forest Hill West</td>\n      <td>Park</td>\n      <td>Trail</td>\n      <td>Jewelry Store</td>\n      <td>Sushi Restaurant</td>\n      <td>Women's Store</td>\n      <td>Discount Store</td>\n      <td>Farmers Market</td>\n      <td>Falafel Restaurant</td>\n      <td>Event Space</td>\n      <td>Ethiopian Restaurant</td>\n    </tr>\n    <tr>\n      <th>18</th>\n      <td>Harbord, University of Toronto</td>\n      <td>Caf\u00e9</td>\n      <td>Bar</td>\n      <td>Bakery</td>\n      <td>Bookstore</td>\n      <td>Restaurant</td>\n      <td>Japanese Restaurant</td>\n      <td>Coffee Shop</td>\n      <td>Poutine Place</td>\n      <td>Italian Restaurant</td>\n      <td>Pub</td>\n    </tr>\n    <tr>\n      <th>19</th>\n      <td>Harbourfront East, Toronto Islands, Union Station</td>\n      <td>Coffee Shop</td>\n      <td>Aquarium</td>\n      <td>Hotel</td>\n      <td>Caf\u00e9</td>\n      <td>Pizza Place</td>\n      <td>Italian Restaurant</td>\n      <td>Brewery</td>\n      <td>Restaurant</td>\n      <td>Scenic Lookout</td>\n      <td>Bakery</td>\n    </tr>\n    <tr>\n      <th>20</th>\n      <td>Harbourfront, Regent Park</td>\n      <td>Coffee Shop</td>\n      <td>Park</td>\n      <td>Bakery</td>\n      <td>Caf\u00e9</td>\n      <td>Pub</td>\n      <td>Breakfast Spot</td>\n      <td>Restaurant</td>\n      <td>Theater</td>\n      <td>Mexican Restaurant</td>\n      <td>Health Food Store</td>\n    </tr>\n    <tr>\n      <th>21</th>\n      <td>High Park, The Junction South</td>\n      <td>Caf\u00e9</td>\n      <td>Mexican Restaurant</td>\n      <td>Bar</td>\n      <td>Grocery Store</td>\n      <td>Arts &amp; Crafts Store</td>\n      <td>Music Venue</td>\n      <td>Diner</td>\n      <td>Cajun / Creole Restaurant</td>\n      <td>Sandwich Place</td>\n      <td>Bookstore</td>\n    </tr>\n    <tr>\n      <th>22</th>\n      <td>Lawrence Park</td>\n      <td>Bus Line</td>\n      <td>Park</td>\n      <td>Lake</td>\n      <td>Swim School</td>\n      <td>Dim Sum Restaurant</td>\n      <td>Women's Store</td>\n      <td>Farmers Market</td>\n      <td>Falafel Restaurant</td>\n      <td>Event Space</td>\n      <td>Ethiopian Restaurant</td>\n    </tr>\n    <tr>\n      <th>23</th>\n      <td>Little Portugal, Trinity</td>\n      <td>Bar</td>\n      <td>Men's Store</td>\n      <td>Restaurant</td>\n      <td>Coffee Shop</td>\n      <td>Asian Restaurant</td>\n      <td>Caf\u00e9</td>\n      <td>Pizza Place</td>\n      <td>Cocktail Bar</td>\n      <td>Vietnamese Restaurant</td>\n      <td>Record Shop</td>\n    </tr>\n    <tr>\n      <th>24</th>\n      <td>Moore Park, Summerhill East</td>\n      <td>Restaurant</td>\n      <td>Gym</td>\n      <td>Playground</td>\n      <td>Tennis Court</td>\n      <td>Donut Shop</td>\n      <td>Diner</td>\n      <td>Discount Store</td>\n      <td>Dog Run</td>\n      <td>Doner Restaurant</td>\n      <td>Eastern European Restaurant</td>\n    </tr>\n    <tr>\n      <th>25</th>\n      <td>North Toronto West</td>\n      <td>Coffee Shop</td>\n      <td>Sporting Goods Shop</td>\n      <td>Fast Food Restaurant</td>\n      <td>Mexican Restaurant</td>\n      <td>Miscellaneous Shop</td>\n      <td>Diner</td>\n      <td>Dessert Shop</td>\n      <td>Park</td>\n      <td>Grocery Store</td>\n      <td>Clothing Store</td>\n    </tr>\n    <tr>\n      <th>26</th>\n      <td>Parkdale, Roncesvalles</td>\n      <td>Breakfast Spot</td>\n      <td>Gift Shop</td>\n      <td>Italian Restaurant</td>\n      <td>Dessert Shop</td>\n      <td>Burger Joint</td>\n      <td>Bar</td>\n      <td>Bank</td>\n      <td>Eastern European Restaurant</td>\n      <td>Movie Theater</td>\n      <td>Restaurant</td>\n    </tr>\n    <tr>\n      <th>27</th>\n      <td>Rosedale</td>\n      <td>Park</td>\n      <td>Playground</td>\n      <td>Trail</td>\n      <td>Women's Store</td>\n      <td>Diner</td>\n      <td>Farmers Market</td>\n      <td>Falafel Restaurant</td>\n      <td>Event Space</td>\n      <td>Ethiopian Restaurant</td>\n      <td>Electronics Store</td>\n    </tr>\n    <tr>\n      <th>28</th>\n      <td>Roselawn</td>\n      <td>Garden</td>\n      <td>Music Venue</td>\n      <td>Women's Store</td>\n      <td>Farmers Market</td>\n      <td>Falafel Restaurant</td>\n      <td>Event Space</td>\n      <td>Ethiopian Restaurant</td>\n      <td>Electronics Store</td>\n      <td>Eastern European Restaurant</td>\n      <td>Dumpling Restaurant</td>\n    </tr>\n    <tr>\n      <th>29</th>\n      <td>Runnymede, Swansea</td>\n      <td>Caf\u00e9</td>\n      <td>Coffee Shop</td>\n      <td>Pizza Place</td>\n      <td>Sushi Restaurant</td>\n      <td>Bookstore</td>\n      <td>Italian Restaurant</td>\n      <td>Indie Movie Theater</td>\n      <td>Food</td>\n      <td>Baby Store</td>\n      <td>Diner</td>\n    </tr>\n    <tr>\n      <th>30</th>\n      <td>Ryerson, Garden District</td>\n      <td>Clothing Store</td>\n      <td>Coffee Shop</td>\n      <td>Caf\u00e9</td>\n      <td>Cosmetics Shop</td>\n      <td>Middle Eastern Restaurant</td>\n      <td>Italian Restaurant</td>\n      <td>Restaurant</td>\n      <td>Plaza</td>\n      <td>Diner</td>\n      <td>Pizza Place</td>\n    </tr>\n    <tr>\n      <th>31</th>\n      <td>St. James Town</td>\n      <td>Coffee Shop</td>\n      <td>Restaurant</td>\n      <td>Hotel</td>\n      <td>Caf\u00e9</td>\n      <td>Clothing Store</td>\n      <td>Italian Restaurant</td>\n      <td>Cocktail Bar</td>\n      <td>Bakery</td>\n      <td>Cosmetics Shop</td>\n      <td>Gastropub</td>\n    </tr>\n    <tr>\n      <th>32</th>\n      <td>Stn A PO Boxes 25 The Esplanade</td>\n      <td>Coffee Shop</td>\n      <td>Restaurant</td>\n      <td>Seafood Restaurant</td>\n      <td>Caf\u00e9</td>\n      <td>Cocktail Bar</td>\n      <td>Pub</td>\n      <td>Hotel</td>\n      <td>Italian Restaurant</td>\n      <td>Bakery</td>\n      <td>Breakfast Spot</td>\n    </tr>\n    <tr>\n      <th>33</th>\n      <td>Studio District</td>\n      <td>Caf\u00e9</td>\n      <td>Coffee Shop</td>\n      <td>Italian Restaurant</td>\n      <td>American Restaurant</td>\n      <td>Music Store</td>\n      <td>Bakery</td>\n      <td>Bookstore</td>\n      <td>Latin American Restaurant</td>\n      <td>Fish Market</td>\n      <td>Juice Bar</td>\n    </tr>\n    <tr>\n      <th>34</th>\n      <td>The Annex, North Midtown, Yorkville</td>\n      <td>Coffee Shop</td>\n      <td>Caf\u00e9</td>\n      <td>Sandwich Place</td>\n      <td>Pizza Place</td>\n      <td>Pharmacy</td>\n      <td>Indian Restaurant</td>\n      <td>Cosmetics Shop</td>\n      <td>Pub</td>\n      <td>Burger Joint</td>\n      <td>Liquor Store</td>\n    </tr>\n    <tr>\n      <th>35</th>\n      <td>The Beaches</td>\n      <td>Coffee Shop</td>\n      <td>Pub</td>\n      <td>Asian Restaurant</td>\n      <td>Women's Store</td>\n      <td>Discount Store</td>\n      <td>Fast Food Restaurant</td>\n      <td>Farmers Market</td>\n      <td>Falafel Restaurant</td>\n      <td>Event Space</td>\n      <td>Ethiopian Restaurant</td>\n    </tr>\n    <tr>\n      <th>36</th>\n      <td>The Beaches West, India Bazaar</td>\n      <td>Park</td>\n      <td>Burger Joint</td>\n      <td>Sushi Restaurant</td>\n      <td>Steakhouse</td>\n      <td>Ice Cream Shop</td>\n      <td>Pub</td>\n      <td>Movie Theater</td>\n      <td>Burrito Place</td>\n      <td>Sandwich Place</td>\n      <td>Fish &amp; Chips Shop</td>\n    </tr>\n    <tr>\n      <th>37</th>\n      <td>The Danforth West, Riverdale</td>\n      <td>Greek Restaurant</td>\n      <td>Coffee Shop</td>\n      <td>Ice Cream Shop</td>\n      <td>Bookstore</td>\n      <td>Italian Restaurant</td>\n      <td>Health Food Store</td>\n      <td>Furniture / Home Store</td>\n      <td>Pub</td>\n      <td>Pizza Place</td>\n      <td>Liquor Store</td>\n    </tr>\n  </tbody>\n</table>\n</div>", 
                        "text/plain": "                                         Neighborhood 1st Most Common Venue  \\\n0                            Adelaide, King, Richmond           Coffee Shop   \n1                                         Berczy Park           Coffee Shop   \n2        Brockton, Exhibition Place, Parkdale Village           Coffee Shop   \n3    Business reply mail Processing Centre969 Eastern    Light Rail Station   \n4   CN Tower, Bathurst Quay, Island airport, Harbo...      Airport Terminal   \n5                         Cabbagetown, St. James Town           Coffee Shop   \n6                                  Central Bay Street           Coffee Shop   \n7           Chinatown, Grange Park, Kensington Market                  Caf\u00e9   \n8                                            Christie         Grocery Store   \n9                                Church and Wellesley   Japanese Restaurant   \n10                     Commerce Court, Victoria Hotel           Coffee Shop   \n11                                         Davisville          Dessert Shop   \n12                                   Davisville North           Pizza Place   \n13  Deer Park, Forest Hill SE, Rathnelly, South Hi...                   Pub   \n14           Design Exchange, Toronto Dominion Centre           Coffee Shop   \n15                       Dovercourt Village, Dufferin           Supermarket   \n16             First Canadian Place, Underground city                  Caf\u00e9   \n17                Forest Hill North, Forest Hill West                  Park   \n18                     Harbord, University of Toronto                  Caf\u00e9   \n19  Harbourfront East, Toronto Islands, Union Station           Coffee Shop   \n20                          Harbourfront, Regent Park           Coffee Shop   \n21                      High Park, The Junction South                  Caf\u00e9   \n22                                      Lawrence Park              Bus Line   \n23                           Little Portugal, Trinity                   Bar   \n24                        Moore Park, Summerhill East            Restaurant   \n25                                 North Toronto West           Coffee Shop   \n26                             Parkdale, Roncesvalles        Breakfast Spot   \n27                                           Rosedale                  Park   \n28                                           Roselawn                Garden   \n29                                 Runnymede, Swansea                  Caf\u00e9   \n30                           Ryerson, Garden District        Clothing Store   \n31                                     St. James Town           Coffee Shop   \n32                    Stn A PO Boxes 25 The Esplanade           Coffee Shop   \n33                                    Studio District                  Caf\u00e9   \n34                The Annex, North Midtown, Yorkville           Coffee Shop   \n35                                        The Beaches           Coffee Shop   \n36                     The Beaches West, India Bazaar                  Park   \n37                       The Danforth West, Riverdale      Greek Restaurant   \n\n   2nd Most Common Venue  3rd Most Common Venue  \\\n0                   Caf\u00e9    American Restaurant   \n1           Cocktail Bar             Restaurant   \n2                   Caf\u00e9         Breakfast Spot   \n3            Yoga Studio          Auto Workshop   \n4        Airport Service         Airport Lounge   \n5             Restaurant                 Bakery   \n6                   Caf\u00e9     Italian Restaurant   \n7                    Bar  Vietnamese Restaurant   \n8                   Caf\u00e9                   Park   \n9            Coffee Shop       Sushi Restaurant   \n10                  Caf\u00e9                  Hotel   \n11        Sandwich Place                   Caf\u00e9   \n12        Breakfast Spot           Burger Joint   \n13           Coffee Shop    American Restaurant   \n14                  Caf\u00e9                  Hotel   \n15              Pharmacy                 Bakery   \n16           Coffee Shop                  Hotel   \n17                 Trail          Jewelry Store   \n18                   Bar                 Bakery   \n19              Aquarium                  Hotel   \n20                  Park                 Bakery   \n21    Mexican Restaurant                    Bar   \n22                  Park                   Lake   \n23           Men's Store             Restaurant   \n24                   Gym             Playground   \n25   Sporting Goods Shop   Fast Food Restaurant   \n26             Gift Shop     Italian Restaurant   \n27            Playground                  Trail   \n28           Music Venue          Women's Store   \n29           Coffee Shop            Pizza Place   \n30           Coffee Shop                   Caf\u00e9   \n31            Restaurant                  Hotel   \n32            Restaurant     Seafood Restaurant   \n33           Coffee Shop     Italian Restaurant   \n34                  Caf\u00e9         Sandwich Place   \n35                   Pub       Asian Restaurant   \n36          Burger Joint       Sushi Restaurant   \n37           Coffee Shop         Ice Cream Shop   \n\n            4th Most Common Venue      5th Most Common Venue  \\\n0                      Steakhouse            Thai Restaurant   \n1                          Bakery                 Steakhouse   \n2           Performing Arts Venue                        Gym   \n3                      Smoke Shop                       Park   \n4                 Harbor / Marina               Airport Gate   \n5               Indian Restaurant                Pizza Place   \n6                             Bar             Ice Cream Shop   \n7   Vegetarian / Vegan Restaurant                     Bakery   \n8               Convenience Store                  Nightclub   \n9                         Gay Bar               Burger Joint   \n10                     Restaurant        American Restaurant   \n11             Italian Restaurant                Coffee Shop   \n12              Food & Drink Shop                      Hotel   \n13                    Supermarket           Sushi Restaurant   \n14            American Restaurant                 Restaurant   \n15      Middle Eastern Restaurant                       Caf\u00e9   \n16                     Restaurant        American Restaurant   \n17               Sushi Restaurant              Women's Store   \n18                      Bookstore                 Restaurant   \n19                           Caf\u00e9                Pizza Place   \n20                           Caf\u00e9                        Pub   \n21                  Grocery Store        Arts & Crafts Store   \n22                    Swim School         Dim Sum Restaurant   \n23                    Coffee Shop           Asian Restaurant   \n24                   Tennis Court                 Donut Shop   \n25             Mexican Restaurant         Miscellaneous Shop   \n26                   Dessert Shop               Burger Joint   \n27                  Women's Store                      Diner   \n28                 Farmers Market         Falafel Restaurant   \n29               Sushi Restaurant                  Bookstore   \n30                 Cosmetics Shop  Middle Eastern Restaurant   \n31                           Caf\u00e9             Clothing Store   \n32                           Caf\u00e9               Cocktail Bar   \n33            American Restaurant                Music Store   \n34                    Pizza Place                   Pharmacy   \n35                  Women's Store             Discount Store   \n36                     Steakhouse             Ice Cream Shop   \n37                      Bookstore         Italian Restaurant   \n\n     6th Most Common Venue     7th Most Common Venue  \\\n0                      Gym                     Hotel   \n1       Seafood Restaurant            Farmers Market   \n2   Furniture / Home Store                 Pet Store   \n3           Farmers Market      Fast Food Restaurant   \n4         Sculpture Garden             Boat or Ferry   \n5       Italian Restaurant                       Pub   \n6             Burger Joint            Sandwich Place   \n7       Mexican Restaurant               Coffee Shop   \n8               Baby Store                     Diner   \n9               Restaurant  Mediterranean Restaurant   \n10                  Bakery             Deli / Bodega   \n11             Pizza Place        Seafood Restaurant   \n12          Clothing Store                      Park   \n13              Bagel Shop       Fried Chicken Joint   \n14               Gastropub        Italian Restaurant   \n15          Discount Store                      Bank   \n16              Steakhouse                       Gym   \n17          Discount Store            Farmers Market   \n18     Japanese Restaurant               Coffee Shop   \n19      Italian Restaurant                   Brewery   \n20          Breakfast Spot                Restaurant   \n21             Music Venue                     Diner   \n22           Women's Store            Farmers Market   \n23                    Caf\u00e9               Pizza Place   \n24                   Diner            Discount Store   \n25                   Diner              Dessert Shop   \n26                     Bar                      Bank   \n27          Farmers Market        Falafel Restaurant   \n28             Event Space      Ethiopian Restaurant   \n29      Italian Restaurant       Indie Movie Theater   \n30      Italian Restaurant                Restaurant   \n31      Italian Restaurant              Cocktail Bar   \n32                     Pub                     Hotel   \n33                  Bakery                 Bookstore   \n34       Indian Restaurant            Cosmetics Shop   \n35    Fast Food Restaurant            Farmers Market   \n36                     Pub             Movie Theater   \n37       Health Food Store    Furniture / Home Store   \n\n          8th Most Common Venue        9th Most Common Venue  \\\n0                Cosmetics Shop                   Restaurant   \n1                          Caf\u00e9                  Cheese Shop   \n2                  Climbing Gym         Caribbean Restaurant   \n3                           Spa                      Brewery   \n4            Airport Food Court                      Airport   \n5                          Caf\u00e9                    Gift Shop   \n6                   Salad Place              Bubble Tea Shop   \n7           Dumpling Restaurant           Chinese Restaurant   \n8            Athletics & Sports                   Restaurant   \n9               Bubble Tea Shop                    Gastropub   \n10           Seafood Restaurant                   Steakhouse   \n11             Sushi Restaurant                 Burger Joint   \n12                Grocery Store               Sandwich Place   \n13                   Sports Bar                   Restaurant   \n14                Deli / Bodega                          Gym   \n15                          Bar                  Music Venue   \n16                    Gastropub                       Bakery   \n17           Falafel Restaurant                  Event Space   \n18                Poutine Place           Italian Restaurant   \n19                   Restaurant               Scenic Lookout   \n20                      Theater           Mexican Restaurant   \n21    Cajun / Creole Restaurant               Sandwich Place   \n22           Falafel Restaurant                  Event Space   \n23                 Cocktail Bar        Vietnamese Restaurant   \n24                      Dog Run             Doner Restaurant   \n25                         Park                Grocery Store   \n26  Eastern European Restaurant                Movie Theater   \n27                  Event Space         Ethiopian Restaurant   \n28            Electronics Store  Eastern European Restaurant   \n29                         Food                   Baby Store   \n30                        Plaza                        Diner   \n31                       Bakery               Cosmetics Shop   \n32           Italian Restaurant                       Bakery   \n33    Latin American Restaurant                  Fish Market   \n34                          Pub                 Burger Joint   \n35           Falafel Restaurant                  Event Space   \n36                Burrito Place               Sandwich Place   \n37                          Pub                  Pizza Place   \n\n         10th Most Common Venue  \n0              Asian Restaurant  \n1                           Pub  \n2                 Burrito Place  \n3                 Burrito Place  \n4                    Donut Shop  \n5                       Butcher  \n6            Falafel Restaurant  \n7                  Dessert Shop  \n8            Italian Restaurant  \n9                           Pub  \n10                          Gym  \n11          Japanese Restaurant  \n12            Electronics Store  \n13                  Pizza Place  \n14          Japanese Restaurant  \n15         Gym / Fitness Center  \n16           Seafood Restaurant  \n17         Ethiopian Restaurant  \n18                          Pub  \n19                       Bakery  \n20            Health Food Store  \n21                    Bookstore  \n22         Ethiopian Restaurant  \n23                  Record Shop  \n24  Eastern European Restaurant  \n25               Clothing Store  \n26                   Restaurant  \n27            Electronics Store  \n28          Dumpling Restaurant  \n29                        Diner  \n30                  Pizza Place  \n31                    Gastropub  \n32               Breakfast Spot  \n33                    Juice Bar  \n34                 Liquor Store  \n35         Ethiopian Restaurant  \n36            Fish & Chips Shop  \n37                 Liquor Store  "
                    }, 
                    "output_type": "execute_result"
                }
            ], 
            "source": "import numpy as np\n\ndef return_most_common_venues(row, num_top_venues):\n    row_categories = row.iloc[1:]\n    row_categories_sorted = row_categories.sort_values(ascending=False)\n    \n    return row_categories_sorted.index.values[0:num_top_venues]\n\nnum_top_venues = 10\n\nindicators = ['st', 'nd', 'rd']\n\n# create columns according to number of top venues\ncolumns = ['Neighborhood']\nfor ind in np.arange(num_top_venues):\n    try:\n        columns.append('{}{} Most Common Venue'.format(ind+1, indicators[ind]))\n    except:\n        columns.append('{}th Most Common Venue'.format(ind+1))\n\n# create a new dataframe\nneighborhoods_venues_sorted = pd.DataFrame(columns=columns)\nneighborhoods_venues_sorted['Neighborhood'] = toronto_grouped['Neighborhood']\n\nfor ind in np.arange(toronto_grouped.shape[0]):\n    neighborhoods_venues_sorted.iloc[ind, 1:] = return_most_common_venues(toronto_grouped.iloc[ind, :], num_top_venues)\n\nneighborhoods_venues_sorted"
        }, 
        {
            "source": "**Run k-means to cluster the neighborhood into 5 clusters.**", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "execution_count": 153, 
            "cell_type": "code", 
            "metadata": {}, 
            "outputs": [
                {
                    "execution_count": 153, 
                    "metadata": {}, 
                    "data": {
                        "text/plain": "array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 0, 0], dtype=int32)"
                    }, 
                    "output_type": "execute_result"
                }
            ], 
            "source": "# set number of clusters\nkclusters = 5\n\ntoronto_grouped_clustering = toronto_grouped.drop('Neighborhood', 1)\n\n# run k-means clustering\nkmeans = KMeans(n_clusters=kclusters, random_state=0).fit(toronto_grouped_clustering)\n\n# check cluster labels generated for each row in the dataframe\nkmeans.labels_[0:20] "
        }, 
        {
            "execution_count": 155, 
            "cell_type": "code", 
            "metadata": {}, 
            "outputs": [
                {
                    "output_type": "stream", 
                    "name": "stderr", 
                    "text": "/opt/conda/envs/DSX-Python35/lib/python3.5/site-packages/ipykernel/__main__.py:4: SettingWithCopyWarning: \nA value is trying to be set on a copy of a slice from a DataFrame.\nTry using .loc[row_indexer,col_indexer] = value instead\n\nSee the caveats in the documentation: http://pandas.pydata.org/pandas-docs/stable/indexing.html#indexing-view-versus-copy\n"
                }, 
                {
                    "execution_count": 155, 
                    "metadata": {}, 
                    "data": {
                        "text/html": "<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>PostalCode</th>\n      <th>Borough</th>\n      <th>Neighborhood</th>\n      <th>Latitude</th>\n      <th>Longitude</th>\n      <th>Cluster Labels</th>\n      <th>1st Most Common Venue</th>\n      <th>2nd Most Common Venue</th>\n      <th>3rd Most Common Venue</th>\n      <th>4th Most Common Venue</th>\n      <th>5th Most Common Venue</th>\n      <th>6th Most Common Venue</th>\n      <th>7th Most Common Venue</th>\n      <th>8th Most Common Venue</th>\n      <th>9th Most Common Venue</th>\n      <th>10th Most Common Venue</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>M4E</td>\n      <td>East Toronto</td>\n      <td>The Beaches</td>\n      <td>43.676357</td>\n      <td>-79.293031</td>\n      <td>0</td>\n      <td>Coffee Shop</td>\n      <td>Pub</td>\n      <td>Asian Restaurant</td>\n      <td>Women's Store</td>\n      <td>Discount Store</td>\n      <td>Fast Food Restaurant</td>\n      <td>Farmers Market</td>\n      <td>Falafel Restaurant</td>\n      <td>Event Space</td>\n      <td>Ethiopian Restaurant</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>M4K</td>\n      <td>East Toronto</td>\n      <td>The Danforth West, Riverdale</td>\n      <td>43.679557</td>\n      <td>-79.352188</td>\n      <td>0</td>\n      <td>Greek Restaurant</td>\n      <td>Coffee Shop</td>\n      <td>Ice Cream Shop</td>\n      <td>Bookstore</td>\n      <td>Italian Restaurant</td>\n      <td>Health Food Store</td>\n      <td>Furniture / Home Store</td>\n      <td>Pub</td>\n      <td>Pizza Place</td>\n      <td>Liquor Store</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>M4L</td>\n      <td>East Toronto</td>\n      <td>The Beaches West, India Bazaar</td>\n      <td>43.668999</td>\n      <td>-79.315572</td>\n      <td>0</td>\n      <td>Park</td>\n      <td>Burger Joint</td>\n      <td>Sushi Restaurant</td>\n      <td>Steakhouse</td>\n      <td>Ice Cream Shop</td>\n      <td>Pub</td>\n      <td>Movie Theater</td>\n      <td>Burrito Place</td>\n      <td>Sandwich Place</td>\n      <td>Fish &amp; Chips Shop</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>M4M</td>\n      <td>East Toronto</td>\n      <td>Studio District</td>\n      <td>43.659526</td>\n      <td>-79.340923</td>\n      <td>0</td>\n      <td>Caf\u00e9</td>\n      <td>Coffee Shop</td>\n      <td>Italian Restaurant</td>\n      <td>American Restaurant</td>\n      <td>Music Store</td>\n      <td>Bakery</td>\n      <td>Bookstore</td>\n      <td>Latin American Restaurant</td>\n      <td>Fish Market</td>\n      <td>Juice Bar</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>M4N</td>\n      <td>Central Toronto</td>\n      <td>Lawrence Park</td>\n      <td>43.728020</td>\n      <td>-79.388790</td>\n      <td>0</td>\n      <td>Bus Line</td>\n      <td>Park</td>\n      <td>Lake</td>\n      <td>Swim School</td>\n      <td>Dim Sum Restaurant</td>\n      <td>Women's Store</td>\n      <td>Farmers Market</td>\n      <td>Falafel Restaurant</td>\n      <td>Event Space</td>\n      <td>Ethiopian Restaurant</td>\n    </tr>\n  </tbody>\n</table>\n</div>", 
                        "text/plain": "  PostalCode          Borough                    Neighborhood   Latitude  \\\n0        M4E     East Toronto                     The Beaches  43.676357   \n1        M4K     East Toronto    The Danforth West, Riverdale  43.679557   \n2        M4L     East Toronto  The Beaches West, India Bazaar  43.668999   \n3        M4M     East Toronto                 Studio District  43.659526   \n4        M4N  Central Toronto                   Lawrence Park  43.728020   \n\n   Longitude  Cluster Labels 1st Most Common Venue 2nd Most Common Venue  \\\n0 -79.293031               0           Coffee Shop                   Pub   \n1 -79.352188               0      Greek Restaurant           Coffee Shop   \n2 -79.315572               0                  Park          Burger Joint   \n3 -79.340923               0                  Caf\u00e9           Coffee Shop   \n4 -79.388790               0              Bus Line                  Park   \n\n  3rd Most Common Venue 4th Most Common Venue 5th Most Common Venue  \\\n0      Asian Restaurant         Women's Store        Discount Store   \n1        Ice Cream Shop             Bookstore    Italian Restaurant   \n2      Sushi Restaurant            Steakhouse        Ice Cream Shop   \n3    Italian Restaurant   American Restaurant           Music Store   \n4                  Lake           Swim School    Dim Sum Restaurant   \n\n  6th Most Common Venue   7th Most Common Venue      8th Most Common Venue  \\\n0  Fast Food Restaurant          Farmers Market         Falafel Restaurant   \n1     Health Food Store  Furniture / Home Store                        Pub   \n2                   Pub           Movie Theater              Burrito Place   \n3                Bakery               Bookstore  Latin American Restaurant   \n4         Women's Store          Farmers Market         Falafel Restaurant   \n\n  9th Most Common Venue 10th Most Common Venue  \n0           Event Space   Ethiopian Restaurant  \n1           Pizza Place           Liquor Store  \n2        Sandwich Place      Fish & Chips Shop  \n3           Fish Market              Juice Bar  \n4           Event Space   Ethiopian Restaurant  "
                    }, 
                    "output_type": "execute_result"
                }
            ], 
            "source": "toronto_merged = toronto_data\n\n# add clustering labels\ntoronto_merged['Cluster Labels'] = kmeans.labels_\n\n# merge toronto_grouped with toronto_data to add latitude/longitude for each neighborhood\ntoronto_merged = toronto_merged.join(neighborhoods_venues_sorted.set_index('Neighborhood'), on='Neighborhood')\n\ntoronto_merged.head() # check the last columns!"
        }, 
        {
            "source": "**We can now visualize the resulting clusters**", 
            "cell_type": "markdown", 
            "metadata": {}
        }, 
        {
            "execution_count": 157, 
            "cell_type": "code", 
            "metadata": {}, 
            "outputs": [
                {
                    "execution_count": 157, 
                    "metadata": {}, 
                    "data": {
                        "text/html": "<div style=\"width:100%;\"><div style=\"position:relative;width:100%;height:0;padding-bottom:60%;\"><iframe src=\"data:text/html;charset=utf-8;base64,PCFET0NUWVBFIGh0bWw+CjxoZWFkPiAgICAKICAgIDxtZXRhIGh0dHAtZXF1aXY9ImNvbnRlbnQtdHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PVVURi04IiAvPgogICAgPHNjcmlwdD5MX1BSRUZFUl9DQU5WQVMgPSBmYWxzZTsgTF9OT19UT1VDSCA9IGZhbHNlOyBMX0RJU0FCTEVfM0QgPSBmYWxzZTs8L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xlYWZsZXRAMS4yLjAvZGlzdC9sZWFmbGV0LmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2FqYXguZ29vZ2xlYXBpcy5jb20vYWpheC9saWJzL2pxdWVyeS8xLjExLjEvanF1ZXJ5Lm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvanMvYm9vdHN0cmFwLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvTGVhZmxldC5hd2Vzb21lLW1hcmtlcnMvMi4wLjIvbGVhZmxldC5hd2Vzb21lLW1hcmtlcnMuanMiPjwvc2NyaXB0PgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xlYWZsZXRAMS4yLjAvZGlzdC9sZWFmbGV0LmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLm1pbi5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9ib290c3RyYXAvMy4yLjAvY3NzL2Jvb3RzdHJhcC10aGVtZS5taW4uY3NzIi8+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuNi4zL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9yYXdnaXQuY29tL3B5dGhvbi12aXN1YWxpemF0aW9uL2ZvbGl1bS9tYXN0ZXIvZm9saXVtL3RlbXBsYXRlcy9sZWFmbGV0LmF3ZXNvbWUucm90YXRlLmNzcyIvPgogICAgPHN0eWxlPmh0bWwsIGJvZHkge3dpZHRoOiAxMDAlO2hlaWdodDogMTAwJTttYXJnaW46IDA7cGFkZGluZzogMDt9PC9zdHlsZT4KICAgIDxzdHlsZT4jbWFwIHtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtib3R0b206MDtyaWdodDowO2xlZnQ6MDt9PC9zdHlsZT4KICAgIAogICAgICAgICAgICA8c3R5bGU+ICNtYXBfOWMwMGM2NmFmNjdkNDBjZWI0M2E2NzM2MThmNmFkYjcgewogICAgICAgICAgICAgICAgcG9zaXRpb24gOiByZWxhdGl2ZTsKICAgICAgICAgICAgICAgIHdpZHRoIDogMTAwLjAlOwogICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAuMCU7CiAgICAgICAgICAgICAgICBsZWZ0OiAwLjAlOwogICAgICAgICAgICAgICAgdG9wOiAwLjAlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICA8L3N0eWxlPgogICAgICAgIAo8L2hlYWQ+Cjxib2R5PiAgICAKICAgIAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb2xpdW0tbWFwIiBpZD0ibWFwXzljMDBjNjZhZjY3ZDQwY2ViNDNhNjczNjE4ZjZhZGI3IiA+PC9kaXY+CiAgICAgICAgCjwvYm9keT4KPHNjcmlwdD4gICAgCiAgICAKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGJvdW5kcyA9IG51bGw7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgdmFyIG1hcF85YzAwYzY2YWY2N2Q0MGNlYjQzYTY3MzYxOGY2YWRiNyA9IEwubWFwKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21hcF85YzAwYzY2YWY2N2Q0MGNlYjQzYTY3MzYxOGY2YWRiNycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y2VudGVyOiBbNDMuNjUzOTYzLC03OS4zODcyMDddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbTogMTEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhCb3VuZHM6IGJvdW5kcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyczogW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JsZENvcHlKdW1wOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyczogTC5DUlMuRVBTRzM4NTcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciB0aWxlX2xheWVyX2RkYjU3M2FkYjE2ODQxMGZiOGZhNzRjMmUyNjRiNTk1ID0gTC50aWxlTGF5ZXIoCiAgICAgICAgICAgICAgICAnaHR0cHM6Ly97c30udGlsZS5vcGVuc3RyZWV0bWFwLm9yZy97en0ve3h9L3t5fS5wbmcnLAogICAgICAgICAgICAgICAgewogICJhdHRyaWJ1dGlvbiI6IG51bGwsCiAgImRldGVjdFJldGluYSI6IGZhbHNlLAogICJtYXhab29tIjogMTgsCiAgIm1pblpvb20iOiAxLAogICJub1dyYXAiOiBmYWxzZSwKICAic3ViZG9tYWlucyI6ICJhYmMiCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzljMDBjNjZhZjY3ZDQwY2ViNDNhNjczNjE4ZjZhZGI3KTsKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9mNjgxOTZlZjdkNGU0NjNlYjE2Zjc5M2E4MDJlZDgxOCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY3NjM1NzM5OTk5OTk5LC03OS4yOTMwMzEyXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiNmZjAwMDAiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjZmYwMDAwIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzljMDBjNjZhZjY3ZDQwY2ViNDNhNjczNjE4ZjZhZGI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2RhMWQ3ZDBjN2ZkYzRjMmRhY2JmMjUwM2ZkYjYzYWVjID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzZlZGE3MWY1NWIwNjRlMmNiOTRlN2M4NjRkMGYzYzMzID0gJCgnPGRpdiBpZD0iaHRtbF82ZWRhNzFmNTViMDY0ZTJjYjk0ZTdjODY0ZDBmM2MzMyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VGhlIEJlYWNoZXMgQ2x1c3RlciAwPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9kYTFkN2QwYzdmZGM0YzJkYWNiZjI1MDNmZGI2M2FlYy5zZXRDb250ZW50KGh0bWxfNmVkYTcxZjU1YjA2NGUyY2I5NGU3Yzg2NGQwZjNjMzMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZjY4MTk2ZWY3ZDRlNDYzZWIxNmY3OTNhODAyZWQ4MTguYmluZFBvcHVwKHBvcHVwX2RhMWQ3ZDBjN2ZkYzRjMmRhY2JmMjUwM2ZkYjYzYWVjKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzRmMjI3MGY0YThhOTQ2MDQ4ZGQxNzMzNzQ0MTU2NzRhID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjc5NTU3MSwtNzkuMzUyMTg4XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiNmZjAwMDAiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjZmYwMDAwIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzljMDBjNjZhZjY3ZDQwY2ViNDNhNjczNjE4ZjZhZGI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzk1OWI2ZTAwMWZiZTQxYmZiNjE1NzZhMzNhYjVkZDRkID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzJjZTM0MWQ3OWI1YjQ0ZmQ5MGRlM2YzMjFiNDIwM2Q3ID0gJCgnPGRpdiBpZD0iaHRtbF8yY2UzNDFkNzliNWI0NGZkOTBkZTNmMzIxYjQyMDNkNyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VGhlIERhbmZvcnRoIFdlc3QsIFJpdmVyZGFsZSBDbHVzdGVyIDA8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzk1OWI2ZTAwMWZiZTQxYmZiNjE1NzZhMzNhYjVkZDRkLnNldENvbnRlbnQoaHRtbF8yY2UzNDFkNzliNWI0NGZkOTBkZTNmMzIxYjQyMDNkNyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl80ZjIyNzBmNGE4YTk0NjA0OGRkMTczMzc0NDE1Njc0YS5iaW5kUG9wdXAocG9wdXBfOTU5YjZlMDAxZmJlNDFiZmI2MTU3NmEzM2FiNWRkNGQpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYjU0ZTAyNjNjY2RhNGFhNzgwY2U3NzIwNTA2NmIwNDMgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42Njg5OTg1LC03OS4zMTU1NzE1OTk5OTk5OF0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjZmYwMDAwIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF85YzAwYzY2YWY2N2Q0MGNlYjQzYTY3MzYxOGY2YWRiNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8xYjk0NDJmNGYzNjM0ZjViODQxZTY2ZDJiMDMzODhjYSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9kODE5ODgxOWYyNWE0NjIzYmUxOThmODc3OWEzYTNhNiA9ICQoJzxkaXYgaWQ9Imh0bWxfZDgxOTg4MTlmMjVhNDYyM2JlMTk4Zjg3NzlhM2EzYTYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlRoZSBCZWFjaGVzIFdlc3QsIEluZGlhIEJhemFhciBDbHVzdGVyIDA8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzFiOTQ0MmY0ZjM2MzRmNWI4NDFlNjZkMmIwMzM4OGNhLnNldENvbnRlbnQoaHRtbF9kODE5ODgxOWYyNWE0NjIzYmUxOThmODc3OWEzYTNhNik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9iNTRlMDI2M2NjZGE0YWE3ODBjZTc3MjA1MDY2YjA0My5iaW5kUG9wdXAocG9wdXBfMWI5NDQyZjRmMzYzNGY1Yjg0MWU2NmQyYjAzMzg4Y2EpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMGZhZWNhYTI4NmIxNDZlM2I4MjNkZWQ0YWQ1NzFhZGMgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTk1MjU1LC03OS4zNDA5MjNdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfOWMwMGM2NmFmNjdkNDBjZWI0M2E2NzM2MThmNmFkYjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZTkyZDg5MjVmZGY1NGJlMzgzNmY3YTBlYmY0MTM0YTIgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfZjhjMzMyODlkNGQ5NDU4MmI4NzkxYjU2YWM2NmVhNTUgPSAkKCc8ZGl2IGlkPSJodG1sX2Y4YzMzMjg5ZDRkOTQ1ODJiODc5MWI1NmFjNjZlYTU1IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5TdHVkaW8gRGlzdHJpY3QgQ2x1c3RlciAwPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9lOTJkODkyNWZkZjU0YmUzODM2ZjdhMGViZjQxMzRhMi5zZXRDb250ZW50KGh0bWxfZjhjMzMyODlkNGQ5NDU4MmI4NzkxYjU2YWM2NmVhNTUpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMGZhZWNhYTI4NmIxNDZlM2I4MjNkZWQ0YWQ1NzFhZGMuYmluZFBvcHVwKHBvcHVwX2U5MmQ4OTI1ZmRmNTRiZTM4MzZmN2EwZWJmNDEzNGEyKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2EyODFiZDVjMTU1OTQyNGVhMmZkNmZlYTRkMWNmMTVkID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzI4MDIwNSwtNzkuMzg4NzkwMV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjZmYwMDAwIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF85YzAwYzY2YWY2N2Q0MGNlYjQzYTY3MzYxOGY2YWRiNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8yNjEwM2M5OThmZTA0OWJkYjkzYzExMGU5YWMxNzY2YiA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF84MDNiMzMxOGJjM2I0NThhYWYyNzNiMDRlNDFiMmM0MiA9ICQoJzxkaXYgaWQ9Imh0bWxfODAzYjMzMThiYzNiNDU4YWFmMjczYjA0ZTQxYjJjNDIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkxhd3JlbmNlIFBhcmsgQ2x1c3RlciAwPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8yNjEwM2M5OThmZTA0OWJkYjkzYzExMGU5YWMxNzY2Yi5zZXRDb250ZW50KGh0bWxfODAzYjMzMThiYzNiNDU4YWFmMjczYjA0ZTQxYjJjNDIpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYTI4MWJkNWMxNTU5NDI0ZWEyZmQ2ZmVhNGQxY2YxNWQuYmluZFBvcHVwKHBvcHVwXzI2MTAzYzk5OGZlMDQ5YmRiOTNjMTEwZTlhYzE3NjZiKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzRkYmFiZjlkYTNmMjQ4NmY4MjdkOGU2MzhhNmY5MjI3ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzEyNzUxMSwtNzkuMzkwMTk3NV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjZmYwMDAwIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF85YzAwYzY2YWY2N2Q0MGNlYjQzYTY3MzYxOGY2YWRiNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF80ZmE1N2VmMjA0OTQ0YjllYTliNTYwMzY1YzgyMjRiYSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF80MTNhNzZkYjNlYmI0M2UwYjNhMWJjOWM4NjYzYTFiZCA9ICQoJzxkaXYgaWQ9Imh0bWxfNDEzYTc2ZGIzZWJiNDNlMGIzYTFiYzljODY2M2ExYmQiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkRhdmlzdmlsbGUgTm9ydGggQ2x1c3RlciAwPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF80ZmE1N2VmMjA0OTQ0YjllYTliNTYwMzY1YzgyMjRiYS5zZXRDb250ZW50KGh0bWxfNDEzYTc2ZGIzZWJiNDNlMGIzYTFiYzljODY2M2ExYmQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNGRiYWJmOWRhM2YyNDg2ZjgyN2Q4ZTYzOGE2ZjkyMjcuYmluZFBvcHVwKHBvcHVwXzRmYTU3ZWYyMDQ5NDRiOWVhOWI1NjAzNjVjODIyNGJhKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2RkZWI3MzU4YTkyNzRlMTk4OTY1NGFkNDYwY2MwNDMyID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzE1MzgzNCwtNzkuNDA1Njc4NDAwMDAwMDFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfOWMwMGM2NmFmNjdkNDBjZWI0M2E2NzM2MThmNmFkYjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYzA0YzJlYWY0MTdmNGZkN2JmZjBmNzU1NDUwYTc2N2EgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfOTdjMDFhYWY4MWY1NDM3N2JjNzdkYWJkMzcyODdjYzYgPSAkKCc8ZGl2IGlkPSJodG1sXzk3YzAxYWFmODFmNTQzNzdiYzc3ZGFiZDM3Mjg3Y2M2IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Ob3J0aCBUb3JvbnRvIFdlc3QgQ2x1c3RlciAwPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9jMDRjMmVhZjQxN2Y0ZmQ3YmZmMGY3NTU0NTBhNzY3YS5zZXRDb250ZW50KGh0bWxfOTdjMDFhYWY4MWY1NDM3N2JjNzdkYWJkMzcyODdjYzYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZGRlYjczNThhOTI3NGUxOTg5NjU0YWQ0NjBjYzA0MzIuYmluZFBvcHVwKHBvcHVwX2MwNGMyZWFmNDE3ZjRmZDdiZmYwZjc1NTQ1MGE3NjdhKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2M1ZjY1OTlhNWUyZjQ3NjBhNDY1ZThhNDk0NjIyMDU2ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzA0MzI0NCwtNzkuMzg4NzkwMV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjZmYwMDAwIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF85YzAwYzY2YWY2N2Q0MGNlYjQzYTY3MzYxOGY2YWRiNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF80MTBkMzk5YmRiZmM0MmI0YjQxODk4NTJkYjExMTUxMSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF85NTk2NmZjM2VjYTI0MGNmODA4Y2IxZWVlN2E3Y2ZmZCA9ICQoJzxkaXYgaWQ9Imh0bWxfOTU5NjZmYzNlY2EyNDBjZjgwOGNiMWVlZTdhN2NmZmQiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkRhdmlzdmlsbGUgQ2x1c3RlciAwPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF80MTBkMzk5YmRiZmM0MmI0YjQxODk4NTJkYjExMTUxMS5zZXRDb250ZW50KGh0bWxfOTU5NjZmYzNlY2EyNDBjZjgwOGNiMWVlZTdhN2NmZmQpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYzVmNjU5OWE1ZTJmNDc2MGE0NjVlOGE0OTQ2MjIwNTYuYmluZFBvcHVwKHBvcHVwXzQxMGQzOTliZGJmYzQyYjRiNDE4OTg1MmRiMTExNTExKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2RlNTA5ODYyMDlmMjRlY2NiOTdlZDIzNWY3MDIxMDAwID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjg5NTc0MywtNzkuMzgzMTU5OTAwMDAwMDFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfOWMwMGM2NmFmNjdkNDBjZWI0M2E2NzM2MThmNmFkYjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZjk2OGUxZTRlZjVlNGE2Njk1ZGNhMDgzODUzMzFmZmUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYjlmNWIyYTZmY2M0NDBjNDk1ZDk1MTQ2YzRlMzM4MzggPSAkKCc8ZGl2IGlkPSJodG1sX2I5ZjViMmE2ZmNjNDQwYzQ5NWQ5NTE0NmM0ZTMzODM4IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Nb29yZSBQYXJrLCBTdW1tZXJoaWxsIEVhc3QgQ2x1c3RlciAwPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9mOTY4ZTFlNGVmNWU0YTY2OTVkY2EwODM4NTMzMWZmZS5zZXRDb250ZW50KGh0bWxfYjlmNWIyYTZmY2M0NDBjNDk1ZDk1MTQ2YzRlMzM4MzgpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZGU1MDk4NjIwOWYyNGVjY2I5N2VkMjM1ZjcwMjEwMDAuYmluZFBvcHVwKHBvcHVwX2Y5NjhlMWU0ZWY1ZTRhNjY5NWRjYTA4Mzg1MzMxZmZlKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzQ0OTFlMzJkYzA1YzRlZjhiNjYzNzY3MWVhNjM1OWVmID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjg2NDEyMjk5OTk5OTksLTc5LjQwMDA0OTNdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfOWMwMGM2NmFmNjdkNDBjZWI0M2E2NzM2MThmNmFkYjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZGQ4ZTE4NzUzMzdlNDkyYTliZTU0NjBkODhiMGRjZWIgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfY2M4Y2JlMzE2MWJjNDIzMDgxM2YwYWExMzkyZWY4YWYgPSAkKCc8ZGl2IGlkPSJodG1sX2NjOGNiZTMxNjFiYzQyMzA4MTNmMGFhMTM5MmVmOGFmIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5EZWVyIFBhcmssIEZvcmVzdCBIaWxsIFNFLCBSYXRobmVsbHksIFNvdXRoIEhpbGwsIFN1bW1lcmhpbGwgV2VzdCBDbHVzdGVyIDA8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2RkOGUxODc1MzM3ZTQ5MmE5YmU1NDYwZDg4YjBkY2ViLnNldENvbnRlbnQoaHRtbF9jYzhjYmUzMTYxYmM0MjMwODEzZjBhYTEzOTJlZjhhZik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl80NDkxZTMyZGMwNWM0ZWY4YjY2Mzc2NzFlYTYzNTllZi5iaW5kUG9wdXAocG9wdXBfZGQ4ZTE4NzUzMzdlNDkyYTliZTU0NjBkODhiMGRjZWIpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYzY0NmQyMjA5ZjdmNDkwYTlmNWQyNGZiYjJjN2VkYzAgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42Nzk1NjI2LC03OS4zNzc1Mjk0MDAwMDAwMV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjZmYwMDAwIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF85YzAwYzY2YWY2N2Q0MGNlYjQzYTY3MzYxOGY2YWRiNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9lYzdkNzI4Y2RkODg0OGEwYTZjMWEwZjYyNDVhMDA2NSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF84NTcxNzQ3NGUxODc0ZjFhOGRmNGMyOTdiNDU3MjEwOCA9ICQoJzxkaXYgaWQ9Imh0bWxfODU3MTc0NzRlMTg3NGYxYThkZjRjMjk3YjQ1NzIxMDgiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlJvc2VkYWxlIENsdXN0ZXIgMDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZWM3ZDcyOGNkZDg4NDhhMGE2YzFhMGY2MjQ1YTAwNjUuc2V0Q29udGVudChodG1sXzg1NzE3NDc0ZTE4NzRmMWE4ZGY0YzI5N2I0NTcyMTA4KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2M2NDZkMjIwOWY3ZjQ5MGE5ZjVkMjRmYmIyYzdlZGMwLmJpbmRQb3B1cChwb3B1cF9lYzdkNzI4Y2RkODg0OGEwYTZjMWEwZjYyNDVhMDA2NSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9lMjM0OWE1YjhhOWQ0NjgzOTI1Nzc2NDk4NDk1ZTlmMyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY2Nzk2NywtNzkuMzY3Njc1M10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjZmYwMDAwIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF85YzAwYzY2YWY2N2Q0MGNlYjQzYTY3MzYxOGY2YWRiNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8yY2JhOWVkMzI0ODg0ZDIwODczNDA5NWMxOTFlZjlhNSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9mNDlhY2NkNWVjOTk0MzFiYWRkYWEyNDVkYTExMDVlMiA9ICQoJzxkaXYgaWQ9Imh0bWxfZjQ5YWNjZDVlYzk5NDMxYmFkZGFhMjQ1ZGExMTA1ZTIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNhYmJhZ2V0b3duLCBTdC4gSmFtZXMgVG93biBDbHVzdGVyIDA8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzJjYmE5ZWQzMjQ4ODRkMjA4NzM0MDk1YzE5MWVmOWE1LnNldENvbnRlbnQoaHRtbF9mNDlhY2NkNWVjOTk0MzFiYWRkYWEyNDVkYTExMDVlMik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9lMjM0OWE1YjhhOWQ0NjgzOTI1Nzc2NDk4NDk1ZTlmMy5iaW5kUG9wdXAocG9wdXBfMmNiYTllZDMyNDg4NGQyMDg3MzQwOTVjMTkxZWY5YTUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMjdhODkxYzdlOWIzNGIyMmI0MjgxYmQ0NjhkZThmMjMgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NjU4NTk5LC03OS4zODMxNTk5MDAwMDAwMV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjZmYwMDAwIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF85YzAwYzY2YWY2N2Q0MGNlYjQzYTY3MzYxOGY2YWRiNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8xNjE0OTI4MTcyNDU0MzEyOTI1OWVlOWMwOGI5OWI2NCA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8yMDIyN2ZiMzIzZjI0ZWUxOTJiYzgyMzhhM2RmYjBjZCA9ICQoJzxkaXYgaWQ9Imh0bWxfMjAyMjdmYjMyM2YyNGVlMTkyYmM4MjM4YTNkZmIwY2QiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNodXJjaCBhbmQgV2VsbGVzbGV5IENsdXN0ZXIgMDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMTYxNDkyODE3MjQ1NDMxMjkyNTllZTljMDhiOTliNjQuc2V0Q29udGVudChodG1sXzIwMjI3ZmIzMjNmMjRlZTE5MmJjODIzOGEzZGZiMGNkKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzI3YTg5MWM3ZTliMzRiMjJiNDI4MWJkNDY4ZGU4ZjIzLmJpbmRQb3B1cChwb3B1cF8xNjE0OTI4MTcyNDU0MzEyOTI1OWVlOWMwOGI5OWI2NCk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9lNzUyOTAwZjhmMjc0ZTY3YTYyMWJiZTAwYTkwYmZhNSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1NDI1OTksLTc5LjM2MDYzNTldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfOWMwMGM2NmFmNjdkNDBjZWI0M2E2NzM2MThmNmFkYjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZmQ4OGNlMDM5M2Q2NDAzNDhlNzZhMzI4NTdjZDgwOWUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYjc4ZmFhOGI0NDNjNDc5YmE3NjUxZTg2YzdmN2RiODAgPSAkKCc8ZGl2IGlkPSJodG1sX2I3OGZhYThiNDQzYzQ3OWJhNzY1MWU4NmM3ZjdkYjgwIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5IYXJib3VyZnJvbnQsIFJlZ2VudCBQYXJrIENsdXN0ZXIgMDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZmQ4OGNlMDM5M2Q2NDAzNDhlNzZhMzI4NTdjZDgwOWUuc2V0Q29udGVudChodG1sX2I3OGZhYThiNDQzYzQ3OWJhNzY1MWU4NmM3ZjdkYjgwKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2U3NTI5MDBmOGYyNzRlNjdhNjIxYmJlMDBhOTBiZmE1LmJpbmRQb3B1cChwb3B1cF9mZDg4Y2UwMzkzZDY0MDM0OGU3NmEzMjg1N2NkODA5ZSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl84OWI4OTc1ZmQzN2M0Y2E2YTY2Yzg2M2RlZWRiYWQzMSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1NzE2MTgsLTc5LjM3ODkzNzA5OTk5OTk5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiNmZjAwMDAiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjZmYwMDAwIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzljMDBjNjZhZjY3ZDQwY2ViNDNhNjczNjE4ZjZhZGI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzNjYjVhZTVhNDRjNTQyNWVhZDJlYzUyYmEwM2E4ZDljID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzE5ODMxODllMzgyOTQxMDFiYjI4YWU3MDJkYmVmNTUxID0gJCgnPGRpdiBpZD0iaHRtbF8xOTgzMTg5ZTM4Mjk0MTAxYmIyOGFlNzAyZGJlZjU1MSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+UnllcnNvbiwgR2FyZGVuIERpc3RyaWN0IENsdXN0ZXIgMDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfM2NiNWFlNWE0NGM1NDI1ZWFkMmVjNTJiYTAzYThkOWMuc2V0Q29udGVudChodG1sXzE5ODMxODllMzgyOTQxMDFiYjI4YWU3MDJkYmVmNTUxKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzg5Yjg5NzVmZDM3YzRjYTZhNjZjODYzZGVlZGJhZDMxLmJpbmRQb3B1cChwb3B1cF8zY2I1YWU1YTQ0YzU0MjVlYWQyZWM1MmJhMDNhOGQ5Yyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl84ZTY3YzM4ODViNTQ0ZmM3YmIyZjU4OTNjMTU5Yjk1NyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1MTQ5MzksLTc5LjM3NTQxNzldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfOWMwMGM2NmFmNjdkNDBjZWI0M2E2NzM2MThmNmFkYjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYTcyZmE2OTUzNTgwNDRmMTljYjRkMWEwYmNhMGJiMTkgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYTRlODdmMjZhY2JiNDM4M2EzNjNiZjgyOTNkYjc0NmQgPSAkKCc8ZGl2IGlkPSJodG1sX2E0ZTg3ZjI2YWNiYjQzODNhMzYzYmY4MjkzZGI3NDZkIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5TdC4gSmFtZXMgVG93biBDbHVzdGVyIDA8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2E3MmZhNjk1MzU4MDQ0ZjE5Y2I0ZDFhMGJjYTBiYjE5LnNldENvbnRlbnQoaHRtbF9hNGU4N2YyNmFjYmI0MzgzYTM2M2JmODI5M2RiNzQ2ZCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl84ZTY3YzM4ODViNTQ0ZmM3YmIyZjU4OTNjMTU5Yjk1Ny5iaW5kUG9wdXAocG9wdXBfYTcyZmE2OTUzNTgwNDRmMTljYjRkMWEwYmNhMGJiMTkpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZTM3MzNiOTAxYWQ5NDdkZmJhY2Y1NjA1Mzk5ODYwMTcgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NDQ3NzA3OTk5OTk5OTYsLTc5LjM3MzMwNjRdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfOWMwMGM2NmFmNjdkNDBjZWI0M2E2NzM2MThmNmFkYjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMmI4Y2JkNzllZWNjNGFjMmI1ZjNkOTVlNzQ0ZDI3MWYgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMGQ0YjZiYTgyN2FjNGYxZWExOTc1ZWU5ZjUzMWNiZWEgPSAkKCc8ZGl2IGlkPSJodG1sXzBkNGI2YmE4MjdhYzRmMWVhMTk3NWVlOWY1MzFjYmVhIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5CZXJjenkgUGFyayBDbHVzdGVyIDA8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzJiOGNiZDc5ZWVjYzRhYzJiNWYzZDk1ZTc0NGQyNzFmLnNldENvbnRlbnQoaHRtbF8wZDRiNmJhODI3YWM0ZjFlYTE5NzVlZTlmNTMxY2JlYSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9lMzczM2I5MDFhZDk0N2RmYmFjZjU2MDUzOTk4NjAxNy5iaW5kUG9wdXAocG9wdXBfMmI4Y2JkNzllZWNjNGFjMmI1ZjNkOTVlNzQ0ZDI3MWYpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfODE1NDYzNGE0OWI5NGZjMmEzN2E5ZDBmMjA2NDhmZTUgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTc5NTI0LC03OS4zODczODI2XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiNmZmIzNjAiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjZmZiMzYwIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzljMDBjNjZhZjY3ZDQwY2ViNDNhNjczNjE4ZjZhZGI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzQwZTVmODUyMDU5NzRkMzVhYTQ3YzM0MmVhMTdhZjZiID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzNhMzJlZmFhMGE5ODQ0MzRiYjc4MTgyMmMyYzIzMGNhID0gJCgnPGRpdiBpZD0iaHRtbF8zYTMyZWZhYTBhOTg0NDM0YmI3ODE4MjJjMmMyMzBjYSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2VudHJhbCBCYXkgU3RyZWV0IENsdXN0ZXIgNDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNDBlNWY4NTIwNTk3NGQzNWFhNDdjMzQyZWExN2FmNmIuc2V0Q29udGVudChodG1sXzNhMzJlZmFhMGE5ODQ0MzRiYjc4MTgyMmMyYzIzMGNhKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzgxNTQ2MzRhNDliOTRmYzJhMzdhOWQwZjIwNjQ4ZmU1LmJpbmRQb3B1cChwb3B1cF80MGU1Zjg1MjA1OTc0ZDM1YWE0N2MzNDJlYTE3YWY2Yik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8yODBlY2EwMTYzZmE0MDg1OGM0ZTQ5NzFjMTE1NjFjMyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1MDU3MTIwMDAwMDAxLC03OS4zODQ1Njc1XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiNmZjAwMDAiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjZmYwMDAwIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzljMDBjNjZhZjY3ZDQwY2ViNDNhNjczNjE4ZjZhZGI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2VmMjY5NDFhMmQwNDQwMjJhOTFlN2RkYzc2NDU0MTA2ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzc3MzdjZWZlYTI0MjQ0YTM4MzFmZmViMDIxNzNhMzgzID0gJCgnPGRpdiBpZD0iaHRtbF83NzM3Y2VmZWEyNDI0NGEzODMxZmZlYjAyMTczYTM4MyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QWRlbGFpZGUsIEtpbmcsIFJpY2htb25kIENsdXN0ZXIgMDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfZWYyNjk0MWEyZDA0NDAyMmE5MWU3ZGRjNzY0NTQxMDYuc2V0Q29udGVudChodG1sXzc3MzdjZWZlYTI0MjQ0YTM4MzFmZmViMDIxNzNhMzgzKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzI4MGVjYTAxNjNmYTQwODU4YzRlNDk3MWMxMTU2MWMzLmJpbmRQb3B1cChwb3B1cF9lZjI2OTQxYTJkMDQ0MDIyYTkxZTdkZGM3NjQ1NDEwNik7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9hZWE3ZjFhMTFiODM0ZTlkYTU1NmI2NTkxMDNhNzk1YSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY0MDgxNTcsLTc5LjM4MTc1MjI5OTk5OTk5XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiNmZjAwMDAiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjZmYwMDAwIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzljMDBjNjZhZjY3ZDQwY2ViNDNhNjczNjE4ZjZhZGI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzFhNWE3NjMwZjIxZDQ4ZDhhODkwYzMwZGU4ODc3MmIzID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzhhMmMwMDRhODg5OTRlOGU5NWJiMDY0M2JmYjEwMDgxID0gJCgnPGRpdiBpZD0iaHRtbF84YTJjMDA0YTg4OTk0ZThlOTViYjA2NDNiZmIxMDA4MSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+SGFyYm91cmZyb250IEVhc3QsIFRvcm9udG8gSXNsYW5kcywgVW5pb24gU3RhdGlvbiBDbHVzdGVyIDA8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzFhNWE3NjMwZjIxZDQ4ZDhhODkwYzMwZGU4ODc3MmIzLnNldENvbnRlbnQoaHRtbF84YTJjMDA0YTg4OTk0ZThlOTViYjA2NDNiZmIxMDA4MSk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9hZWE3ZjFhMTFiODM0ZTlkYTU1NmI2NTkxMDNhNzk1YS5iaW5kUG9wdXAocG9wdXBfMWE1YTc2MzBmMjFkNDhkOGE4OTBjMzBkZTg4NzcyYjMpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMDNjMmQwNDE0NjM0NDJiY2EzY2NmOWM4MDg0NzU5ZjggPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NDcxNzY4LC03OS4zODE1NzY0MDAwMDAwMV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjZmYwMDAwIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF85YzAwYzY2YWY2N2Q0MGNlYjQzYTY3MzYxOGY2YWRiNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8wNmM4MjhhMDdjZDk0YTQwYTRkZmQyOTZmMGZjYTVkMSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF9iYjI5OWQ2ZmRjYmI0ZTU4OTlmY2I2MDRmMmVkZmYzYSA9ICQoJzxkaXYgaWQ9Imh0bWxfYmIyOTlkNmZkY2JiNGU1ODk5ZmNiNjA0ZjJlZGZmM2EiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkRlc2lnbiBFeGNoYW5nZSwgVG9yb250byBEb21pbmlvbiBDZW50cmUgQ2x1c3RlciAwPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8wNmM4MjhhMDdjZDk0YTQwYTRkZmQyOTZmMGZjYTVkMS5zZXRDb250ZW50KGh0bWxfYmIyOTlkNmZkY2JiNGU1ODk5ZmNiNjA0ZjJlZGZmM2EpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMDNjMmQwNDE0NjM0NDJiY2EzY2NmOWM4MDg0NzU5ZjguYmluZFBvcHVwKHBvcHVwXzA2YzgyOGEwN2NkOTRhNDBhNGRmZDI5NmYwZmNhNWQxKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2Y2NDU0ZGE2MzUzYjRhMjU4ZGJhMTIwZjAxOTZkYjVlID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjQ4MTk4NSwtNzkuMzc5ODE2OTAwMDAwMDFdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfOWMwMGM2NmFmNjdkNDBjZWI0M2E2NzM2MThmNmFkYjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfOTA0NmExZGFlNGEyNDg3NjlkMWNmNjE0ZTQ1NTRkZjcgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNjU5MDRkZGU1NzU1NDJjOTkwZDZiMDU3YjQyZDhkNDEgPSAkKCc8ZGl2IGlkPSJodG1sXzY1OTA0ZGRlNTc1NTQyYzk5MGQ2YjA1N2I0MmQ4ZDQxIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Db21tZXJjZSBDb3VydCwgVmljdG9yaWEgSG90ZWwgQ2x1c3RlciAwPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF85MDQ2YTFkYWU0YTI0ODc2OWQxY2Y2MTRlNDU1NGRmNy5zZXRDb250ZW50KGh0bWxfNjU5MDRkZGU1NzU1NDJjOTkwZDZiMDU3YjQyZDhkNDEpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfZjY0NTRkYTYzNTNiNGEyNThkYmExMjBmMDE5NmRiNWUuYmluZFBvcHVwKHBvcHVwXzkwNDZhMWRhZTRhMjQ4NzY5ZDFjZjYxNGU0NTU0ZGY3KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2ExNTEwODAzMzdjMDQ0ZmQ5NmNkMjQ3N2FiNGI0NmJlID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNzExNjk0OCwtNzkuNDE2OTM1NTk5OTk5OTldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiIzgwMDBmZiIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiM4MDAwZmYiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfOWMwMGM2NmFmNjdkNDBjZWI0M2E2NzM2MThmNmFkYjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZWUyNzQzODIzNGQ4NGIzYmJkMmQ1OTc2ZDI0NjdiODkgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMjc2MTFkOWZiYjIzNDVmNDlkMWFkY2JiNTk2M2U4YmIgPSAkKCc8ZGl2IGlkPSJodG1sXzI3NjExZDlmYmIyMzQ1ZjQ5ZDFhZGNiYjU5NjNlOGJiIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Sb3NlbGF3biBDbHVzdGVyIDE8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2VlMjc0MzgyMzRkODRiM2JiZDJkNTk3NmQyNDY3Yjg5LnNldENvbnRlbnQoaHRtbF8yNzYxMWQ5ZmJiMjM0NWY0OWQxYWRjYmI1OTYzZThiYik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl9hMTUxMDgwMzM3YzA0NGZkOTZjZDI0NzdhYjRiNDZiZS5iaW5kUG9wdXAocG9wdXBfZWUyNzQzODIzNGQ4NGIzYmJkMmQ1OTc2ZDI0NjdiODkpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZDdkYWQ5ZjgwMGFjNDEyYTk4MjNmNWRjZmZmNjI4ZWEgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42OTY5NDc2LC03OS40MTEzMDcyMDAwMDAwMV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjZmYwMDAwIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF85YzAwYzY2YWY2N2Q0MGNlYjQzYTY3MzYxOGY2YWRiNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8zM2EwMjExYTc0MDY0YTlhOTE3ZTBhYzFkMWNmMzEwNSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8yOTI0NjBkN2JlMTA0ZjQyYjNmMTUzMDljNjNkZmQxZCA9ICQoJzxkaXYgaWQ9Imh0bWxfMjkyNDYwZDdiZTEwNGY0MmIzZjE1MzA5YzYzZGZkMWQiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkZvcmVzdCBIaWxsIE5vcnRoLCBGb3Jlc3QgSGlsbCBXZXN0IENsdXN0ZXIgMDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMzNhMDIxMWE3NDA2NGE5YTkxN2UwYWMxZDFjZjMxMDUuc2V0Q29udGVudChodG1sXzI5MjQ2MGQ3YmUxMDRmNDJiM2YxNTMwOWM2M2RmZDFkKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2Q3ZGFkOWY4MDBhYzQxMmE5ODIzZjVkY2ZmZjYyOGVhLmJpbmRQb3B1cChwb3B1cF8zM2EwMjExYTc0MDY0YTlhOTE3ZTBhYzFkMWNmMzEwNSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl83MTkxMThiY2QwZTE0ODk3OWQ1YmNlNTQzZTNmMTA0ZSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY3MjcwOTcsLTc5LjQwNTY3ODQwMDAwMDAxXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiM4MGZmYjQiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjODBmZmI0IiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzljMDBjNjZhZjY3ZDQwY2ViNDNhNjczNjE4ZjZhZGI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzBjMWU2YTMxMzNhMDQxNjQ5ZWVlYjdjZTg1NTM4ZWM3ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2ZmMmQxMTdhYjZmZTRmNTM4MWUzOWNiMzY4YjNlMjkwID0gJCgnPGRpdiBpZD0iaHRtbF9mZjJkMTE3YWI2ZmU0ZjUzODFlMzljYjM2OGIzZTI5MCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VGhlIEFubmV4LCBOb3J0aCBNaWR0b3duLCBZb3JrdmlsbGUgQ2x1c3RlciAzPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8wYzFlNmEzMTMzYTA0MTY0OWVlZWI3Y2U4NTUzOGVjNy5zZXRDb250ZW50KGh0bWxfZmYyZDExN2FiNmZlNGY1MzgxZTM5Y2IzNjhiM2UyOTApOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfNzE5MTE4YmNkMGUxNDg5NzlkNWJjZTU0M2UzZjEwNGUuYmluZFBvcHVwKHBvcHVwXzBjMWU2YTMxMzNhMDQxNjQ5ZWVlYjdjZTg1NTM4ZWM3KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzljYjYxMWYzN2E3MDQwNjU4N2QxMDZiZWRjMTc0NjhiID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjYyNjk1NiwtNzkuNDAwMDQ5M10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjZmYwMDAwIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF85YzAwYzY2YWY2N2Q0MGNlYjQzYTY3MzYxOGY2YWRiNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8xODFkM2UzMTQ2YzQ0ZTNiYjkzZDM4OTVlODg0OGNmYyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF80YzM1YjY4OGRmZGY0MzA2ODkyNTRmMWYzNDc0Zjg3OCA9ICQoJzxkaXYgaWQ9Imh0bWxfNGMzNWI2ODhkZmRmNDMwNjg5MjU0ZjFmMzQ3NGY4NzgiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkhhcmJvcmQsIFVuaXZlcnNpdHkgb2YgVG9yb250byBDbHVzdGVyIDA8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwXzE4MWQzZTMxNDZjNDRlM2JiOTNkMzg5NWU4ODQ4Y2ZjLnNldENvbnRlbnQoaHRtbF80YzM1YjY4OGRmZGY0MzA2ODkyNTRmMWYzNDc0Zjg3OCk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl85Y2I2MTFmMzdhNzA0MDY1ODdkMTA2YmVkYzE3NDY4Yi5iaW5kUG9wdXAocG9wdXBfMTgxZDNlMzE0NmM0NGUzYmI5M2QzODk1ZTg4NDhjZmMpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMDU5ZWZhNmFkYzQzNDk2NzhjMTFlNGYwOWYwY2I1ZjEgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NTMyMDU3LC03OS40MDAwNDkzXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiNmZjAwMDAiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjZmYwMDAwIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzljMDBjNjZhZjY3ZDQwY2ViNDNhNjczNjE4ZjZhZGI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2FhZDdhMDZhNjEwNDRiMGFhOGU2OTYxZWU3YjhjODc0ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzgzZDVkYmEwZGE5MTQyYTdiYzVhN2MyN2E5N2M0ODk3ID0gJCgnPGRpdiBpZD0iaHRtbF84M2Q1ZGJhMGRhOTE0MmE3YmM1YTdjMjdhOTdjNDg5NyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2hpbmF0b3duLCBHcmFuZ2UgUGFyaywgS2Vuc2luZ3RvbiBNYXJrZXQgQ2x1c3RlciAwPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9hYWQ3YTA2YTYxMDQ0YjBhYThlNjk2MWVlN2I4Yzg3NC5zZXRDb250ZW50KGh0bWxfODNkNWRiYTBkYTkxNDJhN2JjNWE3YzI3YTk3YzQ4OTcpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMDU5ZWZhNmFkYzQzNDk2NzhjMTFlNGYwOWYwY2I1ZjEuYmluZFBvcHVwKHBvcHVwX2FhZDdhMDZhNjEwNDRiMGFhOGU2OTYxZWU3YjhjODc0KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2JhM2U5NGNhZjcyNzQ0MmNhNjJlNWUyNjU3OTJiNWUzID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjI4OTQ2NywtNzkuMzk0NDE5OV0sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjZmZiMzYwIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiI2ZmYjM2MCIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF85YzAwYzY2YWY2N2Q0MGNlYjQzYTY3MzYxOGY2YWRiNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF8xODBiYmFkMjJjMTM0YTMwYTkxZmVmZjljOGE0NTMwMSA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF8zZTYxODVjZDIzYTU0MTU1OWVkNjE2NDFhZWM1OTMxNiA9ICQoJzxkaXYgaWQ9Imh0bWxfM2U2MTg1Y2QyM2E1NDE1NTllZDYxNjQxYWVjNTkzMTYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNOIFRvd2VyLCBCYXRodXJzdCBRdWF5LCBJc2xhbmQgYWlycG9ydCwgSGFyYm91cmZyb250IFdlc3QsIEtpbmcgYW5kIFNwYWRpbmEsIFJhaWx3YXkgTGFuZHMsIFNvdXRoIE5pYWdhcmEgQ2x1c3RlciA0PC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8xODBiYmFkMjJjMTM0YTMwYTkxZmVmZjljOGE0NTMwMS5zZXRDb250ZW50KGh0bWxfM2U2MTg1Y2QyM2E1NDE1NTllZDYxNjQxYWVjNTkzMTYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfYmEzZTk0Y2FmNzI3NDQyY2E2MmU1ZTI2NTc5MmI1ZTMuYmluZFBvcHVwKHBvcHVwXzE4MGJiYWQyMmMxMzRhMzBhOTFmZWZmOWM4YTQ1MzAxKTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzExZmY0Mjk1Mjg5MDQzYzZhNzczMmVmN2I5MzIxZGIyID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjQ2NDM1MiwtNzkuMzc0ODQ1OTk5OTk5OTldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiIzAwYjVlYiIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiMwMGI1ZWIiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfOWMwMGM2NmFmNjdkNDBjZWI0M2E2NzM2MThmNmFkYjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNzBlZGQ4YTZlMWU0NGEyNzk1ZDE3OWY0MDRjY2UwODMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfMjNiODI1MDZjMzY5NDQ2N2JjOTI2ZGQ4NjcxNTExZmEgPSAkKCc8ZGl2IGlkPSJodG1sXzIzYjgyNTA2YzM2OTQ0NjdiYzkyNmRkODY3MTUxMWZhIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5TdG4gQSBQTyBCb3hlcyAyNSBUaGUgRXNwbGFuYWRlIENsdXN0ZXIgMjwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNzBlZGQ4YTZlMWU0NGEyNzk1ZDE3OWY0MDRjY2UwODMuc2V0Q29udGVudChodG1sXzIzYjgyNTA2YzM2OTQ0NjdiYzkyNmRkODY3MTUxMWZhKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzExZmY0Mjk1Mjg5MDQzYzZhNzczMmVmN2I5MzIxZGIyLmJpbmRQb3B1cChwb3B1cF83MGVkZDhhNmUxZTQ0YTI3OTVkMTc5ZjQwNGNjZTA4Myk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl81MjU3ZWY5ZmZmOWY0ZTMwYTdkNzFhNGEyZjdlNzA0MyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY0ODQyOTIsLTc5LjM4MjI4MDJdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfOWMwMGM2NmFmNjdkNDBjZWI0M2E2NzM2MThmNmFkYjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZDliODllOWYyNzdiNDhmNjk5MjJhZTM1MzI1MjExYjcgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfM2RmMmJmMmQ2OThjNGJiODk3Nzc4MjM5ZDRlM2VhMTIgPSAkKCc8ZGl2IGlkPSJodG1sXzNkZjJiZjJkNjk4YzRiYjg5Nzc3ODIzOWQ0ZTNlYTEyIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5GaXJzdCBDYW5hZGlhbiBQbGFjZSwgVW5kZXJncm91bmQgY2l0eSBDbHVzdGVyIDA8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2Q5Yjg5ZTlmMjc3YjQ4ZjY5OTIyYWUzNTMyNTIxMWI3LnNldENvbnRlbnQoaHRtbF8zZGYyYmYyZDY5OGM0YmI4OTc3NzgyMzlkNGUzZWExMik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl81MjU3ZWY5ZmZmOWY0ZTMwYTdkNzFhNGEyZjdlNzA0My5iaW5kUG9wdXAocG9wdXBfZDliODllOWYyNzdiNDhmNjk5MjJhZTM1MzI1MjExYjcpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNDRhNGU2ZGYxM2YwNGQ5Nzk2YjIyMmY5YjU5OTM1NDMgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42Njk1NDIsLTc5LjQyMjU2MzddLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfOWMwMGM2NmFmNjdkNDBjZWI0M2E2NzM2MThmNmFkYjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfYjNjMWFjNzZjMDA5NDA5ZmJhNmRlMjY3Y2FmYjYwMTUgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfM2VkYWNhNTQ1MDYwNDk1MmJjYTFjZGI5NmExOWZmZDcgPSAkKCc8ZGl2IGlkPSJodG1sXzNlZGFjYTU0NTA2MDQ5NTJiY2ExY2RiOTZhMTlmZmQ3IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5DaHJpc3RpZSBDbHVzdGVyIDA8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2IzYzFhYzc2YzAwOTQwOWZiYTZkZTI2N2NhZmI2MDE1LnNldENvbnRlbnQoaHRtbF8zZWRhY2E1NDUwNjA0OTUyYmNhMWNkYjk2YTE5ZmZkNyk7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl80NGE0ZTZkZjEzZjA0ZDk3OTZiMjIyZjliNTk5MzU0My5iaW5kUG9wdXAocG9wdXBfYjNjMWFjNzZjMDA5NDA5ZmJhNmRlMjY3Y2FmYjYwMTUpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMWIwNmU0MmQwOTBhNGFlOGIyMmNjZmM0OWE5NjQ3YTMgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NjkwMDUxMDAwMDAwMSwtNzkuNDQyMjU5M10sCiAgICAgICAgICAgICAgICB7CiAgImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLAogICJjb2xvciI6ICIjZmYwMDAwIiwKICAiZGFzaEFycmF5IjogbnVsbCwKICAiZGFzaE9mZnNldCI6IG51bGwsCiAgImZpbGwiOiB0cnVlLAogICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsCiAgImZpbGxPcGFjaXR5IjogMC43LAogICJmaWxsUnVsZSI6ICJldmVub2RkIiwKICAibGluZUNhcCI6ICJyb3VuZCIsCiAgImxpbmVKb2luIjogInJvdW5kIiwKICAib3BhY2l0eSI6IDEuMCwKICAicmFkaXVzIjogNSwKICAic3Ryb2tlIjogdHJ1ZSwKICAid2VpZ2h0IjogMwp9CiAgICAgICAgICAgICAgICApLmFkZFRvKG1hcF85YzAwYzY2YWY2N2Q0MGNlYjQzYTY3MzYxOGY2YWRiNyk7CiAgICAgICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBwb3B1cF9jMTU4NTMwZDU4OGY0ZDkwYTZiMTQwZGE3ZjQxNDUzNyA9IEwucG9wdXAoe21heFdpZHRoOiAnMzAwJ30pOwoKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB2YXIgaHRtbF83ZGUyOGRiNGY2Nzk0OTc4OTU3MGIyYWQ5ZGQxMmU2YyA9ICQoJzxkaXYgaWQ9Imh0bWxfN2RlMjhkYjRmNjc5NDk3ODk1NzBiMmFkOWRkMTJlNmMiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkRvdmVyY291cnQgVmlsbGFnZSwgRHVmZmVyaW4gQ2x1c3RlciAwPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9jMTU4NTMwZDU4OGY0ZDkwYTZiMTQwZGE3ZjQxNDUzNy5zZXRDb250ZW50KGh0bWxfN2RlMjhkYjRmNjc5NDk3ODk1NzBiMmFkOWRkMTJlNmMpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfMWIwNmU0MmQwOTBhNGFlOGIyMmNjZmM0OWE5NjQ3YTMuYmluZFBvcHVwKHBvcHVwX2MxNTg1MzBkNTg4ZjRkOTBhNmIxNDBkYTdmNDE0NTM3KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2VmODlhNmZkNDMxZjRkZGJhZWQ5YTM2MmU1MWNiMzkzID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjQ3OTI2NzAwMDAwMDA2LC03OS40MTk3NDk3XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiNmZjAwMDAiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjZmYwMDAwIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzljMDBjNjZhZjY3ZDQwY2ViNDNhNjczNjE4ZjZhZGI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2I4ODUyODRkYzM3MjQ5OTNiZDE2MGMzYjhjZDcyYmNlID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2ZjNDk1YTA5MDJmZDRhNjM5MmQyMjkxMDM2ODRmNTBlID0gJCgnPGRpdiBpZD0iaHRtbF9mYzQ5NWEwOTAyZmQ0YTYzOTJkMjI5MTAzNjg0ZjUwZSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TGl0dGxlIFBvcnR1Z2FsLCBUcmluaXR5IENsdXN0ZXIgMDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfYjg4NTI4NGRjMzcyNDk5M2JkMTYwYzNiOGNkNzJiY2Uuc2V0Q29udGVudChodG1sX2ZjNDk1YTA5MDJmZDRhNjM5MmQyMjkxMDM2ODRmNTBlKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyX2VmODlhNmZkNDMxZjRkZGJhZWQ5YTM2MmU1MWNiMzkzLmJpbmRQb3B1cChwb3B1cF9iODg1Mjg0ZGMzNzI0OTkzYmQxNjBjM2I4Y2Q3MmJjZSk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl84OGNjY2E0ZmFiZjM0OTNlODVhYTcxZjk5MGRhMDM3ZiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjYzNjg0NzIsLTc5LjQyODE5MTQwMDAwMDAyXSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiNmZjAwMDAiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjZmYwMDAwIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzljMDBjNjZhZjY3ZDQwY2ViNDNhNjczNjE4ZjZhZGI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwX2VlOWRhZTJiZjVlYjQ2ZDI4OGNhMmUxNzBkYjVkMjQ2ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sXzA0NjBmMDdiMjMyYzQ1YjhhZWU5MTFhMmY3YTRiMWQwID0gJCgnPGRpdiBpZD0iaHRtbF8wNDYwZjA3YjIzMmM0NWI4YWVlOTExYTJmN2E0YjFkMCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QnJvY2t0b24sIEV4aGliaXRpb24gUGxhY2UsIFBhcmtkYWxlIFZpbGxhZ2UgQ2x1c3RlciAwPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF9lZTlkYWUyYmY1ZWI0NmQyODhjYTJlMTcwZGI1ZDI0Ni5zZXRDb250ZW50KGh0bWxfMDQ2MGYwN2IyMzJjNDViOGFlZTkxMWEyZjdhNGIxZDApOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfODhjY2NhNGZhYmYzNDkzZTg1YWE3MWY5OTBkYTAzN2YuYmluZFBvcHVwKHBvcHVwX2VlOWRhZTJiZjVlYjQ2ZDI4OGNhMmUxNzBkYjVkMjQ2KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzhmMDI0YzI2M2Y1ZjRlZmI5MTViZjFmOWFlMTRlZTQ1ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjYxNjA4MywtNzkuNDY0NzYzMjk5OTk5OTldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfOWMwMGM2NmFmNjdkNDBjZWI0M2E2NzM2MThmNmFkYjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfZWNhZGMwMjE2YWQ2NDgyMDg3OTg4ZDIyZWNjMjE0ODcgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYWU5NjNhNGZjM2UzNGVhYmFjNzYxMTA2NTc2YTI1YWYgPSAkKCc8ZGl2IGlkPSJodG1sX2FlOTYzYTRmYzNlMzRlYWJhYzc2MTEwNjU3NmEyNWFmIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5IaWdoIFBhcmssIFRoZSBKdW5jdGlvbiBTb3V0aCBDbHVzdGVyIDA8L2Rpdj4nKVswXTsKICAgICAgICAgICAgICAgIHBvcHVwX2VjYWRjMDIxNmFkNjQ4MjA4Nzk4OGQyMmVjYzIxNDg3LnNldENvbnRlbnQoaHRtbF9hZTk2M2E0ZmMzZTM0ZWFiYWM3NjExMDY1NzZhMjVhZik7CiAgICAgICAgICAgIAoKICAgICAgICAgICAgY2lyY2xlX21hcmtlcl84ZjAyNGMyNjNmNWY0ZWZiOTE1YmYxZjlhZTE0ZWU0NS5iaW5kUG9wdXAocG9wdXBfZWNhZGMwMjE2YWQ2NDgyMDg3OTg4ZDIyZWNjMjE0ODcpOwoKICAgICAgICAgICAgCiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMDFhNzZkMTQxZTBhNDVlNGFlZmU3MDA0NDZiNWNhZGUgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFs0My42NDg5NTk3LC03OS40NTYzMjVdLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfOWMwMGM2NmFmNjdkNDBjZWI0M2E2NzM2MThmNmFkYjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfNGM5MzBkY2VhYWIzNDQ5Y2IyZjQ4ZmM5OTIyY2IwOWMgPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfYjM3NTQ4Nzc1NWI2NDI5M2FhNTRiMTdmOGI0NGNjN2YgPSAkKCc8ZGl2IGlkPSJodG1sX2IzNzU0ODc3NTViNjQyOTNhYTU0YjE3ZjhiNDRjYzdmIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5QYXJrZGFsZSwgUm9uY2VzdmFsbGVzIENsdXN0ZXIgMDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfNGM5MzBkY2VhYWIzNDQ5Y2IyZjQ4ZmM5OTIyY2IwOWMuc2V0Q29udGVudChodG1sX2IzNzU0ODc3NTViNjQyOTNhYTU0YjE3ZjhiNDRjYzdmKTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzAxYTc2ZDE0MWUwYTQ1ZTRhZWZlNzAwNDQ2YjVjYWRlLmJpbmRQb3B1cChwb3B1cF80YzkzMGRjZWFhYjM0NDljYjJmNDhmYzk5MjJjYjA5Yyk7CgogICAgICAgICAgICAKICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl83YzMyMDNhY2M5MDA0Mjc5OWI1NTY0ODRiMDVjNGFhYyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzQzLjY1MTU3MDYsLTc5LjQ4NDQ0OTldLAogICAgICAgICAgICAgICAgewogICJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwKICAiY29sb3IiOiAiI2ZmMDAwMCIsCiAgImRhc2hBcnJheSI6IG51bGwsCiAgImRhc2hPZmZzZXQiOiBudWxsLAogICJmaWxsIjogdHJ1ZSwKICAiZmlsbENvbG9yIjogIiNmZjAwMDAiLAogICJmaWxsT3BhY2l0eSI6IDAuNywKICAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsCiAgImxpbmVDYXAiOiAicm91bmQiLAogICJsaW5lSm9pbiI6ICJyb3VuZCIsCiAgIm9wYWNpdHkiOiAxLjAsCiAgInJhZGl1cyI6IDUsCiAgInN0cm9rZSI6IHRydWUsCiAgIndlaWdodCI6IDMKfQogICAgICAgICAgICAgICAgKS5hZGRUbyhtYXBfOWMwMGM2NmFmNjdkNDBjZWI0M2E2NzM2MThmNmFkYjcpOwogICAgICAgICAgICAKICAgIAogICAgICAgICAgICB2YXIgcG9wdXBfMTMxYTgyNzZhMWY3NDY1NWI3MDJiZjdhOTkyNGUwMDggPSBMLnBvcHVwKHttYXhXaWR0aDogJzMwMCd9KTsKCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdmFyIGh0bWxfNTBmYzlkZmZmMzQyNDBhNWEyOGUxMmVkMGY1NWYzZGYgPSAkKCc8ZGl2IGlkPSJodG1sXzUwZmM5ZGZmZjM0MjQwYTVhMjhlMTJlZDBmNTVmM2RmIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5SdW5ueW1lZGUsIFN3YW5zZWEgQ2x1c3RlciAwPC9kaXY+JylbMF07CiAgICAgICAgICAgICAgICBwb3B1cF8xMzFhODI3NmExZjc0NjU1YjcwMmJmN2E5OTI0ZTAwOC5zZXRDb250ZW50KGh0bWxfNTBmYzlkZmZmMzQyNDBhNWEyOGUxMmVkMGY1NWYzZGYpOwogICAgICAgICAgICAKCiAgICAgICAgICAgIGNpcmNsZV9tYXJrZXJfN2MzMjAzYWNjOTAwNDI3OTliNTU2NDg0YjA1YzRhYWMuYmluZFBvcHVwKHBvcHVwXzEzMWE4Mjc2YTFmNzQ2NTViNzAyYmY3YTk5MjRlMDA4KTsKCiAgICAgICAgICAgIAogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzk0OTZhMTdhZGFmODQ4OWZiZmNlZjQ3MmQ4OTJhYjU4ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbNDMuNjYyNzQzOSwtNzkuMzIxNTU4XSwKICAgICAgICAgICAgICAgIHsKICAiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsCiAgImNvbG9yIjogIiNmZjAwMDAiLAogICJkYXNoQXJyYXkiOiBudWxsLAogICJkYXNoT2Zmc2V0IjogbnVsbCwKICAiZmlsbCI6IHRydWUsCiAgImZpbGxDb2xvciI6ICIjZmYwMDAwIiwKICAiZmlsbE9wYWNpdHkiOiAwLjcsCiAgImZpbGxSdWxlIjogImV2ZW5vZGQiLAogICJsaW5lQ2FwIjogInJvdW5kIiwKICAibGluZUpvaW4iOiAicm91bmQiLAogICJvcGFjaXR5IjogMS4wLAogICJyYWRpdXMiOiA1LAogICJzdHJva2UiOiB0cnVlLAogICJ3ZWlnaHQiOiAzCn0KICAgICAgICAgICAgICAgICkuYWRkVG8obWFwXzljMDBjNjZhZjY3ZDQwY2ViNDNhNjczNjE4ZjZhZGI3KTsKICAgICAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIHBvcHVwXzEzZWZiNGMxNTQyOTRhMjU5MDAyZjRkY2ExYmIzZDM0ID0gTC5wb3B1cCh7bWF4V2lkdGg6ICczMDAnfSk7CgogICAgICAgICAgICAKICAgICAgICAgICAgICAgIHZhciBodG1sX2RkN2ExYjI3NTUyOTQyYmJhM2JkNGFmYzcwZGUxODQ0ID0gJCgnPGRpdiBpZD0iaHRtbF9kZDdhMWIyNzU1Mjk0MmJiYTNiZDRhZmM3MGRlMTg0NCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QnVzaW5lc3MgcmVwbHkgbWFpbCBQcm9jZXNzaW5nIENlbnRyZTk2OSBFYXN0ZXJuIENsdXN0ZXIgMDwvZGl2PicpWzBdOwogICAgICAgICAgICAgICAgcG9wdXBfMTNlZmI0YzE1NDI5NGEyNTkwMDJmNGRjYTFiYjNkMzQuc2V0Q29udGVudChodG1sX2RkN2ExYjI3NTUyOTQyYmJhM2JkNGFmYzcwZGUxODQ0KTsKICAgICAgICAgICAgCgogICAgICAgICAgICBjaXJjbGVfbWFya2VyXzk0OTZhMTdhZGFmODQ4OWZiZmNlZjQ3MmQ4OTJhYjU4LmJpbmRQb3B1cChwb3B1cF8xM2VmYjRjMTU0Mjk0YTI1OTAwMmY0ZGNhMWJiM2QzNCk7CgogICAgICAgICAgICAKICAgICAgICAKPC9zY3JpcHQ+\" style=\"position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;\" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>", 
                        "text/plain": "<folium.folium.Map at 0x2b0c6c884f28>"
                    }, 
                    "output_type": "execute_result"
                }
            ], 
            "source": "# create map\nmap_clusters = folium.Map(location=[latitude, longitude], zoom_start=11)\n\n# set color scheme for the clusters\nx = np.arange(kclusters)\nys = [i+x+(i*x)**2 for i in range(kclusters)]\ncolors_array = cm.rainbow(np.linspace(0, 1, len(ys)))\nrainbow = [colors.rgb2hex(i) for i in colors_array]\n\n# add markers to the map\nmarkers_colors = []\nfor lat, lon, poi, cluster in zip(toronto_merged['Latitude'], toronto_merged['Longitude'], toronto_merged['Neighborhood'], toronto_merged['Cluster Labels']):\n    label = folium.Popup(str(poi) + ' Cluster ' + str(cluster), parse_html=True)\n    folium.CircleMarker(\n        [lat, lon],\n        radius=5,\n        popup=label,\n        color=rainbow[cluster-1],\n        fill=True,\n        fill_color=rainbow[cluster-1],\n        fill_opacity=0.7).add_to(map_clusters)\n       \nmap_clusters"
        }, 
        {
            "execution_count": null, 
            "cell_type": "code", 
            "metadata": {}, 
            "outputs": [], 
            "source": ""
        }
    ], 
    "metadata": {
        "kernelspec": {
            "display_name": "Python 3.5", 
            "name": "python3", 
            "language": "python"
        }, 
        "language_info": {
            "mimetype": "text/x-python", 
            "nbconvert_exporter": "python", 
            "version": "3.5.5", 
            "name": "python", 
            "file_extension": ".py", 
            "pygments_lexer": "ipython3", 
            "codemirror_mode": {
                "version": 3, 
                "name": "ipython"
            }
        }
    }, 
    "nbformat": 4
}